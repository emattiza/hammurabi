const xn=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))L(b);new MutationObserver(b=>{for(const i of b)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&L(f)}).observe(document,{childList:!0,subtree:!0});function m(b){const i={};return b.integrity&&(i.integrity=b.integrity),b.referrerpolicy&&(i.referrerPolicy=b.referrerpolicy),b.crossorigin==="use-credentials"?i.credentials="include":b.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function L(b){if(b.ep)return;b.ep=!0;const i=m(b);fetch(b.href,i)}};xn();function $e(n,s,m){return m.a=n,m.f=s,m}function q(n){return $e(2,n,function(s){return function(m){return n(s,m)}})}function ee(n){return $e(3,n,function(s){return function(m){return function(L){return n(s,m,L)}}})}function Re(n){return $e(4,n,function(s){return function(m){return function(L){return function(b){return n(s,m,L,b)}}}})}function _t(n){return $e(5,n,function(s){return function(m){return function(L){return function(b){return function(i){return n(s,m,L,b,i)}}}}})}function br(n){return $e(6,n,function(s){return function(m){return function(L){return function(b){return function(i){return function(f){return n(s,m,L,b,i,f)}}}}}})}function Gi(n){return $e(7,n,function(s){return function(m){return function(L){return function(b){return function(i){return function(f){return function(l){return n(s,m,L,b,i,f,l)}}}}}}})}function Ji(n){return $e(8,n,function(s){return function(m){return function(L){return function(b){return function(i){return function(f){return function(l){return function(d){return n(s,m,L,b,i,f,l,d)}}}}}}}})}function Xi(n){return $e(9,n,function(s){return function(m){return function(L){return function(b){return function(i){return function(f){return function(l){return function(d){return function(p){return n(s,m,L,b,i,f,l,d,p)}}}}}}}}})}function V(n,s,m){return n.a===2?n.f(s,m):n(s)(m)}function te(n,s,m,L){return n.a===3?n.f(s,m,L):n(s)(m)(L)}function Me(n,s,m,L,b){return n.a===4?n.f(s,m,L,b):n(s)(m)(L)(b)}function ut(n,s,m,L,b,i){return n.a===5?n.f(s,m,L,b,i):n(s)(m)(L)(b)(i)}function ni(n,s,m,L,b,i,f){return n.a===6?n.f(s,m,L,b,i,f):n(s)(m)(L)(b)(i)(f)}function Dn(n,s,m,L,b,i,f,l){return n.a===7?n.f(s,m,L,b,i,f,l):n(s)(m)(L)(b)(i)(f)(l)}function Bn(n,s,m,L,b,i,f,l,d){return n.a===8?n.f(s,m,L,b,i,f,l,d):n(s)(m)(L)(b)(i)(f)(l)(d)}function Yi(n,s){for(var m,L=[],b=oi(n,s,0,L);b&&(m=L.pop());b=oi(m.a,m.b,0,L));return b}function oi(n,s,m,L){if(n===s)return!0;if(typeof n!="object"||n===null||s===null)return typeof n=="function"&&Sr(5),!1;if(m>100)return L.push(De(n,s)),!0;n.$<0&&(n=ji(n),s=ji(s));for(var b in n)if(!oi(n[b],s[b],m+1,L))return!1;return!0}q(Yi);q(function(n,s){return!Yi(n,s)});function pe(n,s,m){if(typeof n!="object")return n===s?0:n<s?-1:1;if(typeof n.$=="undefined")return(m=pe(n.a,s.a))||(m=pe(n.b,s.b))?m:pe(n.c,s.c);for(;n.b&&s.b&&!(m=pe(n.a,s.a));n=n.b,s=s.b);return m||(n.b?1:s.b?-1:0)}q(function(n,s){return pe(n,s)<0});q(function(n,s){return pe(n,s)<1});q(function(n,s){return pe(n,s)>0});q(function(n,s){return pe(n,s)>=0});q(function(n,s){var m=pe(n,s);return m<0?hn:m?Yo:ln});var dt=0;function De(n,s){return{a:n,b:s}}function Tn(n,s){var m={};for(var L in n)m[L]=n[L];for(var L in s)m[L]=s[L];return m}q(Pn);function Pn(n,s){if(typeof n=="string")return n+s;if(!n.b)return s;var m=ke(n.a,s);n=n.b;for(var L=m;n.b;n=n.b)L=L.b=ke(n.a,s);return m}var ie={$:0};function ke(n,s){return{$:1,a:n,b:s}}var In=q(ke);function Oe(n){for(var s=ie,m=n.length;m--;)s=ke(n[m],s);return s}function fi(n){for(var s=[];n.b;n=n.b)s.push(n.a);return s}var Hn=ee(function(n,s,m){for(var L=[];s.b&&m.b;s=s.b,m=m.b)L.push(V(n,s.a,m.a));return Oe(L)});Re(function(n,s,m,L){for(var b=[];s.b&&m.b&&L.b;s=s.b,m=m.b,L=L.b)b.push(te(n,s.a,m.a,L.a));return Oe(b)});_t(function(n,s,m,L,b){for(var i=[];s.b&&m.b&&L.b&&b.b;s=s.b,m=m.b,L=L.b,b=b.b)i.push(Me(n,s.a,m.a,L.a,b.a));return Oe(i)});br(function(n,s,m,L,b,i){for(var f=[];s.b&&m.b&&L.b&&b.b&&i.b;s=s.b,m=m.b,L=L.b,b=b.b,i=i.b)f.push(ut(n,s.a,m.a,L.a,b.a,i.a));return Oe(f)});q(function(n,s){return Oe(fi(s).sort(function(m,L){return pe(n(m),n(L))}))});q(function(n,s){return Oe(fi(s).sort(function(m,L){var b=V(n,m,L);return b===ln?0:b===hn?-1:1}))});var $n=[];function Fn(n){return n.length}var jn=ee(function(n,s,m){for(var L=new Array(n),b=0;b<n;b++)L[b]=m(s+b);return L}),Wn=q(function(n,s){for(var m=new Array(n),L=0;L<n&&s.b;L++)m[L]=s.a,s=s.b;return m.length=L,De(m,s)});q(function(n,s){return s[n]});ee(function(n,s,m){for(var L=m.length,b=new Array(L),i=0;i<L;i++)b[i]=m[i];return b[n]=s,b});q(function(n,s){for(var m=s.length,L=new Array(m+1),b=0;b<m;b++)L[b]=s[b];return L[m]=n,L});ee(function(n,s,m){for(var L=m.length,b=0;b<L;b++)s=V(n,m[b],s);return s});var Un=ee(function(n,s,m){for(var L=m.length-1;L>=0;L--)s=V(n,m[L],s);return s});q(function(n,s){for(var m=s.length,L=new Array(m),b=0;b<m;b++)L[b]=n(s[b]);return L});ee(function(n,s,m){for(var L=m.length,b=new Array(L),i=0;i<L;i++)b[i]=V(n,s+i,m[i]);return b});ee(function(n,s,m){return m.slice(n,s)});ee(function(n,s,m){var L=s.length,b=n-L;b>m.length&&(b=m.length);for(var i=L+b,f=new Array(i),l=0;l<L;l++)f[l]=s[l];for(var l=0;l<b;l++)f[l+L]=m[l];return f});q(function(n,s){return s});q(function(n,s){return console.log(n+": "+qn()),s});function qn(n){return"<internals>"}function Sr(n){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+n+".md")}q(function(n,s){return n+s});q(function(n,s){return n-s});q(function(n,s){return n*s});q(function(n,s){return n/s});q(function(n,s){return n/s|0});q(Math.pow);q(function(n,s){return s%n});q(function(n,s){var m=s%n;return n===0?Sr(11):m>0&&n<0||m<0&&n>0?m+n:m});q(Math.atan2);var zn=Math.ceil,Nn=Math.floor,xi=Math.log;q(function(n,s){return n&&s});q(function(n,s){return n||s});q(function(n,s){return n!==s});q(function(n,s){return n+s});function Vn(n){var s=n.charCodeAt(0);return isNaN(s)?ue:Ge(55296<=s&&s<=56319?De(n[0]+n[1],n.slice(2)):De(n[0],n.slice(1)))}q(function(n,s){return n+s});function Kn(n){return n.length}q(function(n,s){for(var m=s.length,L=new Array(m),b=0;b<m;){var i=s.charCodeAt(b);if(55296<=i&&i<=56319){L[b]=n(s[b]+s[b+1]),b+=2;continue}L[b]=n(s[b]),b++}return L.join("")});q(function(n,s){for(var m=[],L=s.length,b=0;b<L;){var i=s[b],f=s.charCodeAt(b);b++,55296<=f&&f<=56319&&(i+=s[b],b++),n(i)&&m.push(i)}return m.join("")});ee(function(n,s,m){for(var L=m.length,b=0;b<L;){var i=m[b],f=m.charCodeAt(b);b++,55296<=f&&f<=56319&&(i+=m[b],b++),s=V(n,i,s)}return s});ee(function(n,s,m){for(var L=m.length;L--;){var b=m[L],i=m.charCodeAt(L);56320<=i&&i<=57343&&(L--,b=m[L]+b),s=V(n,b,s)}return s});var Gn=q(function(n,s){return s.split(n)}),Jn=q(function(n,s){return s.join(n)}),Xn=ee(function(n,s,m){return m.slice(n,s)});q(function(n,s){for(var m=s.length;m--;){var L=s[m],b=s.charCodeAt(m);if(56320<=b&&b<=57343&&(m--,L=s[m]+L),n(L))return!0}return!1});var Yn=q(function(n,s){for(var m=s.length;m--;){var L=s[m],b=s.charCodeAt(m);if(56320<=b&&b<=57343&&(m--,L=s[m]+L),!n(L))return!1}return!0}),Zn=q(function(n,s){return s.indexOf(n)>-1});q(function(n,s){return s.indexOf(n)===0});q(function(n,s){return s.length>=n.length&&s.lastIndexOf(n)===s.length-n.length});var Qn=q(function(n,s){var m=n.length;if(m<1)return ie;for(var L=0,b=[];(L=s.indexOf(n,L))>-1;)b.push(L),L=L+m;return Oe(b)});function eo(n){return n+""}function to(n){for(var s=0,m=n.charCodeAt(0),L=m==43||m==45?1:0,b=L;b<n.length;++b){var i=n.charCodeAt(b);if(i<48||57<i)return ue;s=10*s+i-48}return b==L?ue:Ge(m==45?-s:s)}function ro(n){var s=n.charCodeAt(0);return 55296<=s&&s<=56319?(s-55296)*1024+n.charCodeAt(1)-56320+65536:s}function io(n){return{$:0,a:n}}q(function(n,s){return{$:6,d:n,b:s}});q(function(n,s){return{$:7,e:n,b:s}});function Fe(n,s){return{$:9,f:n,g:s}}q(function(n,s){return{$:10,b:s,h:n}});var no=q(function(n,s){return Fe(n,[s])}),oo=ee(function(n,s,m){return Fe(n,[s,m])});Re(function(n,s,m,L){return Fe(n,[s,m,L])});_t(function(n,s,m,L,b){return Fe(n,[s,m,L,b])});br(function(n,s,m,L,b,i){return Fe(n,[s,m,L,b,i])});Gi(function(n,s,m,L,b,i,f){return Fe(n,[s,m,L,b,i,f])});Ji(function(n,s,m,L,b,i,f,l){return Fe(n,[s,m,L,b,i,f,l])});Xi(function(n,s,m,L,b,i,f,l,d){return Fe(n,[s,m,L,b,i,f,l,d])});q(function(n,s){try{var m=JSON.parse(s);return de(n,m)}catch(L){return Pe(V(Si,"This is not valid JSON! "+L.message,s))}});var so=q(function(n,s){return de(n,s)});function de(n,s){switch(n.$){case 2:return n.b(s);case 5:return s===null?lt(n.c):Ve("null",s);case 3:return _r(s)?Di(n.b,s,Oe):Ve("a LIST",s);case 4:return _r(s)?Di(n.b,s,ao):Ve("an ARRAY",s);case 6:var m=n.d;if(typeof s!="object"||s===null||!(m in s))return Ve("an OBJECT with a field named `"+m+"`",s);var p=de(n.b,s[m]);return Ee(p)?p:Pe(V(Wi,m,p.a));case 7:var L=n.e;if(!_r(s))return Ve("an ARRAY",s);if(L>=s.length)return Ve("a LONGER array. Need index "+L+" but only see "+s.length+" entries",s);var p=de(n.b,s[L]);return Ee(p)?p:Pe(V(fn,L,p.a));case 8:if(typeof s!="object"||s===null||_r(s))return Ve("an OBJECT",s);var b=ie;for(var i in s)if(s.hasOwnProperty(i)){var p=de(n.b,s[i]);if(!Ee(p))return Pe(V(Wi,i,p.a));b=ke(De(i,p.a),b)}return lt(He(b));case 9:for(var f=n.f,l=n.g,d=0;d<l.length;d++){var p=de(l[d],s);if(!Ee(p))return p;f=f(p.a)}return lt(f);case 10:var p=de(n.b,s);return Ee(p)?de(n.h(p.a),s):p;case 11:for(var _=ie,C=n.g;C.b;C=C.b){var p=de(C.a,s);if(Ee(p))return p;_=ke(p.a,_)}return Pe(Zo(He(_)));case 1:return Pe(V(Si,n.a,s));case 0:return lt(n.a)}}function Di(n,s,m){for(var L=s.length,b=new Array(L),i=0;i<L;i++){var f=de(n,s[i]);if(!Ee(f))return Pe(V(fn,i,f.a));b[i]=f.a}return lt(m(b))}function _r(n){return Array.isArray(n)||typeof FileList!="undefined"&&n instanceof FileList}function ao(n){return V(Cs,n.length,function(s){return n[s]})}function Ve(n,s){return Pe(V(Si,"Expecting "+n,s))}function Qe(n,s){if(n===s)return!0;if(n.$!==s.$)return!1;switch(n.$){case 0:case 1:return n.a===s.a;case 2:return n.b===s.b;case 5:return n.c===s.c;case 3:case 4:case 8:return Qe(n.b,s.b);case 6:return n.d===s.d&&Qe(n.b,s.b);case 7:return n.e===s.e&&Qe(n.b,s.b);case 9:return n.f===s.f&&Bi(n.g,s.g);case 10:return n.h===s.h&&Qe(n.b,s.b);case 11:return Bi(n.g,s.g)}}function Bi(n,s){var m=n.length;if(m!==s.length)return!1;for(var L=0;L<m;L++)if(!Qe(n[L],s[L]))return!1;return!0}var co=q(function(n,s){return JSON.stringify(s,null,n)+""});function lo(n){return n}ee(function(n,s,m){return m[n]=s,m});function et(n){return{$:0,a:n}}function ho(n){return{$:1,a:n}}function Be(n){return{$:2,b:n,c:null}}var si=q(function(n,s){return{$:3,b:n,d:s}});q(function(n,s){return{$:4,b:n,d:s}});function uo(n){return{$:5,b:n}}var fo=0;function _i(n){var s={$:0,e:fo++,f:n,g:null,h:[]};return di(s),s}function Zi(n){return Be(function(s){s(et(_i(n)))})}function Qi(n,s){n.h.push(s),di(n)}var _o=q(function(n,s){return Be(function(m){Qi(n,s),m(et(dt))})}),ri=!1,Ti=[];function di(n){if(Ti.push(n),!ri){for(ri=!0;n=Ti.shift();)po(n);ri=!1}}function po(n){for(;n.f;){var s=n.f.$;if(s===0||s===1){for(;n.g&&n.g.$!==s;)n.g=n.g.i;if(!n.g)return;n.f=n.g.b(n.f.a),n.g=n.g.i}else if(s===2){n.f.c=n.f.b(function(m){n.f=m,di(n)});return}else if(s===5){if(n.h.length===0)return;n.f=n.f.b(n.h.shift())}else n.g={$:s===3?0:1,b:n.f.b,i:n.g},n.f=n.f.d}}Re(function(n,s,m,L){return pi(s,L,n.bd,n.bF,n.bA,function(){return function(){}})});function pi(n,s,m,L,b,i){var f=V(so,n,s?s.flags:void 0);Ee(f)||Sr(2);var l={},d=m(f.a),p=d.a,_=i(y,p),C=vo(l,y);function y(a,h){var v=V(L,a,p);_(p=v.a,h),Ii(l,v.b,b(p))}return Ii(l,d.b,b(p)),C?{ports:C}:{}}var ft={};function vo(n,s){var m;for(var L in ft){var b=ft[L];b.a&&(m=m||{},m[L]=b.a(L,s)),n[L]=yo(b,s)}return m}function go(n,s,m,L,b){return{b:n,c:s,d:m,e:L,f:b}}function yo(n,s){var m={g:s,h:void 0},L=n.c,b=n.d,i=n.e,f=n.f;function l(d){return V(si,l,uo(function(p){var _=p.a;return p.$===0?te(b,m,_,d):i&&f?Me(L,m,_.i,_.j,d):te(L,m,i?_.i:_.j,d)}))}return m.h=_i(V(si,l,n.b))}var mo=q(function(n,s){return Be(function(m){n.g(s),m(et(dt))})});q(function(n,s){return V(_o,n.h,{$:0,a:s})});function bo(n){return function(s){return{$:1,k:n,l:s}}}function en(n){return{$:2,m:n}}q(function(n,s){return{$:3,n,o:s}});var Pi=[],ii=!1;function Ii(n,s,m){if(Pi.push({p:n,q:s,r:m}),!ii){ii=!0;for(var L;L=Pi.shift();)So(L.p,L.q,L.r);ii=!1}}function So(n,s,m){var L={};pr(!0,s,L,null),pr(!1,m,L,null);for(var b in n)Qi(n[b],{$:"fx",a:L[b]||{i:ie,j:ie}})}function pr(n,s,m,L){switch(s.$){case 1:var b=s.k,i=Co(n,b,L,s.l);m[b]=wo(n,i,m[b]);return;case 2:for(var f=s.m;f.b;f=f.b)pr(n,f.a,m,L);return;case 3:pr(n,s.o,m,{s:s.n,t:L});return}}function Co(n,s,m,L){function b(f){for(var l=m;l;l=l.t)f=l.s(f);return f}var i=n?ft[s].e:ft[s].f;return V(i,b,L)}function wo(n,s,m){return m=m||{i:ie,j:ie},n?m.i=ke(s,m.i):m.j=ke(s,m.j),m}q(function(n,s){return s});q(function(n,s){return function(m){return n(s(m))}});var vr,Ke=typeof document!="undefined"?document:{};function vi(n,s){n.appendChild(s)}Re(function(n,s,m,L){var b=L.node;return b.parentNode.replaceChild(Ie(n,function(){}),b),{}});function Hi(n){return{$:0,a:n}}var Lo=q(function(n,s){return q(function(m,L){for(var b=[],i=0;L.b;L=L.b){var f=L.a;i+=f.b||0,b.push(f)}return i+=b.length,{$:1,c:s,d:tn(m),e:b,f:n,b:i}})}),gi=Lo(void 0),Eo=q(function(n,s){return q(function(m,L){for(var b=[],i=0;L.b;L=L.b){var f=L.a;i+=f.b.b||0,b.push(f)}return i+=b.length,{$:2,c:s,d:tn(m),e:b,f:n,b:i}})});Eo(void 0);q(function(n,s){return{$:4,j:n,k:s,b:1+(s.b||0)}});function je(n,s){return{$:5,l:n,m:s,k:void 0}}q(function(n,s){return je([n,s],function(){return n(s)})});ee(function(n,s,m){return je([n,s,m],function(){return V(n,s,m)})});Re(function(n,s,m,L){return je([n,s,m,L],function(){return te(n,s,m,L)})});_t(function(n,s,m,L,b){return je([n,s,m,L,b],function(){return Me(n,s,m,L,b)})});br(function(n,s,m,L,b,i){return je([n,s,m,L,b,i],function(){return ut(n,s,m,L,b,i)})});Gi(function(n,s,m,L,b,i,f){return je([n,s,m,L,b,i,f],function(){return ni(n,s,m,L,b,i,f)})});Ji(function(n,s,m,L,b,i,f,l){return je([n,s,m,L,b,i,f,l],function(){return Dn(n,s,m,L,b,i,f,l)})});Xi(function(n,s,m,L,b,i,f,l,d){return je([n,s,m,L,b,i,f,l,d],function(){return Bn(n,s,m,L,b,i,f,l,d)})});var Ao=q(function(n,s){return{$:"a0",n,o:s}});q(function(n,s){return{$:"a1",n,o:s}});var Mo=q(function(n,s){return{$:"a2",n,o:s}}),ko=q(function(n,s){return{$:"a3",n,o:s}});ee(function(n,s,m){return{$:"a4",n:s,o:{f:n,o:m}}});q(function(n,s){return s.$==="a0"?V(Ao,s.n,Ro(n,s.o)):s});function Ro(n,s){var m=Li(s);return{$:s.$,a:m?te(Ls,m<3?Oo:xo,Sn(n),s.a):V(ws,n,s.a)}}var Oo=q(function(n,s){return De(n(s.a),s.b)}),xo=q(function(n,s){return{v:n(s.v),_:s._,X:s.X}});function tn(n){for(var s={};n.b;n=n.b){var m=n.a,L=m.$,b=m.n,i=m.o;if(L==="a2"){b==="className"?$i(s,b,i):s[b]=i;continue}var f=s[L]||(s[L]={});L==="a3"&&b==="class"?$i(f,b,i):f[b]=i}return s}function $i(n,s,m){var L=n[s];n[s]=L?L+" "+m:m}function Ie(n,s){var m=n.$;if(m===5)return Ie(n.k||(n.k=n.m()),s);if(m===0)return Ke.createTextNode(n.a);if(m===4){for(var L=n.k,b=n.j;L.$===4;)typeof b!="object"?b=[b,L.j]:b.push(L.j),L=L.k;var i={j:b,p:s},f=Ie(L,i);return f.elm_event_node_ref=i,f}if(m===3){var f=n.h(n.g);return ai(f,s,n.d),f}var f=n.f?Ke.createElementNS(n.f,n.c):Ke.createElement(n.c);vr&&n.c=="a"&&f.addEventListener("click",vr(f)),ai(f,s,n.d);for(var l=n.e,d=0;d<l.length;d++)vi(f,Ie(m===1?l[d]:l[d].b,s));return f}function ai(n,s,m){for(var L in m){var b=m[L];L==="a1"?Do(n,b):L==="a0"?Po(n,s,b):L==="a3"?Bo(n,b):L==="a4"?To(n,b):(L!=="value"&&L!=="checked"||n[L]!==b)&&(n[L]=b)}}function Do(n,s){var m=n.style;for(var L in s)m[L]=s[L]}function Bo(n,s){for(var m in s){var L=s[m];typeof L!="undefined"?n.setAttribute(m,L):n.removeAttribute(m)}}function To(n,s){for(var m in s){var L=s[m],b=L.f,i=L.o;typeof i!="undefined"?n.setAttributeNS(b,m,i):n.removeAttributeNS(b,m)}}function Po(n,s,m){var L=n.elmFs||(n.elmFs={});for(var b in m){var i=m[b],f=L[b];if(!i){n.removeEventListener(b,f),L[b]=void 0;continue}if(f){var l=f.q;if(l.$===i.$){f.q=i;continue}n.removeEventListener(b,f)}f=Io(s,i),n.addEventListener(b,f,yi&&{passive:Li(i)<2}),L[b]=f}}var yi;try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){yi=!0}}))}catch{}function Io(n,s){function m(L){var b=m.q,i=de(b.a,L);if(!!Ee(i)){for(var f=Li(b),l=i.a,d=f?f<3?l.a:l.v:l,p=f==1?l.b:f==3&&l._,_=(p&&L.stopPropagation(),(f==2?l.b:f==3&&l.X)&&L.preventDefault(),n),C,y;C=_.j;){if(typeof C=="function")d=C(d);else for(var y=C.length;y--;)d=C[y](d);_=_.p}_(d,p)}}return m.q=s,m}function Ho(n,s){return n.$==s.$&&Qe(n.a,s.a)}function rn(n,s){var m=[];return ye(n,s,m,0),m}function ce(n,s,m,L){var b={$:s,r:m,s:L,t:void 0,u:void 0};return n.push(b),b}function ye(n,s,m,L){if(n!==s){var b=n.$,i=s.$;if(b!==i)if(b===1&&i===2)s=No(s),i=1;else{ce(m,0,L,s);return}switch(i){case 5:for(var f=n.l,l=s.l,d=f.length,p=d===l.length;p&&d--;)p=f[d]===l[d];if(p){s.k=n.k;return}s.k=s.m();var _=[];ye(n.k,s.k,_,0),_.length>0&&ce(m,1,L,_);return;case 4:for(var C=n.j,y=s.j,a=!1,h=n.k;h.$===4;)a=!0,typeof C!="object"?C=[C,h.j]:C.push(h.j),h=h.k;for(var v=s.k;v.$===4;)a=!0,typeof y!="object"?y=[y,v.j]:y.push(v.j),v=v.k;if(a&&C.length!==y.length){ce(m,0,L,s);return}(a?!$o(C,y):C!==y)&&ce(m,2,L,y),ye(h,v,m,L+1);return;case 0:n.a!==s.a&&ce(m,3,L,s.a);return;case 1:Fi(n,s,m,L,Fo);return;case 2:Fi(n,s,m,L,jo);return;case 3:if(n.h!==s.h){ce(m,0,L,s);return}var o=mi(n.d,s.d);o&&ce(m,4,L,o);var t=s.i(n.g,s.g);t&&ce(m,5,L,t);return}}}function $o(n,s){for(var m=0;m<n.length;m++)if(n[m]!==s[m])return!1;return!0}function Fi(n,s,m,L,b){if(n.c!==s.c||n.f!==s.f){ce(m,0,L,s);return}var i=mi(n.d,s.d);i&&ce(m,4,L,i),b(n,s,m,L)}function mi(n,s,m){var L;for(var b in n){if(b==="a1"||b==="a0"||b==="a3"||b==="a4"){var i=mi(n[b],s[b]||{},b);i&&(L=L||{},L[b]=i);continue}if(!(b in s)){L=L||{},L[b]=m?m==="a1"?"":m==="a0"||m==="a3"?void 0:{f:n[b].f,o:void 0}:typeof n[b]=="string"?"":null;continue}var f=n[b],l=s[b];f===l&&b!=="value"&&b!=="checked"||m==="a0"&&Ho(f,l)||(L=L||{},L[b]=l)}for(var d in s)d in n||(L=L||{},L[d]=s[d]);return L}function Fo(n,s,m,L){var b=n.e,i=s.e,f=b.length,l=i.length;f>l?ce(m,6,L,{v:l,i:f-l}):f<l&&ce(m,7,L,{v:f,e:i});for(var d=f<l?f:l,p=0;p<d;p++){var _=b[p];ye(_,i[p],m,++L),L+=_.b||0}}function jo(n,s,m,L){for(var b=[],i={},f=[],l=n.e,d=s.e,p=l.length,_=d.length,C=0,y=0,a=L;C<p&&y<_;){var h=l[C],v=d[y],o=h.a,t=v.a,e=h.b,r=v.b,c=void 0,u=void 0;if(o===t){a++,ye(e,r,b,a),a+=e.b||0,C++,y++;continue}var g=l[C+1],S=d[y+1];if(g){var M=g.a,A=g.b;u=t===M}if(S){var w=S.a,E=S.b;c=o===w}if(c&&u){a++,ye(e,E,b,a),st(i,b,o,r,y,f),a+=e.b||0,a++,at(i,b,o,A,a),a+=A.b||0,C+=2,y+=2;continue}if(c){a++,st(i,b,t,r,y,f),ye(e,E,b,a),a+=e.b||0,C+=1,y+=2;continue}if(u){a++,at(i,b,o,e,a),a+=e.b||0,a++,ye(A,r,b,a),a+=A.b||0,C+=2,y+=1;continue}if(g&&M===w){a++,at(i,b,o,e,a),st(i,b,t,r,y,f),a+=e.b||0,a++,ye(A,E,b,a),a+=A.b||0,C+=2,y+=2;continue}break}for(;C<p;){a++;var h=l[C],e=h.b;at(i,b,h.a,e,a),a+=e.b||0,C++}for(;y<_;){var O=O||[],v=d[y];st(i,b,v.a,v.b,void 0,O),y++}(b.length>0||f.length>0||O)&&ce(m,8,L,{w:b,x:f,y:O})}var nn="_elmW6BL";function st(n,s,m,L,b,i){var f=n[m];if(!f){f={c:0,z:L,r:b,s:void 0},i.push({r:b,A:f}),n[m]=f;return}if(f.c===1){i.push({r:b,A:f}),f.c=2;var l=[];ye(f.z,L,l,f.r),f.r=b,f.s.s={w:l,A:f};return}st(n,s,m+nn,L,b,i)}function at(n,s,m,L,b){var i=n[m];if(!i){var f=ce(s,9,b,void 0);n[m]={c:1,z:L,r:b,s:f};return}if(i.c===0){i.c=2;var l=[];ye(L,i.z,l,b),ce(s,9,b,{w:l,A:i});return}at(n,s,m+nn,L,b)}function on(n,s,m,L){ct(n,s,m,0,0,s.b,L)}function ct(n,s,m,L,b,i,f){for(var l=m[L],d=l.r;d===b;){var p=l.$;if(p===1)on(n,s.k,l.s,f);else if(p===8){l.t=n,l.u=f;var _=l.s.w;_.length>0&&ct(n,s,_,0,b,i,f)}else if(p===9){l.t=n,l.u=f;var C=l.s;if(C){C.A.s=n;var _=C.w;_.length>0&&ct(n,s,_,0,b,i,f)}}else l.t=n,l.u=f;if(L++,!(l=m[L])||(d=l.r)>i)return L}var y=s.$;if(y===4){for(var a=s.k;a.$===4;)a=a.k;return ct(n,a,m,L,b+1,i,n.elm_event_node_ref)}for(var h=s.e,v=n.childNodes,o=0;o<h.length;o++){b++;var t=y===1?h[o]:h[o].b,e=b+(t.b||0);if(b<=d&&d<=e&&(L=ct(v[o],t,m,L,b,e,f),!(l=m[L])||(d=l.r)>i))return L;b=e}return L}function sn(n,s,m,L){return m.length===0?n:(on(n,s,m,L),gr(n,m))}function gr(n,s){for(var m=0;m<s.length;m++){var L=s[m],b=L.t,i=Wo(b,L);b===n&&(n=i)}return n}function Wo(n,s){switch(s.$){case 0:return Uo(n,s.s,s.u);case 4:return ai(n,s.u,s.s),n;case 3:return n.replaceData(0,n.length,s.s),n;case 1:return gr(n,s.s);case 2:return n.elm_event_node_ref?n.elm_event_node_ref.j=s.s:n.elm_event_node_ref={j:s.s,p:s.u},n;case 6:for(var i=s.s,L=0;L<i.i;L++)n.removeChild(n.childNodes[i.v]);return n;case 7:for(var i=s.s,m=i.e,L=i.v,b=n.childNodes[L];L<m.length;L++)n.insertBefore(Ie(m[L],s.u),b);return n;case 9:var i=s.s;if(!i)return n.parentNode.removeChild(n),n;var f=i.A;return typeof f.r!="undefined"&&n.parentNode.removeChild(n),f.s=gr(n,i.w),n;case 8:return qo(n,s);case 5:return s.s(n);default:Sr(10)}}function Uo(n,s,m){var L=n.parentNode,b=Ie(s,m);return b.elm_event_node_ref||(b.elm_event_node_ref=n.elm_event_node_ref),L&&b!==n&&L.replaceChild(b,n),b}function qo(n,s){var m=s.s,L=zo(m.y,s);n=gr(n,m.w);for(var b=m.x,i=0;i<b.length;i++){var f=b[i],l=f.A,d=l.c===2?l.s:Ie(l.z,s.u);n.insertBefore(d,n.childNodes[f.r])}return L&&vi(n,L),n}function zo(n,s){if(!!n){for(var m=Ke.createDocumentFragment(),L=0;L<n.length;L++){var b=n[L],i=b.A;vi(m,i.c===2?i.s:Ie(i.z,s.u))}return m}}function bi(n){if(n.nodeType===3)return Hi(n.textContent);if(n.nodeType!==1)return Hi("");for(var s=ie,m=n.attributes,L=m.length;L--;){var b=m[L],i=b.name,f=b.value;s=ke(V(ko,i,f),s)}for(var l=n.tagName.toLowerCase(),d=ie,p=n.childNodes,L=p.length;L--;)d=ke(bi(p[L]),d);return te(gi,l,s,d)}function No(n){for(var s=n.e,m=s.length,L=new Array(m),b=0;b<m;b++)L[b]=s[b].b;return{$:1,c:n.c,d:n.d,e:L,f:n.f,b:n.b}}var Vo=Re(function(n,s,m,L){return pi(s,L,n.bd,n.bF,n.bA,function(b,i){var f=n.bG,l=L.node,d=bi(l);return an(i,function(p){var _=f(p),C=rn(d,_);l=sn(l,d,C,b),d=_})})});Re(function(n,s,m,L){return pi(s,L,n.bd,n.bF,n.bA,function(b,i){var f=n.Y&&n.Y(b),l=n.bG,d=Ke.title,p=Ke.body,_=bi(p);return an(i,function(C){vr=f;var y=l(C),a=gi("body")(ie)(y.a_),h=rn(_,a);p=sn(p,_,h,b),_=a,vr=0,d!==y.bE&&(Ke.title=d=y.bE)})})});var yr=typeof requestAnimationFrame!="undefined"?requestAnimationFrame:function(n){return setTimeout(n,1e3/60)};function an(n,s){s(n);var m=0;function L(){m=m===1?0:(yr(L),s(n),1)}return function(b,i){n=b,i?(s(n),m===2&&(m=1)):(m===0&&yr(L),m=2)}}q(function(n,s){return V(Mi,Ei,Be(function(){s&&history.go(s),n()}))});q(function(n,s){return V(Mi,Ei,Be(function(){history.pushState({},"",s),n()}))});q(function(n,s){return V(Mi,Ei,Be(function(){history.replaceState({},"",s),n()}))});var Ko={addEventListener:function(){},removeEventListener:function(){}},Go=typeof window!="undefined"?window:Ko;ee(function(n,s,m){return Zi(Be(function(L){function b(i){_i(m(i))}return n.addEventListener(s,b,yi&&{passive:!0}),function(){n.removeEventListener(s,b)}}))});q(function(n,s){var m=de(n,s);return Ee(m)?Ge(m.a):ue});function cn(n,s){return Be(function(m){yr(function(){var L=document.getElementById(n);m(L?et(s(L)):ho(As(n)))})})}function Jo(n){return Be(function(s){yr(function(){s(et(n()))})})}q(function(n,s){return cn(s,function(m){return m[n](),dt})});q(function(n,s){return Jo(function(){return Go.scroll(n,s),dt})});ee(function(n,s,m){return cn(n,function(L){return L.scrollLeft=s,L.scrollTop=m,dt})});var Xo={N:0},ln=1,Yo=2,hn=0,Ae=In,un=ee(function(n,s,m){e:for(;;){if(m.$===-2)return s;var L=m.b,b=m.c,i=m.d,f=m.e,l=n,d=te(n,L,b,te(un,n,s,f)),p=i;n=l,s=d,m=p;continue e}}),ji=function(n){return te(un,ee(function(s,m,L){return V(Ae,De(s,m),L)}),ie,n)},dr=Un;ee(function(n,s,m){var L=m.c,b=m.d,i=q(function(f,l){if(f.$){var p=f.a;return te(dr,n,l,p)}else{var d=f.a;return te(dr,i,l,d)}});return te(dr,i,te(dr,n,s,b),L)});var Pe=function(n){return{$:1,a:n}},Si=q(function(n,s){return{$:3,a:n,b:s}}),Wi=q(function(n,s){return{$:0,a:n,b:s}}),fn=q(function(n,s){return{$:1,a:n,b:s}}),lt=function(n){return{$:0,a:n}},Zo=function(n){return{$:2,a:n}},Ge=function(n){return{$:0,a:n}},ue={$:1},Qo=Yn,es=co,ci=eo,ht=q(function(n,s){return V(Jn,n,fi(s))}),ts=q(function(n,s){return Oe(V(Gn,n,s))}),_n=function(n){return V(ht,`
    `,V(ts,`
`,n))},Ci=ee(function(n,s,m){e:for(;;)if(m.b){var L=m.a,b=m.b,i=n,f=V(n,L,s),l=b;n=i,s=f,m=l;continue e}else return s}),dn=function(n){return te(Ci,q(function(s,m){return m+1}),0,n)},rs=Hn,is=ee(function(n,s,m){e:for(;;)if(pe(n,s)<1){var L=n,b=s-1,i=V(Ae,s,m);n=L,s=b,m=i;continue e}else return m}),ns=q(function(n,s){return te(is,n,s,ie)}),os=q(function(n,s){return te(rs,n,V(ns,0,dn(s)-1),s)}),wi=ro,pn=function(n){var s=wi(n);return 97<=s&&s<=122},vn=function(n){var s=wi(n);return s<=90&&65<=s},ss=function(n){return pn(n)||vn(n)},as=function(n){var s=wi(n);return s<=57&&48<=s},cs=function(n){return pn(n)||vn(n)||as(n)},He=function(n){return te(Ci,Ae,ie,n)},ls=Vn,hs=q(function(n,s){return`

(`+(ci(n+1)+(") "+_n(us(s))))}),us=function(n){return V(fs,n,ie)},fs=q(function(n,s){e:for(;;)switch(n.$){case 0:var m=n.a,f=n.b,L=function(){var v=ls(m);if(v.$===1)return!1;var o=v.a,t=o.a,e=o.b;return ss(t)&&V(Qo,cs,e)}(),b=L?"."+m:"['"+(m+"']"),d=f,p=V(Ae,b,s);n=d,s=p;continue e;case 1:var i=n.a,f=n.b,l="["+(ci(i)+"]"),d=f,p=V(Ae,l,s);n=d,s=p;continue e;case 2:var _=n.a;if(_.b)if(_.b.b){var C=function(){return s.b?"The Json.Decode.oneOf at json"+V(ht,"",He(s)):"Json.Decode.oneOf"}(),h=C+(" failed in the following "+(ci(dn(_))+" ways:"));return V(ht,`

`,V(Ae,h,V(os,hs,_)))}else{var f=_.a,d=f,p=s;n=d,s=p;continue e}else return"Ran into a Json.Decode.oneOf with no possibilities"+function(){return s.b?" at json"+V(ht,"",He(s)):"!"}();default:var y=n.a,a=n.b,h=function(){return s.b?"Problem with the value at json"+(V(ht,"",He(s))+`:

    `):`Problem with the given value:

`}();return h+(_n(V(es,4,a))+(`

`+y))}}),me=32,li=Re(function(n,s,m,L){return{$:0,a:n,b:s,c:m,d:L}}),hi=$n,gn=zn,yn=q(function(n,s){return xi(s)/xi(n)}),ui=gn(V(yn,2,me)),_s=Me(li,0,ui,hi,hi),mn=jn,ds=function(n){return{$:1,a:n}};q(function(n,s){return n(s)});q(function(n,s){return s(n)});var ps=Nn,Ui=Fn,vs=q(function(n,s){return pe(n,s)>0?n:s}),gs=function(n){return{$:0,a:n}},bn=Wn,ys=q(function(n,s){e:for(;;){var m=V(bn,me,n),L=m.a,b=m.b,i=V(Ae,gs(L),s);if(b.b){var f=b,l=i;n=f,s=l;continue e}else return He(i)}}),ms=q(function(n,s){e:for(;;){var m=gn(s/me);if(m===1)return V(bn,me,n).a;var L=V(ys,n,ie),b=m;n=L,s=b;continue e}}),bs=q(function(n,s){if(s.b){var m=s.b*me,L=ps(V(yn,me,m-1)),b=n?He(s.e):s.e,i=V(ms,b,s.b);return Me(li,Ui(s.d)+m,V(vs,5,L*ui),i,s.d)}else return Me(li,Ui(s.d),ui,hi,s.d)}),Ss=_t(function(n,s,m,L,b){e:for(;;){if(s<0)return V(bs,!1,{e:L,b:m/me|0,d:b});var i=ds(te(mn,me,s,n)),f=n,l=s-me,d=m,p=V(Ae,i,L),_=b;n=f,s=l,m=d,L=p,b=_;continue e}}),Cs=q(function(n,s){if(n<=0)return _s;var m=n%me,L=te(mn,m,n-m,s),b=n-m-me;return ut(Ss,s,b,n,ie,L)}),Ee=function(n){return!n.$},ws=no,Ls=oo,Sn=io,Li=function(n){switch(n.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},Es=function(n){return n},As=Es,qi=br(function(n,s,m,L,b,i){return{al:i,aq:s,ax:L,az:m,aC:n,aD:b}}),Ms=Zn,ks=Kn,Cn=Xn,Cr=q(function(n,s){return n<1?s:te(Cn,n,ks(s),s)}),wr=Qn,Lr=function(n){return n===""},Er=q(function(n,s){return n<1?"":te(Cn,0,n,s)}),Rs=to,zi=_t(function(n,s,m,L,b){if(Lr(b)||V(Ms,"@",b))return ue;var i=V(wr,":",b);if(i.b){if(i.b.b)return ue;var f=i.a,l=Rs(V(Cr,f+1,b));if(l.$===1)return ue;var d=l;return Ge(ni(qi,n,V(Er,f,b),d,s,m,L))}else return Ge(ni(qi,n,b,ue,s,m,L))}),Ni=Re(function(n,s,m,L){if(Lr(L))return ue;var b=V(wr,"/",L);if(b.b){var i=b.a;return ut(zi,n,V(Cr,i,L),s,m,V(Er,i,L))}else return ut(zi,n,"/",s,m,L)}),Vi=ee(function(n,s,m){if(Lr(m))return ue;var L=V(wr,"?",m);if(L.b){var b=L.a;return Me(Ni,n,Ge(V(Cr,b+1,m)),s,V(Er,b,m))}else return Me(Ni,n,ue,s,m)});q(function(n,s){if(Lr(s))return ue;var m=V(wr,"#",s);if(m.b){var L=m.a;return te(Vi,n,Ge(V(Cr,L+1,s)),V(Er,L,s))}else return te(Vi,n,ue,s)});var Ei=function(n){},pt=et,Os=pt(0),wn=Re(function(n,s,m,L){if(L.b){var b=L.a,i=L.b;if(i.b){var f=i.a,l=i.b;if(l.b){var d=l.a,p=l.b;if(p.b){var _=p.a,C=p.b,y=m>500?te(Ci,n,s,He(C)):Me(wn,n,s,m+1,C);return V(n,b,V(n,f,V(n,d,V(n,_,y))))}else return V(n,b,V(n,f,V(n,d,s)))}else return V(n,b,V(n,f,s))}else return V(n,b,s)}else return s}),Ln=ee(function(n,s,m){return Me(wn,n,s,0,m)}),xs=q(function(n,s){return te(Ln,q(function(m,L){return V(Ae,n(m),L)}),ie,s)}),mr=si,Ai=q(function(n,s){return V(mr,function(m){return pt(n(m))},s)}),Ds=ee(function(n,s,m){return V(mr,function(L){return V(mr,function(b){return pt(V(n,L,b))},m)},s)}),Bs=function(n){return te(Ln,Ds(Ae),pt(ie),n)},Ts=mo,Ps=q(function(n,s){var m=s;return Zi(V(mr,Ts(n),m))}),Is=ee(function(n,s,m){return V(Ai,function(L){return 0},Bs(V(xs,Ps(n),s)))}),Hs=ee(function(n,s,m){return pt(0)}),$s=q(function(n,s){var m=s;return V(Ai,n,m)});ft.Task=go(Os,Is,Hs,$s);var Fs=bo("Task"),Mi=q(function(n,s){return Fs(V(Ai,n,s))}),js=en,Ki=js(ie),Ws=en,Us=Ws(ie),qs=function(n){return Vo({bd:function(s){return De(n.bd,Ki)},bA:function(s){return Us},bF:q(function(s,m){return De(V(n.bF,s,m),Ki)}),bG:n.bG})},zs=q(function(n,s){return Tn(s,{N:s.N+1})}),Ns=lo,Vs=q(function(n,s){return V(Mo,n,Ns(s))}),Ks=Vs("className"),Gs=gi("div"),Js=function(n){return V(Gs,Oe([Ks("btn-group")]),ie)},Xs=qs({bd:Xo,bF:zs,bG:Js});const Ys={Main:{init:Xs(Sn(0))(0)}};var En={exports:{}};(function(n,s){(function(m,L){n.exports=L()})(self,function(){return(()=>{var m={4567:function(b,i,f){var l,d=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(r[u]=c[u])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;var p=f(9042),_=f(6114),C=f(9924),y=f(3656),a=f(844),h=f(5596),v=f(9631),o=function(t){function e(r,c){var u=t.call(this)||this;u._terminal=r,u._renderService=c,u._liveRegionLineCount=0,u._charsToConsume=[],u._charsToAnnounce="",u._accessibilityTreeRoot=document.createElement("div"),u._accessibilityTreeRoot.classList.add("xterm-accessibility"),u._accessibilityTreeRoot.tabIndex=0,u._rowContainer=document.createElement("div"),u._rowContainer.setAttribute("role","list"),u._rowContainer.classList.add("xterm-accessibility-tree"),u._rowElements=[];for(var g=0;g<u._terminal.rows;g++)u._rowElements[g]=u._createAccessibilityTreeNode(),u._rowContainer.appendChild(u._rowElements[g]);if(u._topBoundaryFocusListener=function(S){return u._onBoundaryFocus(S,0)},u._bottomBoundaryFocusListener=function(S){return u._onBoundaryFocus(S,1)},u._rowElements[0].addEventListener("focus",u._topBoundaryFocusListener),u._rowElements[u._rowElements.length-1].addEventListener("focus",u._bottomBoundaryFocusListener),u._refreshRowsDimensions(),u._accessibilityTreeRoot.appendChild(u._rowContainer),u._renderRowsDebouncer=new C.TimeBasedDebouncer(u._renderRows.bind(u)),u._refreshRows(),u._liveRegion=document.createElement("div"),u._liveRegion.classList.add("live-region"),u._liveRegion.setAttribute("aria-live","assertive"),u._accessibilityTreeRoot.appendChild(u._liveRegion),!u._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return u._terminal.element.insertAdjacentElement("afterbegin",u._accessibilityTreeRoot),u.register(u._renderRowsDebouncer),u.register(u._terminal.onResize(function(S){return u._onResize(S.rows)})),u.register(u._terminal.onRender(function(S){return u._refreshRows(S.start,S.end)})),u.register(u._terminal.onScroll(function(){return u._refreshRows()})),u.register(u._terminal.onA11yChar(function(S){return u._onChar(S)})),u.register(u._terminal.onLineFeed(function(){return u._onChar(`
`)})),u.register(u._terminal.onA11yTab(function(S){return u._onTab(S)})),u.register(u._terminal.onKey(function(S){return u._onKey(S.key)})),u.register(u._terminal.onBlur(function(){return u._clearLiveRegion()})),u.register(u._renderService.onDimensionsChange(function(){return u._refreshRowsDimensions()})),u._screenDprMonitor=new h.ScreenDprMonitor,u.register(u._screenDprMonitor),u._screenDprMonitor.setListener(function(){return u._refreshRowsDimensions()}),u.register((0,y.addDisposableDomListener)(window,"resize",function(){return u._refreshRowsDimensions()})),u}return d(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),(0,v.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(r,c){var u=r.target,g=this._rowElements[c===0?1:this._rowElements.length-2];if(u.getAttribute("aria-posinset")!==(c===0?"1":""+this._terminal.buffer.lines.length)&&r.relatedTarget===g){var S,M;if(c===0?(S=u,M=this._rowElements.pop(),this._rowContainer.removeChild(M)):(S=this._rowElements.shift(),M=u,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),M.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){var A=this._createAccessibilityTreeNode();this._rowElements.unshift(A),this._rowContainer.insertAdjacentElement("afterbegin",A)}else A=this._createAccessibilityTreeNode(),this._rowElements.push(A),this._rowContainer.appendChild(A);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}},e.prototype._onResize=function(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r},e.prototype._onTab=function(r){for(var c=0;c<r;c++)this._onChar(" ")},e.prototype._onChar=function(r){var c=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){c._accessibilityTreeRoot.appendChild(c._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&(0,v.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(r){this._clearLiveRegion(),this._charsToConsume.push(r)},e.prototype._refreshRows=function(r,c){this._renderRowsDebouncer.refresh(r,c,this._terminal.rows)},e.prototype._renderRows=function(r,c){for(var u=this._terminal.buffer,g=u.lines.length.toString(),S=r;S<=c;S++){var M=u.translateBufferLineToString(u.ydisp+S,!0),A=(u.ydisp+S+1).toString(),w=this._rowElements[S];w&&(M.length===0?w.innerText="\xA0":w.textContent=M,w.setAttribute("aria-posinset",A),w.setAttribute("aria-setsize",g))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}},e.prototype._refreshRowDimensions=function(r){r.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(a.Disposable);i.AccessibilityManager=o},3614:(b,i)=>{function f(_){return _.replace(/\r?\n/g,"\r")}function l(_,C){return C?"\x1B[200~"+_+"\x1B[201~":_}function d(_,C,y){_=l(_=f(_),y.decPrivateModes.bracketedPasteMode),y.triggerDataEvent(_,!0),C.value=""}function p(_,C,y){var a=y.getBoundingClientRect(),h=_.clientX-a.left-10,v=_.clientY-a.top-10;C.style.width="20px",C.style.height="20px",C.style.left=h+"px",C.style.top=v+"px",C.style.zIndex="1000",C.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=f,i.bracketTextForPaste=l,i.copyHandler=function(_,C){_.clipboardData&&_.clipboardData.setData("text/plain",C.selectionText),_.preventDefault()},i.handlePasteEvent=function(_,C,y){_.stopPropagation(),_.clipboardData&&d(_.clipboardData.getData("text/plain"),C,y)},i.paste=d,i.moveTextAreaUnderMouseCursor=p,i.rightClickHandler=function(_,C,y,a,h){p(_,C,y),h&&a.rightClickSelect(_),C.value=a.selectionText,C.select()}},4774:(b,i)=>{var f,l,d,p;function _(y){var a=y.toString(16);return a.length<2?"0"+a:a}function C(y,a){return y<a?(a+.05)/(y+.05):(y+.05)/(a+.05)}Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=void 0,function(y){y.toCss=function(a,h,v,o){return o!==void 0?"#"+_(a)+_(h)+_(v)+_(o):"#"+_(a)+_(h)+_(v)},y.toRgba=function(a,h,v,o){return o===void 0&&(o=255),(a<<24|h<<16|v<<8|o)>>>0}}(f=i.channels||(i.channels={})),(l=i.color||(i.color={})).blend=function(y,a){var h=(255&a.rgba)/255;if(h===1)return{css:a.css,rgba:a.rgba};var v=a.rgba>>24&255,o=a.rgba>>16&255,t=a.rgba>>8&255,e=y.rgba>>24&255,r=y.rgba>>16&255,c=y.rgba>>8&255,u=e+Math.round((v-e)*h),g=r+Math.round((o-r)*h),S=c+Math.round((t-c)*h);return{css:f.toCss(u,g,S),rgba:f.toRgba(u,g,S)}},l.isOpaque=function(y){return(255&y.rgba)==255},l.ensureContrastRatio=function(y,a,h){var v=p.ensureContrastRatio(y.rgba,a.rgba,h);if(v)return p.toColor(v>>24&255,v>>16&255,v>>8&255)},l.opaque=function(y){var a=(255|y.rgba)>>>0,h=p.toChannels(a),v=h[0],o=h[1],t=h[2];return{css:f.toCss(v,o,t),rgba:a}},l.opacity=function(y,a){var h=Math.round(255*a),v=p.toChannels(y.rgba),o=v[0],t=v[1],e=v[2];return{css:f.toCss(o,t,e,h),rgba:f.toRgba(o,t,e,h)}},l.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]},(i.css||(i.css={})).toColor=function(y){switch(y.length){case 7:return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0};case 9:return{css:y,rgba:parseInt(y.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(y){function a(h,v,o){var t=h/255,e=v/255,r=o/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}y.relativeLuminance=function(h){return a(h>>16&255,h>>8&255,255&h)},y.relativeLuminance2=a}(d=i.rgb||(i.rgb={})),function(y){function a(v,o,t){for(var e=v>>24&255,r=v>>16&255,c=v>>8&255,u=o>>24&255,g=o>>16&255,S=o>>8&255,M=C(d.relativeLuminance2(u,S,g),d.relativeLuminance2(e,r,c));M<t&&(u>0||g>0||S>0);)u-=Math.max(0,Math.ceil(.1*u)),g-=Math.max(0,Math.ceil(.1*g)),S-=Math.max(0,Math.ceil(.1*S)),M=C(d.relativeLuminance2(u,S,g),d.relativeLuminance2(e,r,c));return(u<<24|g<<16|S<<8|255)>>>0}function h(v,o,t){for(var e=v>>24&255,r=v>>16&255,c=v>>8&255,u=o>>24&255,g=o>>16&255,S=o>>8&255,M=C(d.relativeLuminance2(u,S,g),d.relativeLuminance2(e,r,c));M<t&&(u<255||g<255||S<255);)u=Math.min(255,u+Math.ceil(.1*(255-u))),g=Math.min(255,g+Math.ceil(.1*(255-g))),S=Math.min(255,S+Math.ceil(.1*(255-S))),M=C(d.relativeLuminance2(u,S,g),d.relativeLuminance2(e,r,c));return(u<<24|g<<16|S<<8|255)>>>0}y.ensureContrastRatio=function(v,o,t){var e=d.relativeLuminance(v>>8),r=d.relativeLuminance(o>>8);if(C(e,r)<t)return r<e?a(v,o,t):h(v,o,t)},y.reduceLuminance=a,y.increaseLuminance=h,y.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},y.toColor=function(v,o,t){return{css:f.toCss(v,o,t),rgba:f.toRgba(v,o,t)}}}(p=i.rgba||(i.rgba={})),i.toPaddedHex=_,i.contrastRatio=C},7239:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;var f=function(){function l(){this._color={},this._rgba={}}return l.prototype.clear=function(){this._color={},this._rgba={}},l.prototype.setCss=function(d,p,_){this._rgba[d]||(this._rgba[d]={}),this._rgba[d][p]=_},l.prototype.getCss=function(d,p){return this._rgba[d]?this._rgba[d][p]:void 0},l.prototype.setColor=function(d,p,_){this._color[d]||(this._color[d]={}),this._color[d][p]=_},l.prototype.getColor=function(d,p){return this._color[d]?this._color[d][p]:void 0},l}();i.ColorContrastCache=f},5680:function(b,i,f){var l=this&&this.__spreadArray||function(o,t,e){if(e||arguments.length===2)for(var r,c=0,u=t.length;c<u;c++)!r&&c in t||(r||(r=Array.prototype.slice.call(t,0,c)),r[c]=t[c]);return o.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(i,"__esModule",{value:!0}),i.ColorManager=i.DEFAULT_ANSI_COLORS=void 0;var d=f(4774),p=f(7239),_=d.css.toColor("#ffffff"),C=d.css.toColor("#000000"),y=d.css.toColor("#ffffff"),a=d.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var o=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],e=0;e<216;e++){var r=t[e/36%6|0],c=t[e/6%6|0],u=t[e%6];o.push({css:d.channels.toCss(r,c,u),rgba:d.channels.toRgba(r,c,u)})}for(e=0;e<24;e++){var g=8+10*e;o.push({css:d.channels.toCss(g,g,g),rgba:d.channels.toRgba(g,g,g)})}return o}());var v=function(){function o(t,e){this.allowTransparency=e;var r=t.createElement("canvas");r.width=1,r.height=1;var c=r.getContext("2d");if(!c)throw new Error("Could not get rendering context");this._ctx=c,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:_,background:C,cursor:y,cursorAccent:a,selectionTransparent:h,selectionOpaque:d.color.blend(C,h),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return o.prototype.onOptionsChange=function(t){t==="minimumContrastRatio"&&this._contrastCache.clear()},o.prototype.setTheme=function(t){t===void 0&&(t={}),this.colors.foreground=this._parseColor(t.foreground,_),this.colors.background=this._parseColor(t.background,C),this.colors.cursor=this._parseColor(t.cursor,y,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,a,!0),this.colors.selectionTransparent=this._parseColor(t.selection,h,!0),this.colors.selectionOpaque=d.color.blend(this.colors.background,this.colors.selectionTransparent),d.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=d.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,i.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,i.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,i.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,i.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,i.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,i.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,i.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,i.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,i.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,i.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,i.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,i.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,i.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,i.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,i.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},o.prototype.restoreColor=function(t){if(t!==void 0)switch(t){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[t]=this._restoreColors.ansi[t]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},o.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:l([],this.colors.ansi,!0)}},o.prototype._parseColor=function(t,e,r){if(r===void 0&&(r=this.allowTransparency),t===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+t+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var c=this._ctx.getImageData(0,0,1,1).data;if(c[3]!==255){if(!r)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var u=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(E){return Number(E)}),g=u[0],S=u[1],M=u[2],A=u[3],w=Math.round(255*A);return{rgba:d.channels.toRgba(g,S,M,w),css:t}}return{css:this._ctx.fillStyle,rgba:d.channels.toRgba(c[0],c[1],c[2],c[3])}},o}();i.ColorManager=v},9631:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeElementFromParent=void 0,i.removeElementFromParent=function(){for(var f,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];for(var p=0,_=l;p<_.length;p++){var C=_[p];(f=C==null?void 0:C.parentElement)===null||f===void 0||f.removeChild(C)}}},3656:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(f,l,d,p){f.addEventListener(l,d,p);var _=!1;return{dispose:function(){_||(_=!0,f.removeEventListener(l,d,p))}}}},3551:function(b,i,f){var l=this&&this.__decorate||function(a,h,v,o){var t,e=arguments.length,r=e<3?h:o===null?o=Object.getOwnPropertyDescriptor(h,v):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,h,v,o);else for(var c=a.length-1;c>=0;c--)(t=a[c])&&(r=(e<3?t(r):e>3?t(h,v,r):t(h,v))||r);return e>3&&r&&Object.defineProperty(h,v,r),r},d=this&&this.__param||function(a,h){return function(v,o){h(v,o,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseZone=i.Linkifier=void 0;var p=f(8460),_=f(2585),C=function(){function a(h,v,o){this._bufferService=h,this._logService=v,this._unicodeService=o,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new p.EventEmitter,this._onHideLinkUnderline=new p.EventEmitter,this._onLinkTooltip=new p.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(a.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),a.prototype.attachToDom=function(h,v){this._element=h,this._mouseZoneManager=v},a.prototype.linkifyRows=function(h,v){var o=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=h,this._rowsToLinkify.end=v):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,h),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,v)),this._mouseZoneManager.clearAll(h,v),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return o._linkifyRows()},a._timeBeforeLatency))},a.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var h=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var v=h.ydisp+this._rowsToLinkify.start;if(!(v>=h.lines.length)){for(var o=h.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,v,o,t,t);e.hasNext();)for(var r=e.next(),c=0;c<this._linkMatchers.length;c++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[c]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},a.prototype.registerLinkMatcher=function(h,v,o){if(o===void 0&&(o={}),!v)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:h,handler:v,matchIndex:o.matchIndex,validationCallback:o.validationCallback,hoverTooltipCallback:o.tooltipCallback,hoverLeaveCallback:o.leaveCallback,willLinkActivate:o.willLinkActivate,priority:o.priority||0};return this._addLinkMatcherToList(t),t.id},a.prototype._addLinkMatcherToList=function(h){if(this._linkMatchers.length!==0){for(var v=this._linkMatchers.length-1;v>=0;v--)if(h.priority<=this._linkMatchers[v].priority)return void this._linkMatchers.splice(v+1,0,h);this._linkMatchers.splice(0,0,h)}else this._linkMatchers.push(h)},a.prototype.deregisterLinkMatcher=function(h){for(var v=0;v<this._linkMatchers.length;v++)if(this._linkMatchers[v].id===h)return this._linkMatchers.splice(v,1),!0;return!1},a.prototype._doLinkifyRow=function(h,v,o){for(var t,e=this,r=new RegExp(o.regex.source,(o.regex.flags||"")+"g"),c=-1,u=function(){var S=t[typeof o.matchIndex!="number"?0:o.matchIndex];if(!S)return g._logService.debug("match found without corresponding matchIndex",t,o),"break";if(c=v.indexOf(S,c+1),r.lastIndex=c+S.length,c<0)return"break";var M=g._bufferService.buffer.stringIndexToBufferIndex(h,c);if(M[0]<0)return"break";var A=g._bufferService.buffer.lines.get(M[0]);if(!A)return"break";var w=A.getFg(M[1]),E=w?w>>9&511:void 0;o.validationCallback?o.validationCallback(S,function(O){e._rowsTimeoutId||O&&e._addLink(M[1],M[0]-e._bufferService.buffer.ydisp,S,o,E)}):g._addLink(M[1],M[0]-g._bufferService.buffer.ydisp,S,o,E)},g=this;(t=r.exec(v))!==null&&u()!=="break";);},a.prototype._addLink=function(h,v,o,t,e){var r=this;if(this._mouseZoneManager&&this._element){var c=this._unicodeService.getStringCellWidth(o),u=h%this._bufferService.cols,g=v+Math.floor(h/this._bufferService.cols),S=(u+c)%this._bufferService.cols,M=g+Math.floor((u+c)/this._bufferService.cols);S===0&&(S=this._bufferService.cols,M--),this._mouseZoneManager.add(new y(u+1,g+1,S+1,M+1,function(A){if(t.handler)return t.handler(A,o);var w=window.open();w?(w.opener=null,w.location.href=o):console.warn("Opening link blocked as opener could not be cleared")},function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(u,g,S,M,e)),r._element.classList.add("xterm-cursor-pointer")},function(A){r._onLinkTooltip.fire(r._createLinkHoverEvent(u,g,S,M,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(A,o,{start:{x:u,y:g},end:{x:S,y:M}})},function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(u,g,S,M,e)),r._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(A){return!t.willLinkActivate||t.willLinkActivate(A,o)}))}},a.prototype._createLinkHoverEvent=function(h,v,o,t,e){return{x1:h,y1:v,x2:o,y2:t,cols:this._bufferService.cols,fg:e}},a._timeBeforeLatency=200,a=l([d(0,_.IBufferService),d(1,_.ILogService),d(2,_.IUnicodeService)],a)}();i.Linkifier=C;var y=function(a,h,v,o,t,e,r,c,u){this.x1=a,this.y1=h,this.x2=v,this.y2=o,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=r,this.leaveCallback=c,this.willLinkActivate=u};i.MouseZone=y},6465:function(b,i,f){var l,d=this&&this.__extends||(l=function(o,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])},l(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}l(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(o,t,e,r){var c,u=arguments.length,g=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,t,e,r);else for(var S=o.length-1;S>=0;S--)(c=o[S])&&(g=(u<3?c(g):u>3?c(t,e,g):c(t,e))||g);return u>3&&g&&Object.defineProperty(t,e,g),g},_=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;var C=f(2585),y=f(8460),a=f(844),h=f(3656),v=function(o){function t(e){var r=o.call(this)||this;return r._bufferService=e,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new y.EventEmitter),r._onHideLinkUnderline=r.register(new y.EventEmitter),r.register((0,a.getDisposeArrayDisposable)(r._linkCacheDisposables)),r}return d(t,o),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var r=this;return this._linkProviders.push(e),{dispose:function(){var c=r._linkProviders.indexOf(e);c!==-1&&r._linkProviders.splice(c,1)}}},t.prototype.attachToDom=function(e,r,c){var u=this;this._element=e,this._mouseService=r,this._renderService=c,this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",function(){u._isMouseOut=!0,u._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(r){this._isMouseOut=!1;for(var c=e.composedPath(),u=0;u<c.length;u++){var g=c[u];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._onHover(r),this._lastBufferCell=r)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,r){var c,u=this;this._activeProviderReplies&&r||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(function(S){S==null||S.forEach(function(M){M.link.dispose&&M.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var g=!1;this._linkProviders.forEach(function(S,M){var A;r?!((A=u._activeProviderReplies)===null||A===void 0)&&A.get(M)&&(g=u._checkLinkProviderResult(M,e,g)):S.provideLinks(e.y,function(w){var E,O;if(!u._isMouseOut){var R=w==null?void 0:w.map(function($){return{link:$}});(E=u._activeProviderReplies)===null||E===void 0||E.set(M,R),g=u._checkLinkProviderResult(M,e,g),((O=u._activeProviderReplies)===null||O===void 0?void 0:O.size)===u._linkProviders.length&&u._removeIntersectingLinks(e.y,u._activeProviderReplies)}})})},t.prototype._removeIntersectingLinks=function(e,r){for(var c=new Set,u=0;u<r.size;u++){var g=r.get(u);if(g)for(var S=0;S<g.length;S++)for(var M=g[S],A=M.link.range.start.y<e?0:M.link.range.start.x,w=M.link.range.end.y>e?this._bufferService.cols:M.link.range.end.x,E=A;E<=w;E++){if(c.has(E)){g.splice(S--,1);break}c.add(E)}}},t.prototype._checkLinkProviderResult=function(e,r,c){var u,g=this;if(!this._activeProviderReplies)return c;for(var S=this._activeProviderReplies.get(e),M=!1,A=0;A<e;A++)this._activeProviderReplies.has(A)&&!this._activeProviderReplies.get(A)||(M=!0);if(!M&&S){var w=S.find(function(O){return g._linkAtPosition(O.link,r)});w&&(c=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(A=0;A<this._activeProviderReplies.size;A++){var E=(u=this._activeProviderReplies.get(A))===null||u===void 0?void 0:u.find(function(O){return g._linkAtPosition(O.link,r)});if(E){c=!0,this._handleNewLink(E);break}}return c},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var r=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(e.link,c)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var u,g;return(g=(u=r._currentLink)===null||u===void 0?void 0:u.state)===null||g===void 0?void 0:g.decorations.pointerCursor},set:function(u){var g,S;((g=r._currentLink)===null||g===void 0?void 0:g.state)&&r._currentLink.state.decorations.pointerCursor!==u&&(r._currentLink.state.decorations.pointerCursor=u,r._currentLink.state.isHovered&&((S=r._element)===null||S===void 0||S.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:function(){var u,g;return(g=(u=r._currentLink)===null||u===void 0?void 0:u.state)===null||g===void 0?void 0:g.decorations.underline},set:function(u){var g,S,M;((g=r._currentLink)===null||g===void 0?void 0:g.state)&&((M=(S=r._currentLink)===null||S===void 0?void 0:S.state)===null||M===void 0?void 0:M.decorations.underline)!==u&&(r._currentLink.state.decorations.underline=u,r._currentLink.state.isHovered&&r._fireUnderlineEvent(e.link,u))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(u){var g=u.start===0?0:u.start+1+r._bufferService.buffer.ydisp;r._clearCurrentLink(g,u.end+1+r._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,r,c){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(c,r.text)},t.prototype._fireUnderlineEvent=function(e,r){var c=e.range,u=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-u-1,c.end.x,c.end.y-u-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)},t.prototype._linkLeave=function(e,r,c){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(c,r.text)},t.prototype._linkAtPosition=function(e,r){var c=e.range.start.y===e.range.end.y,u=e.range.start.y<r.y,g=e.range.end.y>r.y;return(c&&e.range.start.x<=r.x&&e.range.end.x>=r.x||u&&e.range.end.x>=r.x||g&&e.range.start.x<=r.x||u&&g)&&e.range.start.y<=r.y&&e.range.end.y>=r.y},t.prototype._positionFromMouseEvent=function(e,r,c){var u=c.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,r,c,u,g){return{x1:e,y1:r,x2:c,y2:u,cols:this._bufferService.cols,fg:g}},p([_(0,C.IBufferService)],t)}(a.Disposable);i.Linkifier2=v},9042:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(b,i,f){var l,d=this&&this.__extends||(l=function(o,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])},l(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}l(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(o,t,e,r){var c,u=arguments.length,g=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,t,e,r);else for(var S=o.length-1;S>=0;S--)(c=o[S])&&(g=(u<3?c(g):u>3?c(t,e,g):c(t,e))||g);return u>3&&g&&Object.defineProperty(t,e,g),g},_=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseZoneManager=void 0;var C=f(844),y=f(3656),a=f(4725),h=f(2585),v=function(o){function t(e,r,c,u,g,S){var M=o.call(this)||this;return M._element=e,M._screenElement=r,M._bufferService=c,M._mouseService=u,M._selectionService=g,M._optionsService=S,M._zones=[],M._areZonesActive=!1,M._lastHoverCoords=[void 0,void 0],M._initialSelectionLength=0,M.register((0,y.addDisposableDomListener)(M._element,"mousedown",function(A){return M._onMouseDown(A)})),M._mouseMoveListener=function(A){return M._onMouseMove(A)},M._mouseLeaveListener=function(A){return M._onMouseLeave(A)},M._clickListener=function(A){return M._onClick(A)},M}return d(t,o),t.prototype.dispose=function(){o.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},t.prototype.clearAll=function(e,r){if(this._zones.length!==0){e&&r||(e=0,r=this._bufferService.rows-1);for(var c=0;c<this._zones.length;c++){var u=this._zones[c];(u.y1>e&&u.y1<=r+1||u.y2>e&&u.y2<=r+1||u.y1<e&&u.y2>r+1)&&(this._currentZone&&this._currentZone===u&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(c--,1))}this._zones.length===0&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var r=this,c=this._findZoneEventAt(e);c!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),c&&(this._currentZone=c,c.hoverCallback&&c.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return r._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var r=this._findZoneEventAt(e);r==null||r.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var r=this._findZoneEventAt(e);r!=null&&r.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var r=this._findZoneEventAt(e),c=this._getSelectionLength();r&&c===this._initialSelectionLength&&(r.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var r=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(r)for(var c=r[0],u=r[1],g=0;g<this._zones.length;g++){var S=this._zones[g];if(S.y1===S.y2){if(u===S.y1&&c>=S.x1&&c<S.x2)return S}else if(u===S.y1&&c>=S.x1||u===S.y2&&c<S.x2||u>S.y1&&u<S.y2)return S}},p([_(2,h.IBufferService),_(3,a.IMouseService),_(4,a.ISelectionService),_(5,h.IOptionsService)],t)}(C.Disposable);i.MouseZoneManager=v},6193:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0;var f=function(){function l(d){this._renderCallback=d}return l.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.refresh=function(d,p,_){var C=this;this._rowCount=_,d=d!==void 0?d:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return C._innerRefresh()}))},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var d=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(d,p)}},l}();i.RenderDebouncer=f},5596:function(b,i,f){var l,d=this&&this.__extends||(l=function(_,C){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,a){y.__proto__=a}||function(y,a){for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(y[h]=a[h])},l(_,C)},function(_,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function y(){this.constructor=_}l(_,C),_.prototype=C===null?Object.create(C):(y.prototype=C.prototype,new y)});Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;var p=function(_){function C(){var y=_!==null&&_.apply(this,arguments)||this;return y._currentDevicePixelRatio=window.devicePixelRatio,y}return d(C,_),C.prototype.setListener=function(y){var a=this;this._listener&&this.clearListener(),this._listener=y,this._outerListener=function(){a._listener&&(a._listener(window.devicePixelRatio,a._currentDevicePixelRatio),a._updateDpr())},this._updateDpr()},C.prototype.dispose=function(){_.prototype.dispose.call(this),this.clearListener()},C.prototype._updateDpr=function(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)===null||y===void 0||y.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},C.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},C}(f(844).Disposable);i.ScreenDprMonitor=p},3236:function(b,i,f){var l,d=this&&this.__extends||(l=function(D,U){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(P[T]=I[T])},l(D,U)},function(D,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function P(){this.constructor=D}l(D,U),D.prototype=U===null?Object.create(U):(P.prototype=U.prototype,new P)});Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;var p=f(2950),_=f(1680),C=f(3614),y=f(2584),a=f(5435),h=f(3525),v=f(3551),o=f(9312),t=f(6114),e=f(3656),r=f(9042),c=f(357),u=f(6954),g=f(4567),S=f(1296),M=f(7399),A=f(8460),w=f(8437),E=f(5680),O=f(3230),R=f(4725),$=f(428),B=f(8934),k=f(6465),x=f(5114),H=f(8969),F=f(4774),z=f(4269),N=f(5941),Z=f(7641),X=typeof window!="undefined"?window.document:null,Q=function(D){function U(P){P===void 0&&(P={});var I=D.call(this,P)||this;return I.browser=t,I._keyDownHandled=!1,I._keyPressHandled=!1,I._unprocessedDeadKey=!1,I._onCursorMove=new A.EventEmitter,I._onKey=new A.EventEmitter,I._onRender=new A.EventEmitter,I._onSelectionChange=new A.EventEmitter,I._onTitleChange=new A.EventEmitter,I._onBell=new A.EventEmitter,I._onFocus=new A.EventEmitter,I._onBlur=new A.EventEmitter,I._onA11yCharEmitter=new A.EventEmitter,I._onA11yTabEmitter=new A.EventEmitter,I._setup(),I.linkifier=I._instantiationService.createInstance(v.Linkifier),I.linkifier2=I.register(I._instantiationService.createInstance(k.Linkifier2)),I.decorationService=I.register(I._instantiationService.createInstance(Z.DecorationService)),I.register(I._inputHandler.onRequestBell(function(){return I.bell()})),I.register(I._inputHandler.onRequestRefreshRows(function(T,G){return I.refresh(T,G)})),I.register(I._inputHandler.onRequestSendFocus(function(){return I._reportFocus()})),I.register(I._inputHandler.onRequestReset(function(){return I.reset()})),I.register(I._inputHandler.onRequestWindowsOptionsReport(function(T){return I._reportWindowsOptions(T)})),I.register(I._inputHandler.onColor(function(T){return I._handleColorEvent(T)})),I.register((0,A.forwardEvent)(I._inputHandler.onCursorMove,I._onCursorMove)),I.register((0,A.forwardEvent)(I._inputHandler.onTitleChange,I._onTitleChange)),I.register((0,A.forwardEvent)(I._inputHandler.onA11yChar,I._onA11yCharEmitter)),I.register((0,A.forwardEvent)(I._inputHandler.onA11yTab,I._onA11yTabEmitter)),I.register(I._bufferService.onResize(function(T){return I._afterResize(T.cols,T.rows)})),I}return d(U,D),Object.defineProperty(U.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),U.prototype._handleColorEvent=function(P){var I,T;if(this._colorManager){for(var G=0,J=P;G<J.length;G++){var Y=J[G],re=void 0,ne="";switch(Y.index){case 256:re="foreground",ne="10";break;case 257:re="background",ne="11";break;case 258:re="cursor",ne="12";break;default:re="ansi",ne="4;"+Y.index}if(re)switch(Y.type){case 0:var ve=F.color.toColorRGB(re==="ansi"?this._colorManager.colors.ansi[Y.index]:this._colorManager.colors[re]);this.coreService.triggerDataEvent(y.C0.ESC+"]"+ne+";"+(0,N.toRgbString)(ve)+y.C0.BEL);break;case 1:re==="ansi"?this._colorManager.colors.ansi[Y.index]=F.rgba.toColor.apply(F.rgba,Y.color):this._colorManager.colors[re]=F.rgba.toColor.apply(F.rgba,Y.color);break;case 2:this._colorManager.restoreColor(Y.index)}}(I=this._renderService)===null||I===void 0||I.setColors(this._colorManager.colors),(T=this.viewport)===null||T===void 0||T.onThemeChange(this._colorManager.colors)}},U.prototype.dispose=function(){var P,I,T;this._isDisposed||(D.prototype.dispose.call(this),(P=this._renderService)===null||P===void 0||P.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(T=(I=this.element)===null||I===void 0?void 0:I.parentNode)===null||T===void 0||T.removeChild(this.element))},U.prototype._setup=function(){D.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(U.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),U.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},U.prototype._updateOptions=function(P){var I,T,G,J;switch(D.prototype._updateOptions.call(this,P),P){case"fontFamily":case"fontSize":(I=this._renderService)===null||I===void 0||I.clear(),(T=this._charSizeService)===null||T===void 0||T.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(G=this.viewport)===null||G===void 0||G.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)):((J=this._accessibilityManager)===null||J===void 0||J.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},U.prototype._onTextAreaFocus=function(P){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(y.C0.ESC+"[I"),this.updateCursorStyle(P),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},U.prototype.blur=function(){var P;return(P=this.textarea)===null||P===void 0?void 0:P.blur()},U.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},U.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var P=this.buffer.ybase+this.buffer.y,I=this.buffer.lines.get(P);if(I){var T=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.actualCellHeight,J=I.getWidth(T),Y=this._renderService.dimensions.actualCellWidth*J,re=this.buffer.y*this._renderService.dimensions.actualCellHeight,ne=T*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=ne+"px",this.textarea.style.top=re+"px",this.textarea.style.width=Y+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}}},U.prototype._initGlobal=function(){var P=this;this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",function(T){P.hasSelection()&&(0,C.copyHandler)(T,P._selectionService)}));var I=function(T){return(0,C.handlePasteEvent)(T,P.textarea,P.coreService)};this.register((0,e.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,e.addDisposableDomListener)(this.element,"paste",I)),t.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(T){T.button===2&&(0,C.rightClickHandler)(T,P.textarea,P.screenElement,P._selectionService,P.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",function(T){(0,C.rightClickHandler)(T,P.textarea,P.screenElement,P._selectionService,P.options.rightClickSelectsWord)})),t.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",function(T){T.button===1&&(0,C.moveTextAreaUnderMouseCursor)(T,P.textarea,P.screenElement)}))},U.prototype._bindKeys=function(){var P=this;this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",function(I){return P._keyUp(I)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",function(I){return P._keyDown(I)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",function(I){return P._keyPress(I)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",function(){return P._compositionHelper.compositionstart()})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",function(I){return P._compositionHelper.compositionupdate(I)})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",function(){return P._compositionHelper.compositionend()})),this.register((0,e.addDisposableDomListener)(this.textarea,"input",function(I){return P._inputEvent(I)},!0)),this.register(this.onRender(function(){return P._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(I){return P._queueLinkification(I.start,I.end)}))},U.prototype.open=function(P){var I=this;if(!P)throw new Error("Terminal requires a parent element.");P.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=P.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),P.appendChild(this.element);var T=X.createDocumentFragment();this._viewportElement=X.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),T.appendChild(this._viewportElement),this._viewportScrollArea=X.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=X.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=X.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),T.appendChild(this.screenElement),this.textarea=X.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",r.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,e.addDisposableDomListener)(this.textarea,"focus",function(Y){return I._onTextAreaFocus(Y)})),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",function(){return I._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var G=this._instantiationService.createInstance(x.CoreBrowserService,this.textarea);this._instantiationService.setService(R.ICoreBrowserService,G),this._charSizeService=this._instantiationService.createInstance($.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(R.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new E.ColorManager(X,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Y){return I._colorManager.onOptionsChange(Y)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(z.CharacterJoinerService),this._instantiationService.setService(R.ICharacterJoinerService,this._characterJoinerService);var J=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(O.RenderService,J,this.rows,this.screenElement)),this._instantiationService.setService(R.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Y){return I._onRender.fire(Y)})),this.onResize(function(Y){return I._renderService.resize(Y.cols,Y.rows)}),this._compositionView=X.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(T),this._soundService=this._instantiationService.createInstance(c.SoundService),this._instantiationService.setService(R.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(B.MouseService),this._instantiationService.setService(R.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(_.Viewport,function(Y){return I.scrollLines(Y,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return I.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){I._renderService.onCursorMove(),I._syncTextArea()})),this.register(this.onResize(function(){return I._renderService.onResize(I.cols,I.rows)})),this.register(this.onBlur(function(){return I._renderService.onBlur()})),this.register(this.onFocus(function(){return I._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return I.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(o.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(R.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Y){return I.scrollLines(Y.amount,Y.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return I._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Y){return I._renderService.onSelectionChanged(Y.start,Y.end,Y.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Y){I.textarea.value=Y,I.textarea.focus(),I.textarea.select()})),this.register(this._onScroll.event(function(Y){I.viewport.syncScrollArea(),I._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",function(){return I._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(u.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return I._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.decorationService.attachToDom(this.screenElement,this._renderService,this._bufferService),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(Y){return I._selectionService.onMouseDown(Y)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new g.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},U.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(h.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(S.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},U.prototype._setTheme=function(P){var I,T,G;this._theme=P,(I=this._colorManager)===null||I===void 0||I.setTheme(P),(T=this._renderService)===null||T===void 0||T.setColors(this._colorManager.colors),(G=this.viewport)===null||G===void 0||G.onThemeChange(this._colorManager.colors)},U.prototype.bindMouse=function(){var P=this,I=this,T=this.element;function G(K){var ae,fe,be=I._mouseService.getRawByteCoords(K,I.screenElement,I.cols,I.rows);if(!be)return!1;switch(K.overrideType||K.type){case"mousemove":fe=32,K.buttons===void 0?(ae=3,K.button!==void 0&&(ae=K.button<3?K.button:3)):ae=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":fe=0,ae=K.button<3?K.button:3;break;case"mousedown":fe=1,ae=K.button<3?K.button:3;break;case"wheel":K.deltaY!==0&&(fe=K.deltaY<0?0:1),ae=4;break;default:return!1}return!(fe===void 0||ae===void 0||ae>4)&&I.coreMouseService.triggerMouseEvent({col:be.x-33,row:be.y-33,button:ae,action:fe,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}var J={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y=function(K){return G(K),K.buttons||(P._document.removeEventListener("mouseup",J.mouseup),J.mousedrag&&P._document.removeEventListener("mousemove",J.mousedrag)),P.cancel(K)},re=function(K){return G(K),P.cancel(K,!0)},ne=function(K){K.buttons&&G(K)},ve=function(K){K.buttons||G(K)};this.register(this.coreMouseService.onProtocolChange(function(K){K?(P.optionsService.rawOptions.logLevel==="debug"&&P._logService.debug("Binding to mouse events:",P.coreMouseService.explainEvents(K)),P.element.classList.add("enable-mouse-events"),P._selectionService.disable()):(P._logService.debug("Unbinding from mouse events."),P.element.classList.remove("enable-mouse-events"),P._selectionService.enable()),8&K?J.mousemove||(T.addEventListener("mousemove",ve),J.mousemove=ve):(T.removeEventListener("mousemove",J.mousemove),J.mousemove=null),16&K?J.wheel||(T.addEventListener("wheel",re,{passive:!1}),J.wheel=re):(T.removeEventListener("wheel",J.wheel),J.wheel=null),2&K?J.mouseup||(J.mouseup=Y):(P._document.removeEventListener("mouseup",J.mouseup),J.mouseup=null),4&K?J.mousedrag||(J.mousedrag=ne):(P._document.removeEventListener("mousemove",J.mousedrag),J.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(T,"mousedown",function(K){if(K.preventDefault(),P.focus(),P.coreMouseService.areMouseEventsActive&&!P._selectionService.shouldForceSelection(K))return G(K),J.mouseup&&P._document.addEventListener("mouseup",J.mouseup),J.mousedrag&&P._document.addEventListener("mousemove",J.mousedrag),P.cancel(K)})),this.register((0,e.addDisposableDomListener)(T,"wheel",function(K){if(!J.wheel){if(!P.buffer.hasScrollback){var ae=P.viewport.getLinesScrolled(K);if(ae===0)return;for(var fe=y.C0.ESC+(P.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B"),be="",Je=0;Je<Math.abs(ae);Je++)be+=fe;return P.coreService.triggerDataEvent(be,!0),P.cancel(K,!0)}return P.viewport.onWheel(K)?P.cancel(K):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(T,"touchstart",function(K){if(!P.coreMouseService.areMouseEventsActive)return P.viewport.onTouchStart(K),P.cancel(K)},{passive:!0})),this.register((0,e.addDisposableDomListener)(T,"touchmove",function(K){if(!P.coreMouseService.areMouseEventsActive)return P.viewport.onTouchMove(K)?void 0:P.cancel(K)},{passive:!1}))},U.prototype.refresh=function(P,I){var T;(T=this._renderService)===null||T===void 0||T.refreshRows(P,I)},U.prototype._queueLinkification=function(P,I){var T;(T=this.linkifier)===null||T===void 0||T.linkifyRows(P,I)},U.prototype.updateCursorStyle=function(P){var I;!((I=this._selectionService)===null||I===void 0)&&I.shouldColumnSelect(P)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},U.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},U.prototype.scrollLines=function(P,I,T){T===void 0&&(T=0),D.prototype.scrollLines.call(this,P,I,T),this.refresh(0,this.rows-1)},U.prototype.paste=function(P){(0,C.paste)(P,this.textarea,this.coreService)},U.prototype.attachCustomKeyEventHandler=function(P){this._customKeyEventHandler=P},U.prototype.registerLinkMatcher=function(P,I,T){var G=this.linkifier.registerLinkMatcher(P,I,T);return this.refresh(0,this.rows-1),G},U.prototype.deregisterLinkMatcher=function(P){this.linkifier.deregisterLinkMatcher(P)&&this.refresh(0,this.rows-1)},U.prototype.registerLinkProvider=function(P){return this.linkifier2.registerLinkProvider(P)},U.prototype.registerCharacterJoiner=function(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var I=this._characterJoinerService.register(P);return this.refresh(0,this.rows-1),I},U.prototype.deregisterCharacterJoiner=function(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(P)&&this.refresh(0,this.rows-1)},Object.defineProperty(U.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),U.prototype.addMarker=function(P){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+P)},U.prototype.registerDecoration=function(P){return this.decorationService.registerDecoration(P)},U.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},U.prototype.select=function(P,I,T){this._selectionService.setSelection(P,I,T)},U.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},U.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},U.prototype.clearSelection=function(){var P;(P=this._selectionService)===null||P===void 0||P.clearSelection()},U.prototype.selectAll=function(){var P;(P=this._selectionService)===null||P===void 0||P.selectAll()},U.prototype.selectLines=function(P,I){var T;(T=this._selectionService)===null||T===void 0||T.selectLines(P,I)},U.prototype._keyDown=function(P){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;if(!this._compositionHelper.keydown(P))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;P.key!=="Dead"&&P.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var I=(0,M.evaluateKeyboardEvent)(P,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(P),I.type===3||I.type===2){var T=this.rows-1;return this.scrollLines(I.type===2?-T:T),this.cancel(P,!0)}return I.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,P)||(I.cancel&&this.cancel(P,!0),!I.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(I.key!==y.C0.ETX&&I.key!==y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:I.key,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(I.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(P,!0))))},U.prototype._isThirdLevelShift=function(P,I){var T=P.isMac&&!this.options.macOptionIsMeta&&I.altKey&&!I.ctrlKey&&!I.metaKey||P.isWindows&&I.altKey&&I.ctrlKey&&!I.metaKey||P.isWindows&&I.getModifierState("AltGraph");return I.type==="keypress"?T:T&&(!I.keyCode||I.keyCode>47)},U.prototype._keyUp=function(P){this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1||(function(I){return I.keyCode===16||I.keyCode===17||I.keyCode===18}(P)||this.focus(),this.updateCursorStyle(P),this._keyPressHandled=!1)},U.prototype._keyPress=function(P){var I;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;if(this.cancel(P),P.charCode)I=P.charCode;else if(P.which===null||P.which===void 0)I=P.keyCode;else{if(P.which===0||P.charCode===0)return!1;I=P.which}return!(!I||(P.altKey||P.ctrlKey||P.metaKey)&&!this._isThirdLevelShift(this.browser,P)||(I=String.fromCharCode(I),this._onKey.fire({key:I,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(I,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},U.prototype._inputEvent=function(P){if(P.data&&P.inputType==="insertText"&&!P.composed&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var I=P.data;return this.coreService.triggerDataEvent(I,!0),this.cancel(P),!0}return!1},U.prototype.bell=function(){var P;this._soundBell()&&((P=this._soundService)===null||P===void 0||P.playBellSound()),this._onBell.fire()},U.prototype.resize=function(P,I){P!==this.cols||I!==this.rows?D.prototype.resize.call(this,P,I):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},U.prototype._afterResize=function(P,I){var T,G;(T=this._charSizeService)===null||T===void 0||T.measure(),(G=this.viewport)===null||G===void 0||G.syncScrollArea(!0)},U.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var P=1;P<this.rows;P++)this.buffer.lines.push(this.buffer.getBlankLine(w.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},U.prototype.reset=function(){var P,I;this.options.rows=this.rows,this.options.cols=this.cols;var T=this._customKeyEventHandler;this._setup(),D.prototype.reset.call(this),(P=this._selectionService)===null||P===void 0||P.reset(),this._customKeyEventHandler=T,this.refresh(0,this.rows-1),(I=this.viewport)===null||I===void 0||I.syncScrollArea()},U.prototype.clearTextureAtlas=function(){var P;(P=this._renderService)===null||P===void 0||P.clearTextureAtlas()},U.prototype._reportFocus=function(){var P;!((P=this.element)===null||P===void 0)&&P.classList.contains("focus")?this.coreService.triggerDataEvent(y.C0.ESC+"[I"):this.coreService.triggerDataEvent(y.C0.ESC+"[O")},U.prototype._reportWindowsOptions=function(P){if(this._renderService)switch(P){case a.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var I=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),T=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(y.C0.ESC+"[4;"+T+";"+I+"t");break;case a.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var G=this._renderService.dimensions.scaledCellWidth.toFixed(0),J=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(y.C0.ESC+"[6;"+J+";"+G+"t")}},U.prototype.cancel=function(P,I){if(this.options.cancelEvents||I)return P.preventDefault(),P.stopPropagation(),!1},U.prototype._visualBell=function(){return!1},U.prototype._soundBell=function(){return this.options.bellStyle==="sound"},U}(H.CoreTerminal);i.Terminal=Q},9924:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0;var f=function(){function l(d,p){p===void 0&&(p=1e3),this._renderCallback=d,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return l.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},l.prototype.refresh=function(d,p,_){var C=this;this._rowCount=_,d=d!==void 0?d:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;var y=Date.now();if(y-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=y,this._innerRefresh();else if(!this._additionalRefreshRequested){var a=y-this._lastRefreshMs,h=this._debounceThresholdMS-a;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){C._lastRefreshMs=Date.now(),C._innerRefresh(),C._additionalRefreshRequested=!1,C._refreshTimeoutID=void 0},h)}},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var d=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,p)}},l}();i.TimeBasedDebouncer=f},1680:function(b,i,f){var l,d=this&&this.__extends||(l=function(o,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])},l(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}l(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(o,t,e,r){var c,u=arguments.length,g=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,t,e,r);else for(var S=o.length-1;S>=0;S--)(c=o[S])&&(g=(u<3?c(g):u>3?c(t,e,g):c(t,e))||g);return u>3&&g&&Object.defineProperty(t,e,g),g},_=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;var C=f(844),y=f(3656),a=f(4725),h=f(2585),v=function(o){function t(e,r,c,u,g,S,M,A){var w=o.call(this)||this;return w._scrollLines=e,w._viewportElement=r,w._scrollArea=c,w._element=u,w._bufferService=g,w._optionsService=S,w._charSizeService=M,w._renderService=A,w.scrollBarWidth=0,w._currentRowHeight=0,w._currentScaledCellHeight=0,w._lastRecordedBufferLength=0,w._lastRecordedViewportHeight=0,w._lastRecordedBufferHeight=0,w._lastTouchY=0,w._lastScrollTop=0,w._lastHadScrollBar=!1,w._wheelPartialScroll=0,w._refreshAnimationFrame=null,w._ignoreNextScrollEvent=!1,w.scrollBarWidth=w._viewportElement.offsetWidth-w._scrollArea.offsetWidth||15,w._lastHadScrollBar=!0,w.register((0,y.addDisposableDomListener)(w._viewportElement,"scroll",w._onScroll.bind(w))),w._activeBuffer=w._bufferService.buffer,w.register(w._bufferService.buffers.onBufferActivate(function(E){return w._activeBuffer=E.activeBuffer})),w._renderDimensions=w._renderService.dimensions,w.register(w._renderService.onDimensionsChange(function(E){return w._renderDimensions=E})),setTimeout(function(){return w.syncScrollArea()},0),w}return d(t,o),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var r=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return r._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._optionsService.rawOptions.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var c=window.getComputedStyle(this._element),u=parseInt(c.paddingLeft)+parseInt(c.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?u:0)).toString()+"px",this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.rawOptions.scrollback>0&&this._refresh(e):this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(r)}},t.prototype._bubbleScroll=function(e,r){var c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&c<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var r=this._getPixelsScrolled(e);return r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},t.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r},t.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r},t.prototype._applyScrollModifier=function(e,r){var c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&r.altKey||c==="ctrl"&&r.ctrlKey||c==="shift"&&r.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var r=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},p([_(4,h.IBufferService),_(5,h.IOptionsService),_(6,a.ICharSizeService),_(7,a.IRenderService)],t)}(C.Disposable);i.Viewport=v},2950:function(b,i,f){var l=this&&this.__decorate||function(y,a,h,v){var o,t=arguments.length,e=t<3?a:v===null?v=Object.getOwnPropertyDescriptor(a,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(y,a,h,v);else for(var r=y.length-1;r>=0;r--)(o=y[r])&&(e=(t<3?o(e):t>3?o(a,h,e):o(a,h))||e);return t>3&&e&&Object.defineProperty(a,h,e),e},d=this&&this.__param||function(y,a){return function(h,v){a(h,v,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;var p=f(4725),_=f(2585),C=function(){function y(a,h,v,o,t,e){this._textarea=a,this._compositionView=h,this._bufferService=v,this._optionsService=o,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(y.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),y.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},y.prototype.compositionupdate=function(a){var h=this;this._compositionView.textContent=a.data,this.updateCompositionElements(),setTimeout(function(){h._compositionPosition.end=h._textarea.value.length},0)},y.prototype.compositionend=function(){this._finalizeComposition(!0)},y.prototype.keydown=function(a){if(this._isComposing||this._isSendingComposition){if(a.keyCode===229||a.keyCode===16||a.keyCode===17||a.keyCode===18)return!1;this._finalizeComposition(!1)}return a.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},y.prototype._finalizeComposition=function(a){var h=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,a){var v={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(h._isSendingComposition){h._isSendingComposition=!1;var t;v.start+=h._dataAlreadySent.length,(t=h._isComposing?h._textarea.value.substring(v.start,v.end):h._textarea.value.substring(v.start)).length>0&&h._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;var o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}},y.prototype._handleAnyTextareaChanges=function(){var a=this,h=this._textarea.value;setTimeout(function(){if(!a._isComposing){var v=a._textarea.value.replace(h,"");v.length>0&&(a._dataAlreadySent=v,a._coreService.triggerDataEvent(v,!0))}},0)},y.prototype.updateCompositionElements=function(a){var h=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var v=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=v*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}a||setTimeout(function(){return h.updateCompositionElements(!0)},0)}},l([d(2,_.IBufferService),d(3,_.IOptionsService),d(4,_.ICoreService),d(5,p.IRenderService)],y)}();i.CompositionHelper=C},9806:(b,i)=>{function f(l,d){var p=d.getBoundingClientRect();return[l.clientX-p.left,l.clientY-p.top]}Object.defineProperty(i,"__esModule",{value:!0}),i.getRawByteCoords=i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=f,i.getCoords=function(l,d,p,_,C,y,a,h){if(C){var v=f(l,d);if(v)return v[0]=Math.ceil((v[0]+(h?y/2:0))/y),v[1]=Math.ceil(v[1]/a),v[0]=Math.min(Math.max(v[0],1),p+(h?1:0)),v[1]=Math.min(Math.max(v[1],1),_),v}},i.getRawByteCoords=function(l){if(l)return{x:l[0]+32,y:l[1]+32}}},9504:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;var l=f(2584);function d(h,v,o,t){var e=h-p(o,h),r=v-p(o,v),c=Math.abs(e-r)-function(u,g,S){for(var M=0,A=u-p(S,u),w=g-p(S,g),E=0;E<Math.abs(A-w);E++){var O=_(u,g)==="A"?-1:1,R=S.buffer.lines.get(A+O*E);R!=null&&R.isWrapped&&M++}return M}(h,v,o);return a(c,y(_(h,v),t))}function p(h,v){for(var o=0,t=h.buffer.lines.get(v),e=t==null?void 0:t.isWrapped;e&&v>=0&&v<h.rows;)o++,e=(t=h.buffer.lines.get(--v))==null?void 0:t.isWrapped;return o}function _(h,v){return h>v?"A":"B"}function C(h,v,o,t,e,r){for(var c=h,u=v,g="";c!==o||u!==t;)c+=e?1:-1,e&&c>r.cols-1?(g+=r.buffer.translateBufferLineToString(u,!1,h,c),c=0,h=0,u++):!e&&c<0&&(g+=r.buffer.translateBufferLineToString(u,!1,0,h+1),h=c=r.cols-1,u--);return g+r.buffer.translateBufferLineToString(u,!1,h,c)}function y(h,v){var o=v?"O":"[";return l.C0.ESC+o+h}function a(h,v){h=Math.floor(h);for(var o="",t=0;t<h;t++)o+=v;return o}i.moveToCellSequence=function(h,v,o,t){var e,r=o.buffer.x,c=o.buffer.y;if(!o.buffer.hasScrollback)return function(g,S,M,A,w,E){return d(S,A,w,E).length===0?"":a(C(g,S,g,S-p(w,S),!1,w).length,y("D",E))}(r,c,0,v,o,t)+d(c,v,o,t)+function(g,S,M,A,w,E){var O;O=d(S,A,w,E).length>0?A-p(w,A):S;var R=A,$=function(B,k,x,H,F,z){var N;return N=d(x,H,F,z).length>0?H-p(F,H):k,B<x&&N<=H||B>=x&&N<H?"C":"D"}(g,S,M,A,w,E);return a(C(g,O,M,R,$==="C",w).length,y($,E))}(r,c,h,v,o,t);if(c===v)return e=r>h?"D":"C",a(Math.abs(r-h),y(e,t));e=c>v?"D":"C";var u=Math.abs(c-v);return a(function(g,S){return S.cols-g}(c>v?h:r,o)+(u-1)*o.cols+1+((c>v?r:h)-1),y(e,t))}},4389:function(b,i,f){var l=this&&this.__assign||function(){return l=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var c in t=arguments[e])Object.prototype.hasOwnProperty.call(t,c)&&(o[c]=t[c]);return o},l.apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;var d=f(3236),p=f(9042),_=f(7975),C=f(7090),y=f(5741),a=f(8285),h=["cols","rows"],v=function(){function o(t){var e=this;this._core=new d.Terminal(t),this._addonManager=new y.AddonManager,this._publicOptions=l({},this._core.options);var r=function(S){return e._core.options[S]},c=function(S,M){e._checkReadonlyOptions(S),e._core.options[S]=M};for(var u in this._core.options){var g={get:r.bind(this,u),set:c.bind(this,u)};Object.defineProperty(this._publicOptions,u,g)}}return o.prototype._checkReadonlyOptions=function(t){if(h.includes(t))throw new Error('Option "'+t+'" can only be set in the constructor')},o.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(o.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new _.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"unicode",{get:function(){return this._checkProposedApi(),new C.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new a.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"modes",{get:function(){var t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,wraparoundMode:t.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"options",{get:function(){return this._publicOptions},set:function(t){for(var e in t)this._publicOptions[e]=t[e]},enumerable:!1,configurable:!0}),o.prototype.blur=function(){this._core.blur()},o.prototype.focus=function(){this._core.focus()},o.prototype.resize=function(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)},o.prototype.open=function(t){this._core.open(t)},o.prototype.attachCustomKeyEventHandler=function(t){this._core.attachCustomKeyEventHandler(t)},o.prototype.registerLinkMatcher=function(t,e,r){return this._checkProposedApi(),this._core.registerLinkMatcher(t,e,r)},o.prototype.deregisterLinkMatcher=function(t){this._checkProposedApi(),this._core.deregisterLinkMatcher(t)},o.prototype.registerLinkProvider=function(t){return this._checkProposedApi(),this._core.registerLinkProvider(t)},o.prototype.registerCharacterJoiner=function(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)},o.prototype.deregisterCharacterJoiner=function(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)},o.prototype.registerMarker=function(t){return t===void 0&&(t=0),this._checkProposedApi(),this._verifyIntegers(t),this._core.addMarker(t)},o.prototype.registerDecoration=function(t){var e,r,c;return this._checkProposedApi(),this._verifyPositiveIntegers((e=t.x)!==null&&e!==void 0?e:0,(r=t.width)!==null&&r!==void 0?r:0,(c=t.height)!==null&&c!==void 0?c:0),this._core.registerDecoration(t)},o.prototype.addMarker=function(t){return this.registerMarker(t)},o.prototype.hasSelection=function(){return this._core.hasSelection()},o.prototype.select=function(t,e,r){this._verifyIntegers(t,e,r),this._core.select(t,e,r)},o.prototype.getSelection=function(){return this._core.getSelection()},o.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},o.prototype.clearSelection=function(){this._core.clearSelection()},o.prototype.selectAll=function(){this._core.selectAll()},o.prototype.selectLines=function(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)},o.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},o.prototype.scrollLines=function(t){this._verifyIntegers(t),this._core.scrollLines(t)},o.prototype.scrollPages=function(t){this._verifyIntegers(t),this._core.scrollPages(t)},o.prototype.scrollToTop=function(){this._core.scrollToTop()},o.prototype.scrollToBottom=function(){this._core.scrollToBottom()},o.prototype.scrollToLine=function(t){this._verifyIntegers(t),this._core.scrollToLine(t)},o.prototype.clear=function(){this._core.clear()},o.prototype.write=function(t,e){this._core.write(t,e)},o.prototype.writeUtf8=function(t,e){this._core.write(t,e)},o.prototype.writeln=function(t,e){this._core.write(t),this._core.write(`\r
`,e)},o.prototype.paste=function(t){this._core.paste(t)},o.prototype.getOption=function(t){return this._core.optionsService.getOption(t)},o.prototype.setOption=function(t,e){this._checkReadonlyOptions(t),this._core.optionsService.setOption(t,e)},o.prototype.refresh=function(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)},o.prototype.reset=function(){this._core.reset()},o.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},o.prototype.loadAddon=function(t){return this._addonManager.loadAddon(this,t)},Object.defineProperty(o,"strings",{get:function(){return p},enumerable:!1,configurable:!0}),o.prototype._verifyIntegers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,c=t;r<c.length;r++){var u=c[r];if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}},o.prototype._verifyPositiveIntegers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,c=t;r<c.length;r++){var u=c[r];if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}},o}();i.Terminal=v},1546:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;var l=f(643),d=f(8803),p=f(1420),_=f(3734),C=f(1752),y=f(4774),a=f(9631),h=f(8978),v=function(){function o(t,e,r,c,u,g,S,M){this._container=t,this._alpha=c,this._colors=u,this._rendererId=g,this._bufferService=S,this._optionsService=M,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return o.prototype.dispose=function(){var t;(0,a.removeElementFromParent)(this._canvas),(t=this._charAtlas)===null||t===void 0||t.dispose()},o.prototype._initCanvas=function(){this._ctx=(0,C.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},o.prototype.onOptionsChanged=function(){},o.prototype.onBlur=function(){},o.prototype.onFocus=function(){},o.prototype.onCursorMove=function(){},o.prototype.onGridChanged=function(t,e){},o.prototype.onSelectionChanged=function(t,e,r){},o.prototype.setColors=function(t){this._refreshCharAtlas(t)},o.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},o.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,p.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},o.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},o.prototype.clearTextureAtlas=function(){var t;(t=this._charAtlas)===null||t===void 0||t.clear()},o.prototype._fillCells=function(t,e,r,c){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,c*this._scaledCellHeight)},o.prototype._fillMiddleLineAtCells=function(t,e,r){r===void 0&&(r=1);var c=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-c-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillBottomLineAtCells=function(t,e,r){r===void 0&&(r=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillLeftLineAtCell=function(t,e,r){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},o.prototype._strokeRectAtCell=function(t,e,r,c){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)},o.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},o.prototype._clearCells=function(t,e,r,c){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,c*this._scaledCellHeight))},o.prototype._fillCharTrueColor=function(t,e,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=d.TEXT_BASELINE,this._clipRow(r);var c=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(c=(0,h.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),c||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},o.prototype._drawChars=function(t,e,r){var c,u,g,S=this._getContrastColor(t);S||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,r,S):(t.isInverse()?(u=t.isBgDefault()?d.INVERTED_DEFAULT_COLOR:t.getBgColor(),g=t.isFgDefault()?d.INVERTED_DEFAULT_COLOR:t.getFgColor()):(g=t.isBgDefault()?l.DEFAULT_COLOR:t.getBgColor(),u=t.isFgDefault()?l.DEFAULT_COLOR:t.getFgColor()),u+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&u<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=g,this._currentGlyphIdentifier.fg=u,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),!((c=this._charAtlas)===null||c===void 0)&&c.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,e,r))},o.prototype._drawUncachedChars=function(t,e,r,c){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline=d.TEXT_BASELINE,t.isInverse())if(c)this._ctx.fillStyle=c.css;else if(t.isBgDefault())this._ctx.fillStyle=y.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+_.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var u=t.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&u<8&&(u+=8),this._ctx.fillStyle=this._colors.ansi[u].css}else if(c)this._ctx.fillStyle=c.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+_.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var g=t.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&g<8&&(g+=8),this._ctx.fillStyle=this._colors.ansi[g].css}this._clipRow(r),t.isDim()&&(this._ctx.globalAlpha=d.DIM_OPACITY);var S=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(S=(0,h.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),S||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},o.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},o.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},o.prototype._getContrastColor=function(t){if(this._optionsService.rawOptions.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(e!==void 0)return e||void 0;var r=t.getFgColor(),c=t.getFgColorMode(),u=t.getBgColor(),g=t.getBgColorMode(),S=!!t.isInverse(),M=!!t.isInverse();if(S){var A=r;r=u,u=A;var w=c;c=g,g=w}var E=this._resolveBackgroundRgba(g,u,S),O=this._resolveForegroundRgba(c,r,S,M),R=y.rgba.ensureContrastRatio(E,O,this._optionsService.rawOptions.minimumContrastRatio);if(R){var $={css:y.channels.toCss(R>>24&255,R>>16&255,R>>8&255),rgba:R};return this._colors.contrastCache.setColor(t.bg,t.fg,$),$}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},o.prototype._resolveBackgroundRgba=function(t,e,r){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},o.prototype._resolveForegroundRgba=function(t,e,r,c){switch(t){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&c&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},o}();i.BaseRenderLayer=v},2512:function(b,i,f){var l,d=this&&this.__extends||(l=function(e,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(c[g]=u[g])},l(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}),p=this&&this.__decorate||function(e,r,c,u){var g,S=arguments.length,M=S<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(e,r,c,u);else for(var A=e.length-1;A>=0;A--)(g=e[A])&&(M=(S<3?g(M):S>3?g(r,c,M):g(r,c))||M);return S>3&&M&&Object.defineProperty(r,c,M),M},_=this&&this.__param||function(e,r){return function(c,u){r(c,u,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;var C=f(1546),y=f(511),a=f(2585),h=f(4725),v=600,o=function(e){function r(c,u,g,S,M,A,w,E,O){var R=e.call(this,c,"cursor",u,!0,g,S,A,w)||this;return R._onRequestRedraw=M,R._coreService=E,R._coreBrowserService=O,R._cell=new y.CellData,R._state={x:0,y:0,isFocused:!1,style:"",width:0},R._cursorRenderers={bar:R._renderBarCursor.bind(R),block:R._renderBlockCursor.bind(R),underline:R._renderUnderlineCursor.bind(R)},R}return d(r,e),r.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},r.prototype.resize=function(c){e.prototype.resize.call(this,c),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){var c;this._clearCursor(),(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation(),this.onOptionsChanged()},r.prototype.onBlur=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var c,u=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){u._render(!0)})):((c=this._cursorBlinkStateManager)===null||c===void 0||c.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation()},r.prototype.onGridChanged=function(c,u){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(c){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var u=this._bufferService.buffer.ybase+this._bufferService.buffer.y,g=u-this._bufferService.buffer.ydisp;if(g<0||g>=this._bufferService.rows)this._clearCursor();else{var S=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(u).loadCell(S,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var M=this._optionsService.rawOptions.cursorStyle;return M&&M!=="block"?this._cursorRenderers[M](S,g,this._cell):this._renderBlurCursor(S,g,this._cell),this._ctx.restore(),this._state.x=S,this._state.y=g,this._state.isFocused=!1,this._state.style=M,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===S&&this._state.y===g&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](S,g,this._cell),this._ctx.restore(),this._state.x=S,this._state.y=g,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(c,u,g){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(c,u,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(c,u,g){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(c,u,g.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(g,c,u),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(c,u,g){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(c,u),this._ctx.restore()},r.prototype._renderBlurCursor=function(c,u,g){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(c,u,g.getWidth(),1),this._ctx.restore()},p([_(5,a.IBufferService),_(6,a.IOptionsService),_(7,a.ICoreService),_(8,h.ICoreBrowserService)],r)}(C.BaseRenderLayer);i.CursorRenderLayer=o;var t=function(){function e(r,c){this._renderCallback=c,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},e.prototype._restartInterval=function(r){var c=this;r===void 0&&(r=v),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(c._animationTimeRestarted){var u=v-(Date.now()-c._animationTimeRestarted);if(c._animationTimeRestarted=void 0,u>0)return void c._restartInterval(u)}c.isCursorVisible=!1,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0}),c._blinkInterval=window.setInterval(function(){if(c._animationTimeRestarted){var g=v-(Date.now()-c._animationTimeRestarted);return c._animationTimeRestarted=void 0,void c._restartInterval(g)}c.isCursorVisible=!c.isCursorVisible,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0})},v)},r)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(b,i,f)=>{var l,d,p,_,C,y,a,h,v,o,t,e,r,c,u,g,S,M,A,w,E,O,R,$,B,k,x,H,F,z,N,Z,X,Q,D,U,P,I,T,G,J,Y,re,ne,ve,K,ae,fe,be,Je,Ar,Mr,kr,Rr,Or,xr,Dr,Br,Tr,Pr,Ir,Hr,vt,gt,yt,mt,bt,St,Ct,wt,Lt,Et,At,Mt,kt,Rt,Ot,xt,Dt,Bt,Tt,Pt,It,Ht,$t,Ft,jt,Wt,Ut,qt,zt,Nt,Vt,Kt,Gt,Jt,Xt,Yt,Zt,Qt,er,tr,rr,ir,nr,or,sr,ar,cr,lr,hr,ur,$r,Fr,jr,Wr,Ur,qr,zr,Nr,Vr,Kr,Gr,Jr,Xr,Yr,Zr,Qr;Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;var ki=f(1752);i.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Mn={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"\u2500":(l={},l[1]="M0,.5 L1,.5",l),"\u2501":(d={},d[3]="M0,.5 L1,.5",d),"\u2502":(p={},p[1]="M.5,0 L.5,1",p),"\u2503":(_={},_[3]="M.5,0 L.5,1",_),"\u250C":(C={},C[1]="M0.5,1 L.5,.5 L1,.5",C),"\u250F":(y={},y[3]="M0.5,1 L.5,.5 L1,.5",y),"\u2510":(a={},a[1]="M0,.5 L.5,.5 L.5,1",a),"\u2513":(h={},h[3]="M0,.5 L.5,.5 L.5,1",h),"\u2514":(v={},v[1]="M.5,0 L.5,.5 L1,.5",v),"\u2517":(o={},o[3]="M.5,0 L.5,.5 L1,.5",o),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(r={},r[1]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"\u2523":(c={},c[3]="M.5,0 L.5,1 M.5,.5 L1,.5",c),"\u2524":(u={},u[1]="M.5,0 L.5,1 M.5,.5 L0,.5",u),"\u252B":(g={},g[3]="M.5,0 L.5,1 M.5,.5 L0,.5",g),"\u252C":(S={},S[1]="M0,.5 L1,.5 M.5,.5 L.5,1",S),"\u2533":(M={},M[3]="M0,.5 L1,.5 M.5,.5 L.5,1",M),"\u2534":(A={},A[1]="M0,.5 L1,.5 M.5,.5 L.5,0",A),"\u253B":(w={},w[3]="M0,.5 L1,.5 M.5,.5 L.5,0",w),"\u253C":(E={},E[1]="M0,.5 L1,.5 M.5,0 L.5,1",E),"\u254B":(O={},O[3]="M0,.5 L1,.5 M.5,0 L.5,1",O),"\u2574":(R={},R[1]="M.5,.5 L0,.5",R),"\u2578":($={},$[3]="M.5,.5 L0,.5",$),"\u2575":(B={},B[1]="M.5,.5 L.5,0",B),"\u2579":(k={},k[3]="M.5,.5 L.5,0",k),"\u2576":(x={},x[1]="M.5,.5 L1,.5",x),"\u257A":(H={},H[3]="M.5,.5 L1,.5",H),"\u2577":(F={},F[1]="M.5,.5 L.5,1",F),"\u257B":(z={},z[3]="M.5,.5 L.5,1",z),"\u2550":(N={},N[1]=function(W,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},N),"\u2551":(Z={},Z[1]=function(W,j){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},Z),"\u2552":(X={},X[1]=function(W,j){return"M.5,1 L.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},X),"\u2553":(Q={},Q[1]=function(W,j){return"M"+(.5-W)+",1 L"+(.5-W)+",.5 L1,.5 M"+(.5+W)+",.5 L"+(.5+W)+",1"},Q),"\u2554":(D={},D[1]=function(W,j){return"M1,"+(.5-j)+" L"+(.5-W)+","+(.5-j)+" L"+(.5-W)+",1 M1,"+(.5+j)+" L"+(.5+W)+","+(.5+j)+" L"+(.5+W)+",1"},D),"\u2555":(U={},U[1]=function(W,j){return"M0,"+(.5-j)+" L.5,"+(.5-j)+" L.5,1 M0,"+(.5+j)+" L.5,"+(.5+j)},U),"\u2556":(P={},P[1]=function(W,j){return"M"+(.5+W)+",1 L"+(.5+W)+",.5 L0,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1"},P),"\u2557":(I={},I[1]=function(W,j){return"M0,"+(.5+j)+" L"+(.5-W)+","+(.5+j)+" L"+(.5-W)+",1 M0,"+(.5-j)+" L"+(.5+W)+","+(.5-j)+" L"+(.5+W)+",1"},I),"\u2558":(T={},T[1]=function(W,j){return"M.5,0 L.5,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5-j)+" L1,"+(.5-j)},T),"\u2559":(G={},G[1]=function(W,j){return"M1,.5 L"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},G),"\u255A":(J={},J[1]=function(W,j){return"M1,"+(.5-j)+" L"+(.5+W)+","+(.5-j)+" L"+(.5+W)+",0 M1,"+(.5+j)+" L"+(.5-W)+","+(.5+j)+" L"+(.5-W)+",0"},J),"\u255B":(Y={},Y[1]=function(W,j){return"M0,"+(.5+j)+" L.5,"+(.5+j)+" L.5,0 M0,"+(.5-j)+" L.5,"+(.5-j)},Y),"\u255C":(re={},re[1]=function(W,j){return"M0,.5 L"+(.5+W)+",.5 L"+(.5+W)+",0 M"+(.5-W)+",.5 L"+(.5-W)+",0"},re),"\u255D":(ne={},ne[1]=function(W,j){return"M0,"+(.5-j)+" L"+(.5-W)+","+(.5-j)+" L"+(.5-W)+",0 M0,"+(.5+j)+" L"+(.5+W)+","+(.5+j)+" L"+(.5+W)+",0"},ne),"\u255E":(ve={},ve[1]=function(W,j){return"M.5,0 L.5,1 M.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},ve),"\u255F":(K={},K[1]=function(W,j){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1 M"+(.5+W)+",.5 L1,.5"},K),"\u2560":(ae={},ae[1]=function(W,j){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M1,"+(.5+j)+" L"+(.5+W)+","+(.5+j)+" L"+(.5+W)+",1 M1,"+(.5-j)+" L"+(.5+W)+","+(.5-j)+" L"+(.5+W)+",0"},ae),"\u2561":(fe={},fe[1]=function(W,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L.5,"+(.5-j)+" M0,"+(.5+j)+" L.5,"+(.5+j)},fe),"\u2562":(be={},be[1]=function(W,j){return"M0,.5 L"+(.5-W)+",.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},be),"\u2563":(Je={},Je[1]=function(W,j){return"M"+(.5+W)+",0 L"+(.5+W)+",1 M0,"+(.5+j)+" L"+(.5-W)+","+(.5+j)+" L"+(.5-W)+",1 M0,"+(.5-j)+" L"+(.5-W)+","+(.5-j)+" L"+(.5-W)+",0"},Je),"\u2564":(Ar={},Ar[1]=function(W,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5+j)+" L.5,1"},Ar),"\u2565":(Mr={},Mr[1]=function(W,j){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1 M"+(.5+W)+",.5 L"+(.5+W)+",1"},Mr),"\u2566":(kr={},kr[1]=function(W,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L"+(.5-W)+","+(.5+j)+" L"+(.5-W)+",1 M1,"+(.5+j)+" L"+(.5+W)+","+(.5+j)+" L"+(.5+W)+",1"},kr),"\u2567":(Rr={},Rr[1]=function(W,j){return"M.5,0 L.5,"+(.5-j)+" M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},Rr),"\u2568":(Or={},Or[1]=function(W,j){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},Or),"\u2569":(xr={},xr[1]=function(W,j){return"M0,"+(.5+j)+" L1,"+(.5+j)+" M0,"+(.5-j)+" L"+(.5-W)+","+(.5-j)+" L"+(.5-W)+",0 M1,"+(.5-j)+" L"+(.5+W)+","+(.5-j)+" L"+(.5+W)+",0"},xr),"\u256A":(Dr={},Dr[1]=function(W,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},Dr),"\u256B":(Br={},Br[1]=function(W,j){return"M0,.5 L1,.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},Br),"\u256C":(Tr={},Tr[1]=function(W,j){return"M0,"+(.5+j)+" L"+(.5-W)+","+(.5+j)+" L"+(.5-W)+",1 M1,"+(.5+j)+" L"+(.5+W)+","+(.5+j)+" L"+(.5+W)+",1 M0,"+(.5-j)+" L"+(.5-W)+","+(.5-j)+" L"+(.5-W)+",0 M1,"+(.5-j)+" L"+(.5+W)+","+(.5-j)+" L"+(.5+W)+",0"},Tr),"\u2571":(Pr={},Pr[1]="M1,0 L0,1",Pr),"\u2572":(Ir={},Ir[1]="M0,0 L1,1",Ir),"\u2573":(Hr={},Hr[1]="M1,0 L0,1 M0,0 L1,1",Hr),"\u257C":(vt={},vt[1]="M.5,.5 L0,.5",vt[3]="M.5,.5 L1,.5",vt),"\u257D":(gt={},gt[1]="M.5,.5 L.5,0",gt[3]="M.5,.5 L.5,1",gt),"\u257E":(yt={},yt[1]="M.5,.5 L1,.5",yt[3]="M.5,.5 L0,.5",yt),"\u257F":(mt={},mt[1]="M.5,.5 L.5,1",mt[3]="M.5,.5 L.5,0",mt),"\u250D":(bt={},bt[1]="M.5,.5 L.5,1",bt[3]="M.5,.5 L1,.5",bt),"\u250E":(St={},St[1]="M.5,.5 L1,.5",St[3]="M.5,.5 L.5,1",St),"\u2511":(Ct={},Ct[1]="M.5,.5 L.5,1",Ct[3]="M.5,.5 L0,.5",Ct),"\u2512":(wt={},wt[1]="M.5,.5 L0,.5",wt[3]="M.5,.5 L.5,1",wt),"\u2515":(Lt={},Lt[1]="M.5,.5 L.5,0",Lt[3]="M.5,.5 L1,.5",Lt),"\u2516":(Et={},Et[1]="M.5,.5 L1,.5",Et[3]="M.5,.5 L.5,0",Et),"\u2519":(At={},At[1]="M.5,.5 L.5,0",At[3]="M.5,.5 L0,.5",At),"\u251A":(Mt={},Mt[1]="M.5,.5 L0,.5",Mt[3]="M.5,.5 L.5,0",Mt),"\u251D":(kt={},kt[1]="M.5,0 L.5,1",kt[3]="M.5,.5 L1,.5",kt),"\u251E":(Rt={},Rt[1]="M0.5,1 L.5,.5 L1,.5",Rt[3]="M.5,.5 L.5,0",Rt),"\u251F":(Ot={},Ot[1]="M.5,0 L.5,.5 L1,.5",Ot[3]="M.5,.5 L.5,1",Ot),"\u2520":(xt={},xt[1]="M.5,.5 L1,.5",xt[3]="M.5,0 L.5,1",xt),"\u2521":(Dt={},Dt[1]="M.5,.5 L.5,1",Dt[3]="M.5,0 L.5,.5 L1,.5",Dt),"\u2522":(Bt={},Bt[1]="M.5,.5 L.5,0",Bt[3]="M0.5,1 L.5,.5 L1,.5",Bt),"\u2525":(Tt={},Tt[1]="M.5,0 L.5,1",Tt[3]="M.5,.5 L0,.5",Tt),"\u2526":(Pt={},Pt[1]="M0,.5 L.5,.5 L.5,1",Pt[3]="M.5,.5 L.5,0",Pt),"\u2527":(It={},It[1]="M.5,0 L.5,.5 L0,.5",It[3]="M.5,.5 L.5,1",It),"\u2528":(Ht={},Ht[1]="M.5,.5 L0,.5",Ht[3]="M.5,0 L.5,1",Ht),"\u2529":($t={},$t[1]="M.5,.5 L.5,1",$t[3]="M.5,0 L.5,.5 L0,.5",$t),"\u252A":(Ft={},Ft[1]="M.5,.5 L.5,0",Ft[3]="M0,.5 L.5,.5 L.5,1",Ft),"\u252D":(jt={},jt[1]="M0.5,1 L.5,.5 L1,.5",jt[3]="M.5,.5 L0,.5",jt),"\u252E":(Wt={},Wt[1]="M0,.5 L.5,.5 L.5,1",Wt[3]="M.5,.5 L1,.5",Wt),"\u252F":(Ut={},Ut[1]="M.5,.5 L.5,1",Ut[3]="M0,.5 L1,.5",Ut),"\u2530":(qt={},qt[1]="M0,.5 L1,.5",qt[3]="M.5,.5 L.5,1",qt),"\u2531":(zt={},zt[1]="M.5,.5 L1,.5",zt[3]="M0,.5 L.5,.5 L.5,1",zt),"\u2532":(Nt={},Nt[1]="M.5,.5 L0,.5",Nt[3]="M0.5,1 L.5,.5 L1,.5",Nt),"\u2535":(Vt={},Vt[1]="M.5,0 L.5,.5 L1,.5",Vt[3]="M.5,.5 L0,.5",Vt),"\u2536":(Kt={},Kt[1]="M.5,0 L.5,.5 L0,.5",Kt[3]="M.5,.5 L1,.5",Kt),"\u2537":(Gt={},Gt[1]="M.5,.5 L.5,0",Gt[3]="M0,.5 L1,.5",Gt),"\u2538":(Jt={},Jt[1]="M0,.5 L1,.5",Jt[3]="M.5,.5 L.5,0",Jt),"\u2539":(Xt={},Xt[1]="M.5,.5 L1,.5",Xt[3]="M.5,0 L.5,.5 L0,.5",Xt),"\u253A":(Yt={},Yt[1]="M.5,.5 L0,.5",Yt[3]="M.5,0 L.5,.5 L1,.5",Yt),"\u253D":(Zt={},Zt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Zt[3]="M.5,.5 L0,.5",Zt),"\u253E":(Qt={},Qt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Qt[3]="M.5,.5 L1,.5",Qt),"\u253F":(er={},er[1]="M.5,0 L.5,1",er[3]="M0,.5 L1,.5",er),"\u2540":(tr={},tr[1]="M0,.5 L1,.5 M.5,.5 L.5,1",tr[3]="M.5,.5 L.5,0",tr),"\u2541":(rr={},rr[1]="M.5,.5 L.5,0 M0,.5 L1,.5",rr[3]="M.5,.5 L.5,1",rr),"\u2542":(ir={},ir[1]="M0,.5 L1,.5",ir[3]="M.5,0 L.5,1",ir),"\u2543":(nr={},nr[1]="M0.5,1 L.5,.5 L1,.5",nr[3]="M.5,0 L.5,.5 L0,.5",nr),"\u2544":(or={},or[1]="M0,.5 L.5,.5 L.5,1",or[3]="M.5,0 L.5,.5 L1,.5",or),"\u2545":(sr={},sr[1]="M.5,0 L.5,.5 L1,.5",sr[3]="M0,.5 L.5,.5 L.5,1",sr),"\u2546":(ar={},ar[1]="M.5,0 L.5,.5 L0,.5",ar[3]="M0.5,1 L.5,.5 L1,.5",ar),"\u2547":(cr={},cr[1]="M.5,.5 L.5,1",cr[3]="M.5,.5 L.5,0 M0,.5 L1,.5",cr),"\u2548":(lr={},lr[1]="M.5,.5 L.5,0",lr[3]="M0,.5 L1,.5 M.5,.5 L.5,1",lr),"\u2549":(hr={},hr[1]="M.5,.5 L1,.5",hr[3]="M.5,0 L.5,1 M.5,.5 L0,.5",hr),"\u254A":(ur={},ur[1]="M.5,.5 L0,.5",ur[3]="M.5,0 L.5,1 M.5,.5 L1,.5",ur),"\u254C":($r={},$r[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",$r),"\u254D":(Fr={},Fr[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Fr),"\u2504":(jr={},jr[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",jr),"\u2505":(Wr={},Wr[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Wr),"\u2508":(Ur={},Ur[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Ur),"\u2509":(qr={},qr[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",qr),"\u254E":(zr={},zr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",zr),"\u254F":(Nr={},Nr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Nr),"\u2506":(Vr={},Vr[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Vr),"\u2507":(Kr={},Kr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Kr),"\u250A":(Gr={},Gr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Gr),"\u250B":(Jr={},Jr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Jr),"\u256D":(Xr={},Xr[1]="C.5,1,.5,.5,1,.5",Xr),"\u256E":(Yr={},Yr[1]="C.5,1,.5,.5,0,.5",Yr),"\u256F":(Zr={},Zr[1]="C.5,0,.5,.5,0,.5",Zr),"\u2570":(Qr={},Qr[1]="C.5,0,.5,.5,1,.5",Qr)},i.tryDrawCustomChar=function(W,j,Se,tt,rt,se){var Ce=i.blockElementDefinitions[j];if(Ce)return function(le,Le,nt,ot,Xe,Ye){for(var _e=0;_e<Le.length;_e++){var he=Le[_e],oe=Xe/8,xe=Ye/8;le.fillRect(nt+he.x*oe,ot+he.y*xe,he.w*oe,he.h*xe)}}(W,Ce,Se,tt,rt,se),!0;var we=Mn[j];if(we)return function(le,Le,nt,ot,Xe,Ye){var _e,he=Ri.get(Le);he||(he=new Map,Ri.set(Le,he));var oe=le.fillStyle;if(typeof oe!="string")throw new Error('Unexpected fillStyle type "'+oe+'"');var xe=he.get(oe);if(!xe){var ge=Le[0].length,We=Le.length,Ue=document.createElement("canvas");Ue.width=ge,Ue.height=We;var fr=(0,ki.throwIfFalsy)(Ue.getContext("2d")),Te=new ImageData(ge,We),Ze=void 0,qe=void 0,ei=void 0,ti=void 0;if(oe.startsWith("#"))Ze=parseInt(oe.substr(1,2),16),qe=parseInt(oe.substr(3,2),16),ei=parseInt(oe.substr(5,2),16),ti=oe.length>7&&parseInt(oe.substr(7,2),16)||1;else{if(!oe.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+oe+'" when drawing pattern glyph');Ze=(_e=oe.substring(5,oe.length-1).split(",").map(function(On){return parseFloat(On)}))[0],qe=_e[1],ei=_e[2],ti=_e[3]}for(var ze=0;ze<We;ze++)for(var Ne=0;Ne<ge;Ne++)Te.data[4*(ze*ge+Ne)]=Ze,Te.data[4*(ze*ge+Ne)+1]=qe,Te.data[4*(ze*ge+Ne)+2]=ei,Te.data[4*(ze*ge+Ne)+3]=Le[ze][Ne]*(255*ti);fr.putImageData(Te,0,0),xe=(0,ki.throwIfFalsy)(le.createPattern(Ue,null)),he.set(oe,xe)}le.fillStyle=xe,le.fillRect(nt,ot,Xe,Ye)}(W,we,Se,tt,rt,se),!0;var it=i.boxDrawingDefinitions[j];return!!it&&(function(le,Le,nt,ot,Xe,Ye){le.strokeStyle=le.fillStyle;for(var _e=0,he=Object.entries(Le);_e<he.length;_e++){var oe=he[_e],xe=oe[0],ge=oe[1];le.beginPath(),le.lineWidth=window.devicePixelRatio*Number.parseInt(xe);for(var We=0,Ue=(typeof ge=="function"?ge(.15,.15/Ye*Xe):ge).split(" ");We<Ue.length;We++){var fr=Ue[We],Te=fr[0],Ze=kn[Te];if(Ze){var qe=fr.substring(1).split(",");qe[0]&&qe[1]&&Ze(le,Rn(qe,Xe,Ye,nt,ot))}else console.error('Could not find drawing instructions for "'+Te+'"')}le.stroke(),le.closePath()}}(W,it,Se,tt,rt,se),!0)};var Ri=new Map;function Oi(W,j,Se){return Se===void 0&&(Se=0),Math.max(Math.min(W,j),Se)}var kn={C:function(W,j){return W.bezierCurveTo(j[0],j[1],j[2],j[3],j[4],j[5])},L:function(W,j){return W.lineTo(j[0],j[1])},M:function(W,j){return W.moveTo(j[0],j[1])}};function Rn(W,j,Se,tt,rt){var se=W.map(function(it){return parseFloat(it)||parseInt(it)});if(se.length<2)throw new Error("Too few arguments for instruction");for(var Ce=0;Ce<se.length;Ce+=2)se[Ce]*=j,se[Ce]!==0&&(se[Ce]=Oi(Math.round(se[Ce]+.5)-.5,j,0)),se[Ce]+=tt;for(var we=1;we<se.length;we+=2)se[we]*=Se,se[we]!==0&&(se[we]=Oi(Math.round(se[we]+.5)-.5,Se,0)),se[we]+=rt;return se}},3700:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GridCache=void 0;var f=function(){function l(){this.cache=[]}return l.prototype.resize=function(d,p){for(var _=0;_<d;_++){this.cache.length<=_&&this.cache.push([]);for(var C=this.cache[_].length;C<p;C++)this.cache[_].push(void 0);this.cache[_].length=p}this.cache.length=d},l.prototype.clear=function(){for(var d=0;d<this.cache.length;d++)for(var p=0;p<this.cache[d].length;p++)this.cache[d][p]=void 0},l}();i.GridCache=f},5098:function(b,i,f){var l,d=this&&this.__extends||(l=function(o,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])},l(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}l(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(o,t,e,r){var c,u=arguments.length,g=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,t,e,r);else for(var S=o.length-1;S>=0;S--)(c=o[S])&&(g=(u<3?c(g):u>3?c(t,e,g):c(t,e))||g);return u>3&&g&&Object.defineProperty(t,e,g),g},_=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;var C=f(1546),y=f(8803),a=f(2040),h=f(2585),v=function(o){function t(e,r,c,u,g,S,M,A){var w=o.call(this,e,"link",r,!0,c,u,M,A)||this;return g.onShowLinkUnderline(function(E){return w._onShowLinkUnderline(E)}),g.onHideLinkUnderline(function(E){return w._onHideLinkUnderline(E)}),S.onShowLinkUnderline(function(E){return w._onShowLinkUnderline(E)}),S.onHideLinkUnderline(function(E){return w._onHideLinkUnderline(E)}),w}return d(t,o),t.prototype.resize=function(e){o.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===y.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,a.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var r=e.y1+1;r<e.y2;r++)this._fillBottomLineAtCells(0,r,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},p([_(6,h.IBufferService),_(7,h.IOptionsService)],t)}(C.BaseRenderLayer);i.LinkRenderLayer=v},3525:function(b,i,f){var l,d=this&&this.__extends||(l=function(g,S){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,A){M.__proto__=A}||function(M,A){for(var w in A)Object.prototype.hasOwnProperty.call(A,w)&&(M[w]=A[w])},l(g,S)},function(g,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=g}l(g,S),g.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)}),p=this&&this.__decorate||function(g,S,M,A){var w,E=arguments.length,O=E<3?S:A===null?A=Object.getOwnPropertyDescriptor(S,M):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(g,S,M,A);else for(var R=g.length-1;R>=0;R--)(w=g[R])&&(O=(E<3?w(O):E>3?w(S,M,O):w(S,M))||O);return E>3&&O&&Object.defineProperty(S,M,O),O},_=this&&this.__param||function(g,S){return function(M,A){S(M,A,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Renderer=void 0;var C=f(9596),y=f(4149),a=f(2512),h=f(5098),v=f(844),o=f(4725),t=f(2585),e=f(1420),r=f(8460),c=1,u=function(g){function S(M,A,w,E,O,R,$,B){var k=g.call(this)||this;k._colors=M,k._screenElement=A,k._bufferService=R,k._charSizeService=$,k._optionsService=B,k._id=c++,k._onRequestRedraw=new r.EventEmitter;var x=k._optionsService.rawOptions.allowTransparency;return k._renderLayers=[O.createInstance(C.TextRenderLayer,k._screenElement,0,k._colors,x,k._id),O.createInstance(y.SelectionRenderLayer,k._screenElement,1,k._colors,k._id),O.createInstance(h.LinkRenderLayer,k._screenElement,2,k._colors,k._id,w,E),O.createInstance(a.CursorRenderLayer,k._screenElement,3,k._colors,k._id,k._onRequestRedraw)],k.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},k._devicePixelRatio=window.devicePixelRatio,k._updateDimensions(),k.onOptionsChanged(),k}return d(S,g),Object.defineProperty(S.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){for(var M=0,A=this._renderLayers;M<A.length;M++)A[M].dispose();g.prototype.dispose.call(this),(0,e.removeTerminalFromCache)(this._id)},S.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},S.prototype.setColors=function(M){this._colors=M;for(var A=0,w=this._renderLayers;A<w.length;A++){var E=w[A];E.setColors(this._colors),E.reset()}},S.prototype.onResize=function(M,A){this._updateDimensions();for(var w=0,E=this._renderLayers;w<E.length;w++)E[w].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},S.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},S.prototype.onBlur=function(){this._runOperation(function(M){return M.onBlur()})},S.prototype.onFocus=function(){this._runOperation(function(M){return M.onFocus()})},S.prototype.onSelectionChanged=function(M,A,w){w===void 0&&(w=!1),this._runOperation(function(E){return E.onSelectionChanged(M,A,w)})},S.prototype.onCursorMove=function(){this._runOperation(function(M){return M.onCursorMove()})},S.prototype.onOptionsChanged=function(){this._runOperation(function(M){return M.onOptionsChanged()})},S.prototype.clear=function(){this._runOperation(function(M){return M.reset()})},S.prototype._runOperation=function(M){for(var A=0,w=this._renderLayers;A<w.length;A++)M(w[A])},S.prototype.renderRows=function(M,A){for(var w=0,E=this._renderLayers;w<E.length;w++)E[w].onGridChanged(M,A)},S.prototype.clearTextureAtlas=function(){for(var M=0,A=this._renderLayers;M<A.length;M++)A[M].clearTextureAtlas()},S.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},p([_(4,t.IInstantiationService),_(5,t.IBufferService),_(6,o.ICharSizeService),_(7,t.IOptionsService)],S)}(v.Disposable);i.Renderer=u},1752:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.throwIfFalsy=void 0,i.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f}},4149:function(b,i,f){var l,d=this&&this.__extends||(l=function(h,v){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},l(h,v)},function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function o(){this.constructor=h}l(h,v),h.prototype=v===null?Object.create(v):(o.prototype=v.prototype,new o)}),p=this&&this.__decorate||function(h,v,o,t){var e,r=arguments.length,c=r<3?v:t===null?t=Object.getOwnPropertyDescriptor(v,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(h,v,o,t);else for(var u=h.length-1;u>=0;u--)(e=h[u])&&(c=(r<3?e(c):r>3?e(v,o,c):e(v,o))||c);return r>3&&c&&Object.defineProperty(v,o,c),c},_=this&&this.__param||function(h,v){return function(o,t){v(o,t,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRenderLayer=void 0;var C=f(1546),y=f(2585),a=function(h){function v(o,t,e,r,c,u){var g=h.call(this,o,"selection",t,!0,e,r,c,u)||this;return g._clearState(),g}return d(v,h),v.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},v.prototype.resize=function(o){h.prototype.resize.call(this,o),this._clearState()},v.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},v.prototype.onSelectionChanged=function(o,t,e){if(this._didStateChange(o,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),o&&t){var r=o[1]-this._bufferService.buffer.ydisp,c=t[1]-this._bufferService.buffer.ydisp,u=Math.max(r,0),g=Math.min(c,this._bufferService.rows-1);if(u>=this._bufferService.rows||g<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var S=o[0],M=t[0]-S,A=g-u+1;this._fillCells(S,u,M,A)}else{S=r===u?o[0]:0;var w=u===c?t[0]:this._bufferService.cols;this._fillCells(S,u,w-S,1);var E=Math.max(g-u-1,0);if(this._fillCells(0,u+1,this._bufferService.cols,E),u!==g){var O=c===g?t[0]:this._bufferService.cols;this._fillCells(0,g,O,1)}}this._state.start=[o[0],o[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},v.prototype._didStateChange=function(o,t,e,r){return!this._areCoordinatesEqual(o,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||r!==this._state.ydisp},v.prototype._areCoordinatesEqual=function(o,t){return!(!o||!t)&&o[0]===t[0]&&o[1]===t[1]},p([_(4,y.IBufferService),_(5,y.IOptionsService)],v)}(C.BaseRenderLayer);i.SelectionRenderLayer=a},9596:function(b,i,f){var l,d=this&&this.__extends||(l=function(c,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,S){g.__proto__=S}||function(g,S){for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(g[M]=S[M])},l(c,u)},function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function g(){this.constructor=c}l(c,u),c.prototype=u===null?Object.create(u):(g.prototype=u.prototype,new g)}),p=this&&this.__decorate||function(c,u,g,S){var M,A=arguments.length,w=A<3?u:S===null?S=Object.getOwnPropertyDescriptor(u,g):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(c,u,g,S);else for(var E=c.length-1;E>=0;E--)(M=c[E])&&(w=(A<3?M(w):A>3?M(u,g,w):M(u,g))||w);return A>3&&w&&Object.defineProperty(u,g,w),w},_=this&&this.__param||function(c,u){return function(g,S){u(g,S,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.TextRenderLayer=void 0;var C=f(3700),y=f(1546),a=f(3734),h=f(643),v=f(511),o=f(2585),t=f(4725),e=f(4269),r=function(c){function u(g,S,M,A,w,E,O,R){var $=c.call(this,g,"text",S,A,M,w,E,O)||this;return $._characterJoinerService=R,$._characterWidth=0,$._characterFont="",$._characterOverlapCache={},$._workCell=new v.CellData,$._state=new C.GridCache,$}return d(u,c),u.prototype.resize=function(g){c.prototype.resize.call(this,g);var S=this._getFont(!1,!1);this._characterWidth===g.scaledCharWidth&&this._characterFont===S||(this._characterWidth=g.scaledCharWidth,this._characterFont=S,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},u.prototype.reset=function(){this._state.clear(),this._clearAll()},u.prototype._forEachCell=function(g,S,M){for(var A=g;A<=S;A++)for(var w=A+this._bufferService.buffer.ydisp,E=this._bufferService.buffer.lines.get(w),O=this._characterJoinerService.getJoinedCharacters(w),R=0;R<this._bufferService.cols;R++){E.loadCell(R,this._workCell);var $=this._workCell,B=!1,k=R;if($.getWidth()!==0){if(O.length>0&&R===O[0][0]){B=!0;var x=O.shift();$=new e.JoinedCellData(this._workCell,E.translateToString(!0,x[0],x[1]),x[1]-x[0]),k=x[1]-1}!B&&this._isOverlapping($)&&k<E.length-1&&E.getCodePoint(k+1)===h.NULL_CELL_CODE&&($.content&=-12582913,$.content|=2<<22),M($,R,A),R=k}}},u.prototype._drawBackground=function(g,S){var M=this,A=this._ctx,w=this._bufferService.cols,E=0,O=0,R=null;A.save(),this._forEachCell(g,S,function($,B,k){var x=null;$.isInverse()?x=$.isFgDefault()?M._colors.foreground.css:$.isFgRGB()?"rgb("+a.AttributeData.toColorRGB($.getFgColor()).join(",")+")":M._colors.ansi[$.getFgColor()].css:$.isBgRGB()?x="rgb("+a.AttributeData.toColorRGB($.getBgColor()).join(",")+")":$.isBgPalette()&&(x=M._colors.ansi[$.getBgColor()].css),R===null&&(E=B,O=k),k!==O?(A.fillStyle=R||"",M._fillCells(E,O,w-E,1),E=B,O=k):R!==x&&(A.fillStyle=R||"",M._fillCells(E,O,B-E,1),E=B,O=k),R=x}),R!==null&&(A.fillStyle=R,this._fillCells(E,O,w-E,1)),A.restore()},u.prototype._drawForeground=function(g,S){var M=this;this._forEachCell(g,S,function(A,w,E){if(!A.isInvisible()&&(M._drawChars(A,w,E),A.isUnderline()||A.isStrikethrough())){if(M._ctx.save(),A.isInverse())if(A.isBgDefault())M._ctx.fillStyle=M._colors.background.css;else if(A.isBgRGB())M._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(A.getBgColor()).join(",")+")";else{var O=A.getBgColor();M._optionsService.rawOptions.drawBoldTextInBrightColors&&A.isBold()&&O<8&&(O+=8),M._ctx.fillStyle=M._colors.ansi[O].css}else if(A.isFgDefault())M._ctx.fillStyle=M._colors.foreground.css;else if(A.isFgRGB())M._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(A.getFgColor()).join(",")+")";else{var R=A.getFgColor();M._optionsService.rawOptions.drawBoldTextInBrightColors&&A.isBold()&&R<8&&(R+=8),M._ctx.fillStyle=M._colors.ansi[R].css}A.isStrikethrough()&&M._fillMiddleLineAtCells(w,E,A.getWidth()),A.isUnderline()&&M._fillBottomLineAtCells(w,E,A.getWidth()),M._ctx.restore()}})},u.prototype.onGridChanged=function(g,S){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,g,this._bufferService.cols,S-g+1),this._drawBackground(g,S),this._drawForeground(g,S))},u.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},u.prototype._isOverlapping=function(g){if(g.getWidth()!==1||g.getCode()<256)return!1;var S=g.getChars();if(this._characterOverlapCache.hasOwnProperty(S))return this._characterOverlapCache[S];this._ctx.save(),this._ctx.font=this._characterFont;var M=Math.floor(this._ctx.measureText(S).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[S]=M,M},p([_(5,o.IBufferService),_(6,o.IOptionsService),_(7,t.ICharacterJoinerService)],u)}(y.BaseRenderLayer);i.TextRenderLayer=r},9616:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseCharAtlas=void 0;var f=function(){function l(){this._didWarmUp=!1}return l.prototype.dispose=function(){},l.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},l.prototype._doWarmUp=function(){},l.prototype.clear=function(){},l.prototype.beginFrame=function(){},l}();i.BaseCharAtlas=f},1420:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireCharAtlas=void 0;var l=f(2040),d=f(1906),p=[];i.acquireCharAtlas=function(_,C,y,a,h){for(var v=(0,l.generateConfig)(a,h,_,y),o=0;o<p.length;o++){var t=(e=p[o]).ownedBy.indexOf(C);if(t>=0){if((0,l.configEquals)(e.config,v))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),p.splice(o,1)):e.ownedBy.splice(t,1);break}}for(o=0;o<p.length;o++){var e=p[o];if((0,l.configEquals)(e.config,v))return e.ownedBy.push(C),e.atlas}var r={atlas:new d.DynamicCharAtlas(document,v),config:v,ownedBy:[C]};return p.push(r),r.atlas},i.removeTerminalFromCache=function(_){for(var C=0;C<p.length;C++){var y=p[C].ownedBy.indexOf(_);if(y!==-1){p[C].ownedBy.length===1?(p[C].atlas.dispose(),p.splice(C,1)):p[C].ownedBy.splice(y,1);break}}}},2040:function(b,i,f){var l=this&&this.__spreadArray||function(p,_,C){if(C||arguments.length===2)for(var y,a=0,h=_.length;a<h;a++)!y&&a in _||(y||(y=Array.prototype.slice.call(_,0,a)),y[a]=_[a]);return p.concat(y||Array.prototype.slice.call(_))};Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;var d=f(643);i.generateConfig=function(p,_,C,y){var a={foreground:y.foreground,background:y.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:l([],y.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:_,fontFamily:C.fontFamily,fontSize:C.fontSize,fontWeight:C.fontWeight,fontWeightBold:C.fontWeightBold,allowTransparency:C.allowTransparency,colors:a}},i.configEquals=function(p,_){for(var C=0;C<p.colors.ansi.length;C++)if(p.colors.ansi[C].rgba!==_.colors.ansi[C].rgba)return!1;return p.devicePixelRatio===_.devicePixelRatio&&p.fontFamily===_.fontFamily&&p.fontSize===_.fontSize&&p.fontWeight===_.fontWeight&&p.fontWeightBold===_.fontWeightBold&&p.allowTransparency===_.allowTransparency&&p.scaledCharWidth===_.scaledCharWidth&&p.scaledCharHeight===_.scaledCharHeight&&p.colors.foreground===_.colors.foreground&&p.colors.background===_.colors.background},i.is256Color=function(p){return p<d.DEFAULT_COLOR}},8803:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CHAR_ATLAS_CELL_SPACING=i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;var l=f(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic",i.CHAR_ATLAS_CELL_SPACING=1},1906:function(b,i,f){var l,d=this&&this.__extends||(l=function(S,M){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(A[E]=w[E])},l(S,M)},function(S,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function A(){this.constructor=S}l(S,M),S.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)});Object.defineProperty(i,"__esModule",{value:!0}),i.NoneCharAtlas=i.DynamicCharAtlas=i.getGlyphCacheKey=void 0;var p=f(8803),_=f(9616),C=f(5680),y=f(7001),a=f(6114),h=f(1752),v=f(4774),o=1024,t=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function r(S){return S.code<<21|S.bg<<12|S.fg<<3|(S.bold?0:4)+(S.dim?0:2)+(S.italic?0:1)}i.getGlyphCacheKey=r;var c=function(S){function M(A,w){var E=S.call(this)||this;E._config=w,E._drawToCacheCount=0,E._glyphsWaitingOnBitmap=[],E._bitmapCommitTimeout=null,E._bitmap=null,E._cacheCanvas=A.createElement("canvas"),E._cacheCanvas.width=o,E._cacheCanvas.height=t,E._cacheCtx=(0,h.throwIfFalsy)(E._cacheCanvas.getContext("2d",{alpha:!0}));var O=A.createElement("canvas");O.width=E._config.scaledCharWidth,O.height=E._config.scaledCharHeight,E._tmpCtx=(0,h.throwIfFalsy)(O.getContext("2d",{alpha:E._config.allowTransparency})),E._width=Math.floor(o/E._config.scaledCharWidth),E._height=Math.floor(t/E._config.scaledCharHeight);var R=E._width*E._height;return E._cacheMap=new y.LRUMap(R),E._cacheMap.prealloc(R),E}return d(M,S),M.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},M.prototype.beginFrame=function(){this._drawToCacheCount=0},M.prototype.clear=function(){if(this._cacheMap.size>0){var A=this._width*this._height;this._cacheMap=new y.LRUMap(A),this._cacheMap.prealloc(A)}this._cacheCtx.clearRect(0,0,o,t),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},M.prototype.draw=function(A,w,E,O){if(w.code===32)return!0;if(!this._canCache(w))return!1;var R=r(w),$=this._cacheMap.get(R);if($!=null)return this._drawFromCache(A,$,E,O),!0;if(this._drawToCacheCount<100){var B;B=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var k=this._drawToCache(w,B);return this._cacheMap.set(R,k),this._drawFromCache(A,k,E,O),!0}return!1},M.prototype._canCache=function(A){return A.code<256},M.prototype._toCoordinateX=function(A){return A%this._width*this._config.scaledCharWidth},M.prototype._toCoordinateY=function(A){return Math.floor(A/this._width)*this._config.scaledCharHeight},M.prototype._drawFromCache=function(A,w,E,O){if(!w.isEmpty){var R=this._toCoordinateX(w.index),$=this._toCoordinateY(w.index);A.drawImage(w.inBitmap?this._bitmap:this._cacheCanvas,R,$,this._config.scaledCharWidth,this._config.scaledCharHeight,E,O,this._config.scaledCharWidth,this._config.scaledCharHeight)}},M.prototype._getColorFromAnsiIndex=function(A){return A<this._config.colors.ansi.length?this._config.colors.ansi[A]:C.DEFAULT_ANSI_COLORS[A]},M.prototype._getBackgroundColor=function(A){return this._config.allowTransparency?e:A.bg===p.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:A.bg<256?this._getColorFromAnsiIndex(A.bg):this._config.colors.background},M.prototype._getForegroundColor=function(A){return A.fg===p.INVERTED_DEFAULT_COLOR?v.color.opaque(this._config.colors.background):A.fg<256?this._getColorFromAnsiIndex(A.fg):this._config.colors.foreground},M.prototype._drawToCache=function(A,w){this._drawToCacheCount++,this._tmpCtx.save();var E=this._getBackgroundColor(A);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=E.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var O=A.bold?this._config.fontWeightBold:this._config.fontWeight,R=A.italic?"italic":"";this._tmpCtx.font=R+" "+O+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=p.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(A).css,A.dim&&(this._tmpCtx.globalAlpha=p.DIM_OPACITY),this._tmpCtx.fillText(A.chars,0,this._config.scaledCharHeight);var $=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),B=!1;if(this._config.allowTransparency||(B=g($,E)),B&&A.chars==="_"&&!this._config.allowTransparency)for(var k=1;k<=5&&(this._tmpCtx.fillText(A.chars,0,this._config.scaledCharHeight-k),B=g($=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),E));k++);this._tmpCtx.restore();var x=this._toCoordinateX(w),H=this._toCoordinateY(w);this._cacheCtx.putImageData($,x,H);var F={index:w,isEmpty:B,inBitmap:!1};return this._addGlyphToBitmap(F),F},M.prototype._addGlyphToBitmap=function(A){var w=this;!("createImageBitmap"in window)||a.isFirefox||a.isSafari||(this._glyphsWaitingOnBitmap.push(A),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return w._generateBitmap()},100)))},M.prototype._generateBitmap=function(){var A=this,w=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(E){A._bitmap=E;for(var O=0;O<w.length;O++)w[O].inBitmap=!0}),this._bitmapCommitTimeout=null},M}(_.BaseCharAtlas);i.DynamicCharAtlas=c;var u=function(S){function M(A,w){return S.call(this)||this}return d(M,S),M.prototype.draw=function(A,w,E,O){return!1},M}(_.BaseCharAtlas);function g(S,M){for(var A=!0,w=M.rgba>>>24,E=M.rgba>>>16&255,O=M.rgba>>>8&255,R=0;R<S.data.length;R+=4)S.data[R]===w&&S.data[R+1]===E&&S.data[R+2]===O?S.data[R+3]=0:A=!1;return A}i.NoneCharAtlas=u},7001:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LRUMap=void 0;var f=function(){function l(d){this.capacity=d,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return l.prototype._unlinkNode=function(d){var p=d.prev,_=d.next;d===this._head&&(this._head=_),d===this._tail&&(this._tail=p),p!==null&&(p.next=_),_!==null&&(_.prev=p)},l.prototype._appendNode=function(d){var p=this._tail;p!==null&&(p.next=d),d.prev=p,d.next=null,this._tail=d,this._head===null&&(this._head=d)},l.prototype.prealloc=function(d){for(var p=this._nodePool,_=0;_<d;_++)p.push({prev:null,next:null,key:null,value:null})},l.prototype.get=function(d){var p=this._map[d];return p!==void 0?(this._unlinkNode(p),this._appendNode(p),p.value):null},l.prototype.peekValue=function(d){var p=this._map[d];return p!==void 0?p.value:null},l.prototype.peek=function(){var d=this._head;return d===null?null:d.value},l.prototype.set=function(d,p){var _=this._map[d];if(_!==void 0)_=this._map[d],this._unlinkNode(_),_.value=p;else if(this.size>=this.capacity)_=this._head,this._unlinkNode(_),delete this._map[_.key],_.key=d,_.value=p,this._map[d]=_;else{var C=this._nodePool;C.length>0?((_=C.pop()).key=d,_.value=p):_={prev:null,next:null,key:d,value:p},this._map[d]=_,this.size++}this._appendNode(_)},l}();i.LRUMap=f},1296:function(b,i,f){var l,d=this&&this.__extends||(l=function(A,w){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,O){E.__proto__=O}||function(E,O){for(var R in O)Object.prototype.hasOwnProperty.call(O,R)&&(E[R]=O[R])},l(A,w)},function(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function E(){this.constructor=A}l(A,w),A.prototype=w===null?Object.create(w):(E.prototype=w.prototype,new E)}),p=this&&this.__decorate||function(A,w,E,O){var R,$=arguments.length,B=$<3?w:O===null?O=Object.getOwnPropertyDescriptor(w,E):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(A,w,E,O);else for(var k=A.length-1;k>=0;k--)(R=A[k])&&(B=($<3?R(B):$>3?R(w,E,B):R(w,E))||B);return $>3&&B&&Object.defineProperty(w,E,B),B},_=this&&this.__param||function(A,w){return function(E,O){w(E,O,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;var C=f(3787),y=f(8803),a=f(844),h=f(4725),v=f(2585),o=f(8460),t=f(4774),e=f(9631),r="xterm-dom-renderer-owner-",c="xterm-fg-",u="xterm-bg-",g="xterm-focus",S=1,M=function(A){function w(E,O,R,$,B,k,x,H,F,z){var N=A.call(this)||this;return N._colors=E,N._element=O,N._screenElement=R,N._viewportElement=$,N._linkifier=B,N._linkifier2=k,N._charSizeService=H,N._optionsService=F,N._bufferService=z,N._terminalClass=S++,N._rowElements=[],N._rowContainer=document.createElement("div"),N._rowContainer.classList.add("xterm-rows"),N._rowContainer.style.lineHeight="normal",N._rowContainer.setAttribute("aria-hidden","true"),N._refreshRowElements(N._bufferService.cols,N._bufferService.rows),N._selectionContainer=document.createElement("div"),N._selectionContainer.classList.add("xterm-selection"),N._selectionContainer.setAttribute("aria-hidden","true"),N.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},N._updateDimensions(),N._injectCss(),N._rowFactory=x.createInstance(C.DomRendererRowFactory,document,N._colors),N._element.classList.add(r+N._terminalClass),N._screenElement.appendChild(N._rowContainer),N._screenElement.appendChild(N._selectionContainer),N._linkifier.onShowLinkUnderline(function(Z){return N._onLinkHover(Z)}),N._linkifier.onHideLinkUnderline(function(Z){return N._onLinkLeave(Z)}),N._linkifier2.onShowLinkUnderline(function(Z){return N._onLinkHover(Z)}),N._linkifier2.onHideLinkUnderline(function(Z){return N._onLinkLeave(Z)}),N}return d(w,A),Object.defineProperty(w.prototype,"onRequestRedraw",{get:function(){return new o.EventEmitter().event},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),(0,e.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),A.prototype.dispose.call(this)},w.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var E=0,O=this._rowElements;E<O.length;E++){var R=O[E];R.style.width=this.dimensions.canvasWidth+"px",R.style.height=this.dimensions.actualCellHeight+"px",R.style.lineHeight=this.dimensions.actualCellHeight+"px",R.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var $=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=$,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},w.prototype.setColors=function(E){this._colors=E,this._injectCss()},w.prototype._injectCss=function(){var E=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var O=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";O+=this._terminalSelector+" span:not(."+C.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+C.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+C.ITALIC_CLASS+" { font-style: italic;}",O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",O+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",O+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+C.CURSOR_CLASS+"."+C.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+C.CURSOR_CLASS+"."+C.CURSOR_BLINK_CLASS+":not(."+C.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+C.CURSOR_CLASS+"."+C.CURSOR_BLINK_CLASS+"."+C.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+C.CURSOR_CLASS+"."+C.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+C.CURSOR_CLASS+"."+C.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+C.CURSOR_CLASS+"."+C.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",O+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(R,$){O+=E._terminalSelector+" ."+c+$+" { color: "+R.css+"; }"+E._terminalSelector+" ."+u+$+" { background-color: "+R.css+"; }"}),O+=this._terminalSelector+" ."+c+y.INVERTED_DEFAULT_COLOR+" { color: "+t.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+u+y.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=O},w.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},w.prototype._refreshRowElements=function(E,O){for(var R=this._rowElements.length;R<=O;R++){var $=document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())},w.prototype.onResize=function(E,O){this._refreshRowElements(E,O),this._updateDimensions()},w.prototype.onCharSizeChanged=function(){this._updateDimensions()},w.prototype.onBlur=function(){this._rowContainer.classList.remove(g)},w.prototype.onFocus=function(){this._rowContainer.classList.add(g)},w.prototype.onSelectionChanged=function(E,O,R){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(E&&O){var $=E[1]-this._bufferService.buffer.ydisp,B=O[1]-this._bufferService.buffer.ydisp,k=Math.max($,0),x=Math.min(B,this._bufferService.rows-1);if(!(k>=this._bufferService.rows||x<0)){var H=document.createDocumentFragment();if(R)H.appendChild(this._createSelectionElement(k,E[0],O[0],x-k+1));else{var F=$===k?E[0]:0,z=k===B?O[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(k,F,z));var N=x-k-1;if(H.appendChild(this._createSelectionElement(k+1,0,this._bufferService.cols,N)),k!==x){var Z=B===x?O[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(x,0,Z))}}this._selectionContainer.appendChild(H)}}},w.prototype._createSelectionElement=function(E,O,R,$){$===void 0&&($=1);var B=document.createElement("div");return B.style.height=$*this.dimensions.actualCellHeight+"px",B.style.top=E*this.dimensions.actualCellHeight+"px",B.style.left=O*this.dimensions.actualCellWidth+"px",B.style.width=this.dimensions.actualCellWidth*(R-O)+"px",B},w.prototype.onCursorMove=function(){},w.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},w.prototype.clear=function(){for(var E=0,O=this._rowElements;E<O.length;E++)O[E].innerText=""},w.prototype.renderRows=function(E,O){for(var R=this._bufferService.buffer.ybase+this._bufferService.buffer.y,$=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,k=E;k<=O;k++){var x=this._rowElements[k];x.innerText="";var H=k+this._bufferService.buffer.ydisp,F=this._bufferService.buffer.lines.get(H),z=this._optionsService.rawOptions.cursorStyle;x.appendChild(this._rowFactory.createRow(F,H,H===R,z,$,B,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(w.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),w.prototype._onLinkHover=function(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!0)},w.prototype._onLinkLeave=function(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!1)},w.prototype._setCellUnderline=function(E,O,R,$,B,k){for(;E!==O||R!==$;){var x=this._rowElements[R];if(!x)return;var H=x.children[E];H&&(H.style.textDecoration=k?"underline":"none"),++E>=B&&(E=0,R++)}},p([_(6,v.IInstantiationService),_(7,h.ICharSizeService),_(8,v.IOptionsService),_(9,v.IBufferService)],w)}(a.Disposable);i.DomRenderer=M},3787:function(b,i,f){var l=this&&this.__decorate||function(e,r,c,u){var g,S=arguments.length,M=S<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(e,r,c,u);else for(var A=e.length-1;A>=0;A--)(g=e[A])&&(M=(S<3?g(M):S>3?g(r,c,M):g(r,c))||M);return S>3&&M&&Object.defineProperty(r,c,M),M},d=this&&this.__param||function(e,r){return function(c,u){r(c,u,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=i.CURSOR_STYLE_UNDERLINE_CLASS=i.CURSOR_STYLE_BAR_CLASS=i.CURSOR_STYLE_BLOCK_CLASS=i.CURSOR_BLINK_CLASS=i.CURSOR_CLASS=i.STRIKETHROUGH_CLASS=i.UNDERLINE_CLASS=i.ITALIC_CLASS=i.DIM_CLASS=i.BOLD_CLASS=void 0;var p=f(8803),_=f(643),C=f(511),y=f(2585),a=f(4774),h=f(4725),v=f(4269);i.BOLD_CLASS="xterm-bold",i.DIM_CLASS="xterm-dim",i.ITALIC_CLASS="xterm-italic",i.UNDERLINE_CLASS="xterm-underline",i.STRIKETHROUGH_CLASS="xterm-strikethrough",i.CURSOR_CLASS="xterm-cursor",i.CURSOR_BLINK_CLASS="xterm-cursor-blink",i.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",i.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",i.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var o=function(){function e(r,c,u,g,S){this._document=r,this._colors=c,this._characterJoinerService=u,this._optionsService=g,this._coreService=S,this._workCell=new C.CellData}return e.prototype.setColors=function(r){this._colors=r},e.prototype.createRow=function(r,c,u,g,S,M,A,w){for(var E=this._document.createDocumentFragment(),O=this._characterJoinerService.getJoinedCharacters(c),R=0,$=Math.min(r.length,w)-1;$>=0;$--)if(r.loadCell($,this._workCell).getCode()!==_.NULL_CELL_CODE||u&&$===S){R=$+1;break}for($=0;$<R;$++){r.loadCell($,this._workCell);var B=this._workCell.getWidth();if(B!==0){var k=!1,x=$,H=this._workCell;if(O.length>0&&$===O[0][0]){k=!0;var F=O.shift();H=new v.JoinedCellData(this._workCell,r.translateToString(!0,F[0],F[1]),F[1]-F[0]),x=F[1]-1,B=H.getWidth()}var z=this._document.createElement("span");if(B>1&&(z.style.width=A*B+"px"),k&&(z.style.display="inline",S>=$&&S<=x&&(S=$)),!this._coreService.isCursorHidden&&u&&$===S)switch(z.classList.add(i.CURSOR_CLASS),M&&z.classList.add(i.CURSOR_BLINK_CLASS),g){case"bar":z.classList.add(i.CURSOR_STYLE_BAR_CLASS);break;case"underline":z.classList.add(i.CURSOR_STYLE_UNDERLINE_CLASS);break;default:z.classList.add(i.CURSOR_STYLE_BLOCK_CLASS)}H.isBold()&&z.classList.add(i.BOLD_CLASS),H.isItalic()&&z.classList.add(i.ITALIC_CLASS),H.isDim()&&z.classList.add(i.DIM_CLASS),H.isUnderline()&&z.classList.add(i.UNDERLINE_CLASS),H.isInvisible()?z.textContent=_.WHITESPACE_CELL_CHAR:z.textContent=H.getChars()||_.WHITESPACE_CELL_CHAR,H.isStrikethrough()&&z.classList.add(i.STRIKETHROUGH_CLASS);var N=H.getFgColor(),Z=H.getFgColorMode(),X=H.getBgColor(),Q=H.getBgColorMode(),D=!!H.isInverse();if(D){var U=N;N=X,X=U;var P=Z;Z=Q,Q=P}switch(Z){case 16777216:case 33554432:H.isBold()&&N<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(N+=8),this._applyMinimumContrast(z,this._colors.background,this._colors.ansi[N])||z.classList.add("xterm-fg-"+N);break;case 50331648:var I=a.rgba.toColor(N>>16&255,N>>8&255,255&N);this._applyMinimumContrast(z,this._colors.background,I)||this._addStyle(z,"color:#"+t(N.toString(16),"0",6));break;default:this._applyMinimumContrast(z,this._colors.background,this._colors.foreground)||D&&z.classList.add("xterm-fg-"+p.INVERTED_DEFAULT_COLOR)}switch(Q){case 16777216:case 33554432:z.classList.add("xterm-bg-"+X);break;case 50331648:this._addStyle(z,"background-color:#"+t(X.toString(16),"0",6));break;default:D&&z.classList.add("xterm-bg-"+p.INVERTED_DEFAULT_COLOR)}E.appendChild(z),$=x}}return E},e.prototype._applyMinimumContrast=function(r,c,u){if(this._optionsService.rawOptions.minimumContrastRatio===1)return!1;var g=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return g===void 0&&(g=a.color.ensureContrastRatio(c,u,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,g!=null?g:null)),!!g&&(this._addStyle(r,"color:"+g.css),!0)},e.prototype._addStyle=function(r,c){r.setAttribute("style",""+(r.getAttribute("style")||"")+c+";")},l([d(2,h.ICharacterJoinerService),d(3,y.IOptionsService),d(4,y.ICoreService)],e)}();function t(e,r,c){for(;e.length<c;)e=r+e;return e}i.DomRendererRowFactory=o},456:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0;var f=function(){function l(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}return l.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(l.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),l.prototype.areSelectionValuesReversed=function(){var d=this.selectionStart,p=this.selectionEnd;return!(!d||!p)&&(d[1]>p[1]||d[1]===p[1]&&d[0]>p[0])},l.prototype.onTrim=function(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},l}();i.SelectionModel=f},428:function(b,i,f){var l=this&&this.__decorate||function(a,h,v,o){var t,e=arguments.length,r=e<3?h:o===null?o=Object.getOwnPropertyDescriptor(h,v):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,h,v,o);else for(var c=a.length-1;c>=0;c--)(t=a[c])&&(r=(e<3?t(r):e>3?t(h,v,r):t(h,v))||r);return e>3&&r&&Object.defineProperty(h,v,r),r},d=this&&this.__param||function(a,h){return function(v,o){h(v,o,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;var p=f(2585),_=f(8460),C=function(){function a(h,v,o){this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=new _.EventEmitter,this._measureStrategy=new y(h,v,this._optionsService)}return Object.defineProperty(a.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),a.prototype.measure=function(){var h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())},l([d(2,p.IOptionsService)],a)}();i.CharSizeService=C;var y=function(){function a(h,v,o){this._document=h,this._parentElement=v,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return a.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var h=this._measureElement.getBoundingClientRect();return h.width!==0&&h.height!==0&&(this._result.width=h.width,this._result.height=Math.ceil(h.height)),this._result},a}()},4269:function(b,i,f){var l,d=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(r[u]=c[u])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),p=this&&this.__decorate||function(t,e,r,c){var u,g=arguments.length,S=g<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,r):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,e,r,c);else for(var M=t.length-1;M>=0;M--)(u=t[M])&&(S=(g<3?u(S):g>3?u(e,r,S):u(e,r))||S);return g>3&&S&&Object.defineProperty(e,r,S),S},_=this&&this.__param||function(t,e){return function(r,c){e(r,c,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;var C=f(3734),y=f(643),a=f(511),h=f(2585),v=function(t){function e(r,c,u){var g=t.call(this)||this;return g.content=0,g.combinedData="",g.fg=r.fg,g.bg=r.bg,g.combinedData=c,g._width=u,g}return d(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(r){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(C.AttributeData);i.JoinedCellData=v;var o=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}return t.prototype.register=function(e){var r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id},t.prototype.deregister=function(e){for(var r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];for(var c=[],u=r.translateToString(!0),g=0,S=0,M=0,A=r.getFg(0),w=r.getBg(0),E=0;E<r.getTrimmedLength();E++)if(r.loadCell(E,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==A||this._workCell.bg!==w){if(E-g>1)for(var O=this._getJoinedRanges(u,M,S,r,g),R=0;R<O.length;R++)c.push(O[R]);g=E,M=S,A=this._workCell.fg,w=this._workCell.bg}S+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1)for(O=this._getJoinedRanges(u,M,S,r,g),R=0;R<O.length;R++)c.push(O[R]);return c},t.prototype._getJoinedRanges=function(e,r,c,u,g){var S=e.substring(r,c),M=[];try{M=this._characterJoiners[0].handler(S)}catch(O){console.error(O)}for(var A=1;A<this._characterJoiners.length;A++)try{for(var w=this._characterJoiners[A].handler(S),E=0;E<w.length;E++)t._mergeRanges(M,w[E])}catch(O){console.error(O)}return this._stringRangesToCellRanges(M,u,g),M},t.prototype._stringRangesToCellRanges=function(e,r,c){var u=0,g=!1,S=0,M=e[u];if(M){for(var A=c;A<this._bufferService.cols;A++){var w=r.getWidth(A),E=r.getString(A).length||y.WHITESPACE_CELL_CHAR.length;if(w!==0){if(!g&&M[0]<=S&&(M[0]=A,g=!0),M[1]<=S){if(M[1]=A,!(M=e[++u]))break;M[0]<=S?(M[0]=A,g=!0):g=!1}S+=E}}M&&(M[1]=this._bufferService.cols)}},t._mergeRanges=function(e,r){for(var c=!1,u=0;u<e.length;u++){var g=e[u];if(c){if(r[1]<=g[0])return e[u-1][1]=r[1],e;if(r[1]<=g[1])return e[u-1][1]=Math.max(r[1],g[1]),e.splice(u,1),e;e.splice(u,1),u--}else{if(r[1]<=g[0])return e.splice(u,0,r),e;if(r[1]<=g[1])return g[0]=Math.min(r[0],g[0]),e;r[0]<g[1]&&(g[0]=Math.min(r[0],g[0]),c=!0)}}return c?e[e.length-1][1]=r[1]:e.push(r),e},t=p([_(0,h.IBufferService)],t)}();i.CharacterJoinerService=o},5114:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;var f=function(){function l(d){this._textarea=d}return Object.defineProperty(l.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),l}();i.CoreBrowserService=f},7641:function(b,i,f){var l,d=this&&this.__extends||(l=function(o,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])},l(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}l(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(o,t,e,r){var c,u=arguments.length,g=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,t,e,r);else for(var S=o.length-1;S>=0;S--)(c=o[S])&&(g=(u<3?c(g):u>3?c(t,e,g):c(t,e))||g);return u>3&&g&&Object.defineProperty(t,e,g),g},_=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Decoration=i.DecorationService=void 0;var C=f(8460),y=f(844),a=f(2585),h=function(o){function t(e){var r=o.call(this)||this;return r._instantiationService=e,r._decorations=[],r}return d(t,o),t.prototype.attachToDom=function(e,r){var c=this;this._renderService=r,this._screenElement=e,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),e.appendChild(this._container),this.register(this._renderService.onRenderedBufferChange(function(){return c.refresh()})),this.register(this._renderService.onDimensionsChange(function(){return c.refresh(!0)}))},t.prototype.registerDecoration=function(e){var r=this;if(!e.marker.isDisposed&&this._container){var c=this._instantiationService.createInstance(v,e,this._container);return this._decorations.push(c),c.onDispose(function(){return r._decorations.splice(r._decorations.indexOf(c),1)}),this._queueRefresh(),c}},t.prototype._queueRefresh=function(){var e=this;this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){e.refresh(),e._animationFrame=void 0}))},t.prototype.refresh=function(e){if(this._renderService)for(var r=0,c=this._decorations;r<c.length;r++)c[r].render(this._renderService,e)},t.prototype.dispose=function(){for(var e=0,r=this._decorations;e<r.length;e++)r[e].dispose();this._screenElement&&this._container&&this._screenElement.contains(this._container)&&this._screenElement.removeChild(this._container)},p([_(0,a.IInstantiationService)],t)}(y.Disposable);i.DecorationService=h;var v=function(o){function t(e,r,c){var u,g=o.call(this)||this;return g._container=r,g._bufferService=c,g.isDisposed=!1,g._onDispose=new C.EventEmitter,g._onRender=new C.EventEmitter,g.x=(u=e.x)!==null&&u!==void 0?u:0,g._marker=e.marker,g._marker.onDispose(function(){return g.dispose()}),g.anchor=e.anchor||"left",g.width=e.width||1,g.height=e.height||1,g}return d(t,o),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),t.prototype.render=function(e,r){this._element&&!r||this._createElement(e,r),this._container&&this._element&&!this._container.contains(this._element)&&this._container.append(this._element),this._refreshStyle(e),this._element&&this._onRender.fire(this._element)},t.prototype._createElement=function(e,r){r&&this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this._element=document.createElement("div"),this._element.classList.add("xterm-decoration"),this._element.style.width=this.width*e.dimensions.actualCellWidth+"px",this._element.style.height=this.height*e.dimensions.actualCellHeight+"px",this._element.style.top=(this.marker.line-this._bufferService.buffers.active.ydisp)*e.dimensions.actualCellHeight+"px",this._element.style.lineHeight=e.dimensions.actualCellHeight+"px",this.x&&this.x>this._bufferService.cols&&(this._element.style.display="none"),this.anchor==="right"?this._element.style.right=this.x?this.x*e.dimensions.actualCellWidth+"px":"":this._element.style.left=this.x?this.x*e.dimensions.actualCellWidth+"px":""},t.prototype._refreshStyle=function(e){if(this._element){var r=this.marker.line-this._bufferService.buffers.active.ydisp;r<0||r>this._bufferService.rows?this._element.style.display="none":(this._element.style.top=r*e.dimensions.actualCellHeight+"px",this._element.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block")}},t.prototype.dispose=function(){this.isDisposed||(this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this.isDisposed=!0,this._onDispose.fire())},p([_(2,a.IBufferService)],t)}(y.Disposable);i.Decoration=v},8934:function(b,i,f){var l=this&&this.__decorate||function(y,a,h,v){var o,t=arguments.length,e=t<3?a:v===null?v=Object.getOwnPropertyDescriptor(a,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(y,a,h,v);else for(var r=y.length-1;r>=0;r--)(o=y[r])&&(e=(t<3?o(e):t>3?o(a,h,e):o(a,h))||e);return t>3&&e&&Object.defineProperty(a,h,e),e},d=this&&this.__param||function(y,a){return function(h,v){a(h,v,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;var p=f(4725),_=f(9806),C=function(){function y(a,h){this._renderService=a,this._charSizeService=h}return y.prototype.getCoords=function(a,h,v,o,t){return(0,_.getCoords)(a,h,v,o,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},y.prototype.getRawByteCoords=function(a,h,v,o){var t=this.getCoords(a,h,v,o);return(0,_.getRawByteCoords)(t)},l([d(0,p.IRenderService),d(1,p.ICharSizeService)],y)}();i.MouseService=C},3230:function(b,i,f){var l,d=this&&this.__extends||(l=function(r,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&(u[S]=g[S])},l(r,c)},function(r,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function u(){this.constructor=r}l(r,c),r.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}),p=this&&this.__decorate||function(r,c,u,g){var S,M=arguments.length,A=M<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,u):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(r,c,u,g);else for(var w=r.length-1;w>=0;w--)(S=r[w])&&(A=(M<3?S(A):M>3?S(c,u,A):S(c,u))||A);return M>3&&A&&Object.defineProperty(c,u,A),A},_=this&&this.__param||function(r,c){return function(u,g){c(u,g,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;var C=f(6193),y=f(8460),a=f(844),h=f(5596),v=f(3656),o=f(2585),t=f(4725),e=function(r){function c(u,g,S,M,A,w){var E=r.call(this)||this;if(E._renderer=u,E._rowCount=g,E._charSizeService=A,E._isPaused=!1,E._needsFullRefresh=!1,E._isNextRenderRedrawOnly=!0,E._needsSelectionRefresh=!1,E._canvasWidth=0,E._canvasHeight=0,E._selectionState={start:void 0,end:void 0,columnSelectMode:!1},E._onDimensionsChange=new y.EventEmitter,E._onRender=new y.EventEmitter,E._onRefreshRequest=new y.EventEmitter,E.register({dispose:function(){return E._renderer.dispose()}}),E._renderDebouncer=new C.RenderDebouncer(function(R,$){return E._renderRows(R,$)}),E.register(E._renderDebouncer),E._screenDprMonitor=new h.ScreenDprMonitor,E._screenDprMonitor.setListener(function(){return E.onDevicePixelRatioChange()}),E.register(E._screenDprMonitor),E.register(w.onResize(function(){return E._fullRefresh()})),E.register(w.buffers.onBufferActivate(function(){var R;return(R=E._renderer)===null||R===void 0?void 0:R.clear()})),E.register(M.onOptionChange(function(){return E._renderer.onOptionsChanged()})),E.register(E._charSizeService.onCharSizeChange(function(){return E.onCharSizeChanged()})),E._renderer.onRequestRedraw(function(R){return E.refreshRows(R.start,R.end,!0)}),E.register((0,v.addDisposableDomListener)(window,"resize",function(){return E.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var O=new IntersectionObserver(function(R){return E._onIntersectionChange(R[R.length-1])},{threshold:0});O.observe(S),E.register({dispose:function(){return O.disconnect()}})}return E}return d(c,r),Object.defineProperty(c.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),c.prototype._onIntersectionChange=function(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},c.prototype.refreshRows=function(u,g,S){S===void 0&&(S=!1),this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,g,this._rowCount))},c.prototype._renderRows=function(u,g){this._renderer.renderRows(u,g),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:u,end:g}),this._isNextRenderRedrawOnly=!0},c.prototype.resize=function(u,g){this._rowCount=g,this._fireOnCanvasResize()},c.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},c.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},c.prototype.dispose=function(){r.prototype.dispose.call(this)},c.prototype.setRenderer=function(u){var g=this;this._renderer.dispose(),this._renderer=u,this._renderer.onRequestRedraw(function(S){return g.refreshRows(S.start,S.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},c.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},c.prototype.clearTextureAtlas=function(){var u,g;(g=(u=this._renderer)===null||u===void 0?void 0:u.clearTextureAtlas)===null||g===void 0||g.call(u),this._fullRefresh()},c.prototype.setColors=function(u){this._renderer.setColors(u),this._fullRefresh()},c.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},c.prototype.onResize=function(u,g){this._renderer.onResize(u,g),this._fullRefresh()},c.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},c.prototype.onBlur=function(){this._renderer.onBlur()},c.prototype.onFocus=function(){this._renderer.onFocus()},c.prototype.onSelectionChanged=function(u,g,S){this._selectionState.start=u,this._selectionState.end=g,this._selectionState.columnSelectMode=S,this._renderer.onSelectionChanged(u,g,S)},c.prototype.onCursorMove=function(){this._renderer.onCursorMove()},c.prototype.clear=function(){this._renderer.clear()},p([_(3,o.IOptionsService),_(4,t.ICharSizeService),_(5,o.IBufferService)],c)}(a.Disposable);i.RenderService=e},9312:function(b,i,f){var l,d=this&&this.__extends||(l=function(M,A){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(w[O]=E[O])},l(M,A)},function(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function w(){this.constructor=M}l(M,A),M.prototype=A===null?Object.create(A):(w.prototype=A.prototype,new w)}),p=this&&this.__decorate||function(M,A,w,E){var O,R=arguments.length,$=R<3?A:E===null?E=Object.getOwnPropertyDescriptor(A,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(M,A,w,E);else for(var B=M.length-1;B>=0;B--)(O=M[B])&&($=(R<3?O($):R>3?O(A,w,$):O(A,w))||$);return R>3&&$&&Object.defineProperty(A,w,$),$},_=this&&this.__param||function(M,A){return function(w,E){A(w,E,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;var C=f(6114),y=f(456),a=f(511),h=f(8460),v=f(4725),o=f(2585),t=f(9806),e=f(9504),r=f(844),c=f(4841),u=String.fromCharCode(160),g=new RegExp(u,"g"),S=function(M){function A(w,E,O,R,$,B,k,x){var H=M.call(this)||this;return H._element=w,H._screenElement=E,H._linkifier=O,H._bufferService=R,H._coreService=$,H._mouseService=B,H._optionsService=k,H._renderService=x,H._dragScrollAmount=0,H._enabled=!0,H._workCell=new a.CellData,H._mouseDownTimeStamp=0,H._oldHasSelection=!1,H._oldSelectionStart=void 0,H._oldSelectionEnd=void 0,H._onLinuxMouseSelection=H.register(new h.EventEmitter),H._onRedrawRequest=H.register(new h.EventEmitter),H._onSelectionChange=H.register(new h.EventEmitter),H._onRequestScrollLines=H.register(new h.EventEmitter),H._mouseMoveListener=function(F){return H._onMouseMove(F)},H._mouseUpListener=function(F){return H._onMouseUp(F)},H._coreService.onUserInput(function(){H.hasSelection&&H.clearSelection()}),H._trimListener=H._bufferService.buffer.lines.onTrim(function(F){return H._onTrim(F)}),H.register(H._bufferService.buffers.onBufferActivate(function(F){return H._onBufferActivate(F)})),H.enable(),H._model=new y.SelectionModel(H._bufferService),H._activeSelectionMode=0,H}return d(A,M),Object.defineProperty(A.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){this._removeMouseDownListeners()},A.prototype.reset=function(){this.clearSelection()},A.prototype.disable=function(){this.clearSelection(),this._enabled=!1},A.prototype.enable=function(){this._enabled=!0},Object.defineProperty(A.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"hasSelection",{get:function(){var w=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!w||!E||w[0]===E[0]&&w[1]===E[1])},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"selectionText",{get:function(){var w=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!w||!E)return"";var O=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(w[0]===E[0])return"";for(var $=w[1];$<=E[1];$++){var B=O.translateBufferLineToString($,!0,w[0],E[0]);R.push(B)}}else{var k=w[1]===E[1]?E[0]:void 0;for(R.push(O.translateBufferLineToString(w[1],!0,w[0],k)),$=w[1]+1;$<=E[1]-1;$++){var x=O.lines.get($);B=O.translateBufferLineToString($,!0),x!=null&&x.isWrapped?R[R.length-1]+=B:R.push(B)}w[1]!==E[1]&&(x=O.lines.get(E[1]),B=O.translateBufferLineToString(E[1],!0,0,E[0]),x&&x.isWrapped?R[R.length-1]+=B:R.push(B))}return R.map(function(H){return H.replace(g," ")}).join(C.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),A.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},A.prototype.refresh=function(w){var E=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return E._refresh()})),C.isLinux&&w&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},A.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},A.prototype._isClickInSelection=function(w){var E=this._getMouseBufferCoords(w),O=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(O&&R&&E)&&this._areCoordsInSelection(E,O,R)},A.prototype._areCoordsInSelection=function(w,E,O){return w[1]>E[1]&&w[1]<O[1]||E[1]===O[1]&&w[1]===E[1]&&w[0]>=E[0]&&w[0]<O[0]||E[1]<O[1]&&w[1]===O[1]&&w[0]<O[0]||E[1]<O[1]&&w[1]===E[1]&&w[0]>=E[0]},A.prototype._selectWordAtCursor=function(w,E){var O,R,$=(R=(O=this._linkifier.currentLink)===null||O===void 0?void 0:O.link)===null||R===void 0?void 0:R.range;if($)return this._model.selectionStart=[$.start.x-1,$.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)($,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var B=this._getMouseBufferCoords(w);return!!B&&(this._selectWordAt(B,E),this._model.selectionEnd=void 0,!0)},A.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},A.prototype.selectLines=function(w,E){this._model.clearSelection(),w=Math.max(w,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,w],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()},A.prototype._onTrim=function(w){this._model.onTrim(w)&&this.refresh()},A.prototype._getMouseBufferCoords=function(w){var E=this._mouseService.getCoords(w,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E},A.prototype._getMouseEventScrollAmount=function(w){var E=(0,t.getCoordsRelativeToElement)(w,this._screenElement)[1],O=this._renderService.dimensions.canvasHeight;return E>=0&&E<=O?0:(E>O&&(E-=O),E=Math.min(Math.max(E,-50),50),(E/=50)/Math.abs(E)+Math.round(14*E))},A.prototype.shouldForceSelection=function(w){return C.isMac?w.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:w.shiftKey},A.prototype.onMouseDown=function(w){if(this._mouseDownTimeStamp=w.timeStamp,(w.button!==2||!this.hasSelection)&&w.button===0){if(!this._enabled){if(!this.shouldForceSelection(w))return;w.stopPropagation()}w.preventDefault(),this._dragScrollAmount=0,this._enabled&&w.shiftKey?this._onIncrementalClick(w):w.detail===1?this._onSingleClick(w):w.detail===2?this._onDoubleClick(w):w.detail===3&&this._onTripleClick(w),this._addMouseDownListeners(),this.refresh(!0)}},A.prototype._addMouseDownListeners=function(){var w=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return w._dragScroll()},50)},A.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},A.prototype._onIncrementalClick=function(w){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(w))},A.prototype._onSingleClick=function(w){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(w)?3:0,this._model.selectionStart=this._getMouseBufferCoords(w),this._model.selectionStart){this._model.selectionEnd=void 0;var E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},A.prototype._onDoubleClick=function(w){this._selectWordAtCursor(w,!0)&&(this._activeSelectionMode=1)},A.prototype._onTripleClick=function(w){var E=this._getMouseBufferCoords(w);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))},A.prototype.shouldColumnSelect=function(w){return w.altKey&&!(C.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},A.prototype._onMouseMove=function(w){if(w.stopImmediatePropagation(),this._model.selectionStart){var E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(w),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(w),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var O=this._bufferService.buffer;if(this._model.selectionEnd[1]<O.lines.length){var R=O.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},A.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var w=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(w.ydisp+this._bufferService.rows,w.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=w.ydisp),this.refresh()}},A.prototype._onMouseUp=function(w){var E=w.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&w.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var O=this._mouseService.getCoords(w,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(O&&O[0]!==void 0&&O[1]!==void 0){var R=(0,e.moveToCellSequence)(O[0]-1,O[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()},A.prototype._fireEventIfSelectionChanged=function(){var w=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,O=!(!w||!E||w[0]===E[0]&&w[1]===E[1]);O?w&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&w[0]===this._oldSelectionStart[0]&&w[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(w,E,O)):this._oldHasSelection&&this._fireOnSelectionChange(w,E,O)},A.prototype._fireOnSelectionChange=function(w,E,O){this._oldSelectionStart=w,this._oldSelectionEnd=E,this._oldHasSelection=O,this._onSelectionChange.fire()},A.prototype._onBufferActivate=function(w){var E=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=w.activeBuffer.lines.onTrim(function(O){return E._onTrim(O)})},A.prototype._convertViewportColToCharacterIndex=function(w,E){for(var O=E[0],R=0;E[0]>=R;R++){var $=w.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?O--:$>1&&E[0]!==R&&(O+=$-1)}return O},A.prototype.setSelection=function(w,E,O){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[w,E],this._model.selectionStartLength=O,this.refresh()},A.prototype.rightClickSelect=function(w){this._isClickInSelection(w)||(this._selectWordAtCursor(w,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},A.prototype._getWordAt=function(w,E,O,R){if(O===void 0&&(O=!0),R===void 0&&(R=!0),!(w[0]>=this._bufferService.cols)){var $=this._bufferService.buffer,B=$.lines.get(w[1]);if(B){var k=$.translateBufferLineToString(w[1],!1),x=this._convertViewportColToCharacterIndex(B,w),H=x,F=w[0]-x,z=0,N=0,Z=0,X=0;if(k.charAt(x)===" "){for(;x>0&&k.charAt(x-1)===" ";)x--;for(;H<k.length&&k.charAt(H+1)===" ";)H++}else{var Q=w[0],D=w[0];B.getWidth(Q)===0&&(z++,Q--),B.getWidth(D)===2&&(N++,D++);var U=B.getString(D).length;for(U>1&&(X+=U-1,H+=U-1);Q>0&&x>0&&!this._isCharWordSeparator(B.loadCell(Q-1,this._workCell));){B.loadCell(Q-1,this._workCell);var P=this._workCell.getChars().length;this._workCell.getWidth()===0?(z++,Q--):P>1&&(Z+=P-1,x-=P-1),x--,Q--}for(;D<B.length&&H+1<k.length&&!this._isCharWordSeparator(B.loadCell(D+1,this._workCell));){B.loadCell(D+1,this._workCell);var I=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,D++):I>1&&(X+=I-1,H+=I-1),H++,D++}}H++;var T=x+F-z+Z,G=Math.min(this._bufferService.cols,H-x+z+N-Z-X);if(E||k.slice(x,H).trim()!==""){if(O&&T===0&&B.getCodePoint(0)!==32){var J=$.lines.get(w[1]-1);if(J&&B.isWrapped&&J.getCodePoint(this._bufferService.cols-1)!==32){var Y=this._getWordAt([this._bufferService.cols-1,w[1]-1],!1,!0,!1);if(Y){var re=this._bufferService.cols-Y.start;T-=re,G+=re}}}if(R&&T+G===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){var ne=$.lines.get(w[1]+1);if((ne==null?void 0:ne.isWrapped)&&ne.getCodePoint(0)!==32){var ve=this._getWordAt([0,w[1]+1],!1,!1,!0);ve&&(G+=ve.length)}}return{start:T,length:G}}}}},A.prototype._selectWordAt=function(w,E){var O=this._getWordAt(w,E);if(O){for(;O.start<0;)O.start+=this._bufferService.cols,w[1]--;this._model.selectionStart=[O.start,w[1]],this._model.selectionStartLength=O.length}},A.prototype._selectToWordAt=function(w){var E=this._getWordAt(w,!0);if(E){for(var O=w[1];E.start<0;)E.start+=this._bufferService.cols,O--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,O++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,O]}},A.prototype._isCharWordSeparator=function(w){return w.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(w.getChars())>=0},A.prototype._selectLineAt=function(w){var E=this._bufferService.buffer.getWrappedRangeForLine(w);this._model.selectionStart=[0,E.first],this._model.selectionEnd=[this._bufferService.cols,E.last],this._model.selectionStartLength=0},p([_(3,o.IBufferService),_(4,o.ICoreService),_(5,v.IMouseService),_(6,o.IOptionsService),_(7,v.IRenderService)],A)}(r.Disposable);i.SelectionService=S},4725:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.ICharacterJoinerService=i.ISoundService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;var l=f(8343);i.ICharSizeService=(0,l.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),i.IMouseService=(0,l.createDecorator)("MouseService"),i.IRenderService=(0,l.createDecorator)("RenderService"),i.ISelectionService=(0,l.createDecorator)("SelectionService"),i.ISoundService=(0,l.createDecorator)("SoundService"),i.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),i.IDecorationService=(0,l.createDecorator)("DecorationService")},357:function(b,i,f){var l=this&&this.__decorate||function(C,y,a,h){var v,o=arguments.length,t=o<3?y:h===null?h=Object.getOwnPropertyDescriptor(y,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(C,y,a,h);else for(var e=C.length-1;e>=0;e--)(v=C[e])&&(t=(o<3?v(t):o>3?v(y,a,t):v(y,a))||t);return o>3&&t&&Object.defineProperty(y,a,t),t},d=this&&this.__param||function(C,y){return function(a,h){y(a,h,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SoundService=void 0;var p=f(2585),_=function(){function C(y){this._optionsService=y}return Object.defineProperty(C,"audioContext",{get:function(){if(!C._audioContext){var y=window.AudioContext||window.webkitAudioContext;if(!y)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;C._audioContext=new y}return C._audioContext},enumerable:!1,configurable:!0}),C.prototype.playBellSound=function(){var y=C.audioContext;if(y){var a=y.createBufferSource();y.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(h){a.buffer=h,a.connect(y.destination),a.start(0)})}},C.prototype._base64ToArrayBuffer=function(y){for(var a=window.atob(y),h=a.length,v=new Uint8Array(h),o=0;o<h;o++)v[o]=a.charCodeAt(o);return v.buffer},C.prototype._removeMimeType=function(y){return y.split(",")[1]},C=l([d(0,p.IOptionsService)],C)}();i.SoundService=_},6349:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;var l=f(8460),d=function(){function p(_){this._maxLength=_,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(p.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"maxLength",{get:function(){return this._maxLength},set:function(_){if(this._maxLength!==_){for(var C=new Array(_),y=0;y<Math.min(_,this.length);y++)C[y]=this._array[this._getCyclicIndex(y)];this._array=C,this._maxLength=_,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"length",{get:function(){return this._length},set:function(_){if(_>this._length)for(var C=this._length;C<_;C++)this._array[C]=void 0;this._length=_},enumerable:!1,configurable:!0}),p.prototype.get=function(_){return this._array[this._getCyclicIndex(_)]},p.prototype.set=function(_,C){this._array[this._getCyclicIndex(_)]=C},p.prototype.push=function(_){this._array[this._getCyclicIndex(this._length)]=_,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},p.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(p.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),p.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},p.prototype.splice=function(_,C){for(var y=[],a=2;a<arguments.length;a++)y[a-2]=arguments[a];if(C){for(var h=_;h<this._length-C;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+C)];this._length-=C,this.onDeleteEmitter.fire({index:_,amount:C})}for(h=this._length-1;h>=_;h--)this._array[this._getCyclicIndex(h+y.length)]=this._array[this._getCyclicIndex(h)];for(h=0;h<y.length;h++)this._array[this._getCyclicIndex(_+h)]=y[h];if(y.length&&this.onInsertEmitter.fire({index:_,amount:y.length}),this._length+y.length>this._maxLength){var v=this._length+y.length-this._maxLength;this._startIndex+=v,this._length=this._maxLength,this.onTrimEmitter.fire(v)}else this._length+=y.length},p.prototype.trimStart=function(_){_>this._length&&(_=this._length),this._startIndex+=_,this._length-=_,this.onTrimEmitter.fire(_)},p.prototype.shiftElements=function(_,C,y){if(!(C<=0)){if(_<0||_>=this._length)throw new Error("start argument out of range");if(_+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(var a=C-1;a>=0;a--)this.set(_+a+y,this.get(_+a));var h=_+C+y-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(a=0;a<C;a++)this.set(_+a+y,this.get(_+a))}},p.prototype._getCyclicIndex=function(_){return(this._startIndex+_)%this._maxLength},p}();i.CircularList=d},1439:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function f(l,d){if(d===void 0&&(d=5),typeof l!="object")return l;var p=Array.isArray(l)?[]:{};for(var _ in l)p[_]=d<=1?l[_]:l[_]&&f(l[_],d-1);return p}},8969:function(b,i,f){var l,d=this&&this.__extends||(l=function(w,E){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,R){O.__proto__=R}||function(O,R){for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&(O[$]=R[$])},l(w,E)},function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=w}l(w,E),w.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)});Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;var p=f(844),_=f(2585),C=f(4348),y=f(7866),a=f(744),h=f(7302),v=f(6975),o=f(8460),t=f(1753),e=f(3730),r=f(1480),c=f(7994),u=f(9282),g=f(5435),S=f(5981),M=!1,A=function(w){function E(O){var R=w.call(this)||this;return R._onBinary=new o.EventEmitter,R._onData=new o.EventEmitter,R._onLineFeed=new o.EventEmitter,R._onResize=new o.EventEmitter,R._onScroll=new o.EventEmitter,R._instantiationService=new C.InstantiationService,R.optionsService=new h.OptionsService(O),R._instantiationService.setService(_.IOptionsService,R.optionsService),R._bufferService=R.register(R._instantiationService.createInstance(a.BufferService)),R._instantiationService.setService(_.IBufferService,R._bufferService),R._logService=R._instantiationService.createInstance(y.LogService),R._instantiationService.setService(_.ILogService,R._logService),R.coreService=R.register(R._instantiationService.createInstance(v.CoreService,function(){return R.scrollToBottom()})),R._instantiationService.setService(_.ICoreService,R.coreService),R.coreMouseService=R._instantiationService.createInstance(t.CoreMouseService),R._instantiationService.setService(_.ICoreMouseService,R.coreMouseService),R._dirtyRowService=R._instantiationService.createInstance(e.DirtyRowService),R._instantiationService.setService(_.IDirtyRowService,R._dirtyRowService),R.unicodeService=R._instantiationService.createInstance(r.UnicodeService),R._instantiationService.setService(_.IUnicodeService,R.unicodeService),R._charsetService=R._instantiationService.createInstance(c.CharsetService),R._instantiationService.setService(_.ICharsetService,R._charsetService),R._inputHandler=new g.InputHandler(R._bufferService,R._charsetService,R.coreService,R._dirtyRowService,R._logService,R.optionsService,R.coreMouseService,R.unicodeService),R.register((0,o.forwardEvent)(R._inputHandler.onLineFeed,R._onLineFeed)),R.register(R._inputHandler),R.register((0,o.forwardEvent)(R._bufferService.onResize,R._onResize)),R.register((0,o.forwardEvent)(R.coreService.onData,R._onData)),R.register((0,o.forwardEvent)(R.coreService.onBinary,R._onBinary)),R.register(R.optionsService.onOptionChange(function($){return R._updateOptions($)})),R.register(R._bufferService.onScroll(function($){R._onScroll.fire({position:R._bufferService.buffer.ydisp,source:0}),R._dirtyRowService.markRangeDirty(R._bufferService.buffer.scrollTop,R._bufferService.buffer.scrollBottom)})),R.register(R._inputHandler.onScroll(function($){R._onScroll.fire({position:R._bufferService.buffer.ydisp,source:0}),R._dirtyRowService.markRangeDirty(R._bufferService.buffer.scrollTop,R._bufferService.buffer.scrollBottom)})),R._writeBuffer=new S.WriteBuffer(function($,B){return R._inputHandler.parse($,B)}),R}return d(E,w),Object.defineProperty(E.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onScroll",{get:function(){var O=this;return this._onScrollApi||(this._onScrollApi=new o.EventEmitter,this.register(this._onScroll.event(function(R){var $;($=O._onScrollApi)===null||$===void 0||$.fire(R.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"options",{get:function(){return this.optionsService.options},set:function(O){for(var R in O)this.optionsService.options[R]=O[R]},enumerable:!1,configurable:!0}),E.prototype.dispose=function(){var O;this._isDisposed||(w.prototype.dispose.call(this),(O=this._windowsMode)===null||O===void 0||O.dispose(),this._windowsMode=void 0)},E.prototype.write=function(O,R){this._writeBuffer.write(O,R)},E.prototype.writeSync=function(O,R){this._logService.logLevel<=_.LogLevelEnum.WARN&&!M&&(this._logService.warn("writeSync is unreliable and will be removed soon."),M=!0),this._writeBuffer.writeSync(O,R)},E.prototype.resize=function(O,R){isNaN(O)||isNaN(R)||(O=Math.max(O,a.MINIMUM_COLS),R=Math.max(R,a.MINIMUM_ROWS),this._bufferService.resize(O,R))},E.prototype.scroll=function(O,R){R===void 0&&(R=!1),this._bufferService.scroll(O,R)},E.prototype.scrollLines=function(O,R,$){this._bufferService.scrollLines(O,R,$)},E.prototype.scrollPages=function(O){this._bufferService.scrollPages(O)},E.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},E.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},E.prototype.scrollToLine=function(O){this._bufferService.scrollToLine(O)},E.prototype.registerEscHandler=function(O,R){return this._inputHandler.registerEscHandler(O,R)},E.prototype.registerDcsHandler=function(O,R){return this._inputHandler.registerDcsHandler(O,R)},E.prototype.registerCsiHandler=function(O,R){return this._inputHandler.registerCsiHandler(O,R)},E.prototype.registerOscHandler=function(O,R){return this._inputHandler.registerOscHandler(O,R)},E.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},E.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},E.prototype._updateOptions=function(O){var R;switch(O){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((R=this._windowsMode)===null||R===void 0||R.dispose(),this._windowsMode=void 0)}},E.prototype._enableWindowsMode=function(){var O=this;if(!this._windowsMode){var R=[];R.push(this.onLineFeed(u.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},function(){return(0,u.updateWindowsModeWrappedState)(O._bufferService),!1})),this._windowsMode={dispose:function(){for(var $=0,B=R;$<B.length;$++)B[$].dispose()}}}},E}(p.Disposable);i.CoreTerminal=A},8460:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0;var f=function(){function l(){this._listeners=[],this._disposed=!1}return Object.defineProperty(l.prototype,"event",{get:function(){var d=this;return this._event||(this._event=function(p){return d._listeners.push(p),{dispose:function(){if(!d._disposed){for(var _=0;_<d._listeners.length;_++)if(d._listeners[_]===p)return void d._listeners.splice(_,1)}}}}),this._event},enumerable:!1,configurable:!0}),l.prototype.fire=function(d,p){for(var _=[],C=0;C<this._listeners.length;C++)_.push(this._listeners[C]);for(C=0;C<_.length;C++)_[C].call(void 0,d,p)},l.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},l}();i.EventEmitter=f,i.forwardEvent=function(l,d){return l(function(p){return d.fire(p)})}},5435:function(b,i,f){var l,d=this&&this.__extends||(l=function($,B){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,x){k.__proto__=x}||function(k,x){for(var H in x)Object.prototype.hasOwnProperty.call(x,H)&&(k[H]=x[H])},l($,B)},function($,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function k(){this.constructor=$}l($,B),$.prototype=B===null?Object.create(B):(k.prototype=B.prototype,new k)});Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;var p,_=f(2584),C=f(7116),y=f(2015),a=f(844),h=f(8273),v=f(482),o=f(8437),t=f(8460),e=f(643),r=f(511),c=f(3734),u=f(2585),g=f(6242),S=f(6351),M=f(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},w=131072;function E($,B){if($>24)return B.setWinLines||!1;switch($){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}(function($){$[$.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",$[$.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(p=i.WindowsOptionsReportType||(i.WindowsOptionsReportType={}));var O=function(){function $(B,k,x,H){this._bufferService=B,this._coreService=k,this._logService=x,this._optionsService=H,this._data=new Uint32Array(0)}return $.prototype.hook=function(B){this._data=new Uint32Array(0)},$.prototype.put=function(B,k,x){this._data=(0,h.concat)(this._data,B.subarray(k,x))},$.prototype.unhook=function(B){if(!B)return this._data=new Uint32Array(0),!0;var k=(0,v.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),k){case'"q':this._coreService.triggerDataEvent(_.C0.ESC+'P1$r0"q'+_.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(_.C0.ESC+'P1$r61;1"p'+_.C0.ESC+"\\");break;case"r":var x=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(_.C0.ESC+"P1$r"+x+_.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(_.C0.ESC+"P1$r0m"+_.C0.ESC+"\\");break;case" q":var H={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];H-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(_.C0.ESC+"P1$r"+H+" q"+_.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",k),this._coreService.triggerDataEvent(_.C0.ESC+"P0$r"+_.C0.ESC+"\\")}return!0},$}(),R=function($){function B(k,x,H,F,z,N,Z,X,Q){Q===void 0&&(Q=new y.EscapeSequenceParser);var D=$.call(this)||this;D._bufferService=k,D._charsetService=x,D._coreService=H,D._dirtyRowService=F,D._logService=z,D._optionsService=N,D._coreMouseService=Z,D._unicodeService=X,D._parser=Q,D._parseBuffer=new Uint32Array(4096),D._stringDecoder=new v.StringToUtf32,D._utf8Decoder=new v.Utf8ToUtf32,D._workCell=new r.CellData,D._windowTitle="",D._iconName="",D._windowTitleStack=[],D._iconNameStack=[],D._curAttrData=o.DEFAULT_ATTR_DATA.clone(),D._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),D._onRequestBell=new t.EventEmitter,D._onRequestRefreshRows=new t.EventEmitter,D._onRequestReset=new t.EventEmitter,D._onRequestSendFocus=new t.EventEmitter,D._onRequestSyncScrollBar=new t.EventEmitter,D._onRequestWindowsOptionsReport=new t.EventEmitter,D._onA11yChar=new t.EventEmitter,D._onA11yTab=new t.EventEmitter,D._onCursorMove=new t.EventEmitter,D._onLineFeed=new t.EventEmitter,D._onScroll=new t.EventEmitter,D._onTitleChange=new t.EventEmitter,D._onColor=new t.EventEmitter,D._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},D._specialColors=[256,257,258],D.register(D._parser),D._activeBuffer=D._bufferService.buffer,D.register(D._bufferService.buffers.onBufferActivate(function(T){return D._activeBuffer=T.activeBuffer})),D._parser.setCsiHandlerFallback(function(T,G){D._logService.debug("Unknown CSI code: ",{identifier:D._parser.identToString(T),params:G.toArray()})}),D._parser.setEscHandlerFallback(function(T){D._logService.debug("Unknown ESC code: ",{identifier:D._parser.identToString(T)})}),D._parser.setExecuteHandlerFallback(function(T){D._logService.debug("Unknown EXECUTE code: ",{code:T})}),D._parser.setOscHandlerFallback(function(T,G,J){D._logService.debug("Unknown OSC code: ",{identifier:T,action:G,data:J})}),D._parser.setDcsHandlerFallback(function(T,G,J){G==="HOOK"&&(J=J.toArray()),D._logService.debug("Unknown DCS code: ",{identifier:D._parser.identToString(T),action:G,payload:J})}),D._parser.setPrintHandler(function(T,G,J){return D.print(T,G,J)}),D._parser.registerCsiHandler({final:"@"},function(T){return D.insertChars(T)}),D._parser.registerCsiHandler({intermediates:" ",final:"@"},function(T){return D.scrollLeft(T)}),D._parser.registerCsiHandler({final:"A"},function(T){return D.cursorUp(T)}),D._parser.registerCsiHandler({intermediates:" ",final:"A"},function(T){return D.scrollRight(T)}),D._parser.registerCsiHandler({final:"B"},function(T){return D.cursorDown(T)}),D._parser.registerCsiHandler({final:"C"},function(T){return D.cursorForward(T)}),D._parser.registerCsiHandler({final:"D"},function(T){return D.cursorBackward(T)}),D._parser.registerCsiHandler({final:"E"},function(T){return D.cursorNextLine(T)}),D._parser.registerCsiHandler({final:"F"},function(T){return D.cursorPrecedingLine(T)}),D._parser.registerCsiHandler({final:"G"},function(T){return D.cursorCharAbsolute(T)}),D._parser.registerCsiHandler({final:"H"},function(T){return D.cursorPosition(T)}),D._parser.registerCsiHandler({final:"I"},function(T){return D.cursorForwardTab(T)}),D._parser.registerCsiHandler({final:"J"},function(T){return D.eraseInDisplay(T)}),D._parser.registerCsiHandler({prefix:"?",final:"J"},function(T){return D.eraseInDisplay(T)}),D._parser.registerCsiHandler({final:"K"},function(T){return D.eraseInLine(T)}),D._parser.registerCsiHandler({prefix:"?",final:"K"},function(T){return D.eraseInLine(T)}),D._parser.registerCsiHandler({final:"L"},function(T){return D.insertLines(T)}),D._parser.registerCsiHandler({final:"M"},function(T){return D.deleteLines(T)}),D._parser.registerCsiHandler({final:"P"},function(T){return D.deleteChars(T)}),D._parser.registerCsiHandler({final:"S"},function(T){return D.scrollUp(T)}),D._parser.registerCsiHandler({final:"T"},function(T){return D.scrollDown(T)}),D._parser.registerCsiHandler({final:"X"},function(T){return D.eraseChars(T)}),D._parser.registerCsiHandler({final:"Z"},function(T){return D.cursorBackwardTab(T)}),D._parser.registerCsiHandler({final:"`"},function(T){return D.charPosAbsolute(T)}),D._parser.registerCsiHandler({final:"a"},function(T){return D.hPositionRelative(T)}),D._parser.registerCsiHandler({final:"b"},function(T){return D.repeatPrecedingCharacter(T)}),D._parser.registerCsiHandler({final:"c"},function(T){return D.sendDeviceAttributesPrimary(T)}),D._parser.registerCsiHandler({prefix:">",final:"c"},function(T){return D.sendDeviceAttributesSecondary(T)}),D._parser.registerCsiHandler({final:"d"},function(T){return D.linePosAbsolute(T)}),D._parser.registerCsiHandler({final:"e"},function(T){return D.vPositionRelative(T)}),D._parser.registerCsiHandler({final:"f"},function(T){return D.hVPosition(T)}),D._parser.registerCsiHandler({final:"g"},function(T){return D.tabClear(T)}),D._parser.registerCsiHandler({final:"h"},function(T){return D.setMode(T)}),D._parser.registerCsiHandler({prefix:"?",final:"h"},function(T){return D.setModePrivate(T)}),D._parser.registerCsiHandler({final:"l"},function(T){return D.resetMode(T)}),D._parser.registerCsiHandler({prefix:"?",final:"l"},function(T){return D.resetModePrivate(T)}),D._parser.registerCsiHandler({final:"m"},function(T){return D.charAttributes(T)}),D._parser.registerCsiHandler({final:"n"},function(T){return D.deviceStatus(T)}),D._parser.registerCsiHandler({prefix:"?",final:"n"},function(T){return D.deviceStatusPrivate(T)}),D._parser.registerCsiHandler({intermediates:"!",final:"p"},function(T){return D.softReset(T)}),D._parser.registerCsiHandler({intermediates:" ",final:"q"},function(T){return D.setCursorStyle(T)}),D._parser.registerCsiHandler({final:"r"},function(T){return D.setScrollRegion(T)}),D._parser.registerCsiHandler({final:"s"},function(T){return D.saveCursor(T)}),D._parser.registerCsiHandler({final:"t"},function(T){return D.windowOptions(T)}),D._parser.registerCsiHandler({final:"u"},function(T){return D.restoreCursor(T)}),D._parser.registerCsiHandler({intermediates:"'",final:"}"},function(T){return D.insertColumns(T)}),D._parser.registerCsiHandler({intermediates:"'",final:"~"},function(T){return D.deleteColumns(T)}),D._parser.setExecuteHandler(_.C0.BEL,function(){return D.bell()}),D._parser.setExecuteHandler(_.C0.LF,function(){return D.lineFeed()}),D._parser.setExecuteHandler(_.C0.VT,function(){return D.lineFeed()}),D._parser.setExecuteHandler(_.C0.FF,function(){return D.lineFeed()}),D._parser.setExecuteHandler(_.C0.CR,function(){return D.carriageReturn()}),D._parser.setExecuteHandler(_.C0.BS,function(){return D.backspace()}),D._parser.setExecuteHandler(_.C0.HT,function(){return D.tab()}),D._parser.setExecuteHandler(_.C0.SO,function(){return D.shiftOut()}),D._parser.setExecuteHandler(_.C0.SI,function(){return D.shiftIn()}),D._parser.setExecuteHandler(_.C1.IND,function(){return D.index()}),D._parser.setExecuteHandler(_.C1.NEL,function(){return D.nextLine()}),D._parser.setExecuteHandler(_.C1.HTS,function(){return D.tabSet()}),D._parser.registerOscHandler(0,new g.OscHandler(function(T){return D.setTitle(T),D.setIconName(T),!0})),D._parser.registerOscHandler(1,new g.OscHandler(function(T){return D.setIconName(T)})),D._parser.registerOscHandler(2,new g.OscHandler(function(T){return D.setTitle(T)})),D._parser.registerOscHandler(4,new g.OscHandler(function(T){return D.setOrReportIndexedColor(T)})),D._parser.registerOscHandler(10,new g.OscHandler(function(T){return D.setOrReportFgColor(T)})),D._parser.registerOscHandler(11,new g.OscHandler(function(T){return D.setOrReportBgColor(T)})),D._parser.registerOscHandler(12,new g.OscHandler(function(T){return D.setOrReportCursorColor(T)})),D._parser.registerOscHandler(104,new g.OscHandler(function(T){return D.restoreIndexedColor(T)})),D._parser.registerOscHandler(110,new g.OscHandler(function(T){return D.restoreFgColor(T)})),D._parser.registerOscHandler(111,new g.OscHandler(function(T){return D.restoreBgColor(T)})),D._parser.registerOscHandler(112,new g.OscHandler(function(T){return D.restoreCursorColor(T)})),D._parser.registerEscHandler({final:"7"},function(){return D.saveCursor()}),D._parser.registerEscHandler({final:"8"},function(){return D.restoreCursor()}),D._parser.registerEscHandler({final:"D"},function(){return D.index()}),D._parser.registerEscHandler({final:"E"},function(){return D.nextLine()}),D._parser.registerEscHandler({final:"H"},function(){return D.tabSet()}),D._parser.registerEscHandler({final:"M"},function(){return D.reverseIndex()}),D._parser.registerEscHandler({final:"="},function(){return D.keypadApplicationMode()}),D._parser.registerEscHandler({final:">"},function(){return D.keypadNumericMode()}),D._parser.registerEscHandler({final:"c"},function(){return D.fullReset()}),D._parser.registerEscHandler({final:"n"},function(){return D.setgLevel(2)}),D._parser.registerEscHandler({final:"o"},function(){return D.setgLevel(3)}),D._parser.registerEscHandler({final:"|"},function(){return D.setgLevel(3)}),D._parser.registerEscHandler({final:"}"},function(){return D.setgLevel(2)}),D._parser.registerEscHandler({final:"~"},function(){return D.setgLevel(1)}),D._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return D.selectDefaultCharset()}),D._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return D.selectDefaultCharset()});var U=function(T){P._parser.registerEscHandler({intermediates:"(",final:T},function(){return D.selectCharset("("+T)}),P._parser.registerEscHandler({intermediates:")",final:T},function(){return D.selectCharset(")"+T)}),P._parser.registerEscHandler({intermediates:"*",final:T},function(){return D.selectCharset("*"+T)}),P._parser.registerEscHandler({intermediates:"+",final:T},function(){return D.selectCharset("+"+T)}),P._parser.registerEscHandler({intermediates:"-",final:T},function(){return D.selectCharset("-"+T)}),P._parser.registerEscHandler({intermediates:".",final:T},function(){return D.selectCharset("."+T)}),P._parser.registerEscHandler({intermediates:"/",final:T},function(){return D.selectCharset("/"+T)})},P=this;for(var I in C.CHARSETS)U(I);return D._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return D.screenAlignmentPattern()}),D._parser.setErrorHandler(function(T){return D._logService.error("Parsing error: ",T),T}),D._parser.registerDcsHandler({intermediates:"$",final:"q"},new O(D._bufferService,D._coreService,D._logService,D._optionsService)),D}return d(B,$),Object.defineProperty(B.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),B.prototype.dispose=function(){$.prototype.dispose.call(this)},B.prototype._preserveStack=function(k,x,H,F){this._parseStack.paused=!0,this._parseStack.cursorStartX=k,this._parseStack.cursorStartY=x,this._parseStack.decodedLength=H,this._parseStack.position=F},B.prototype._logSlowResolvingAsync=function(k){this._logService.logLevel<=u.LogLevelEnum.WARN&&Promise.race([k,new Promise(function(x,H){return setTimeout(function(){return H("#SLOW_TIMEOUT")},5e3)})]).catch(function(x){if(x!=="#SLOW_TIMEOUT")throw x;console.warn("async parser handler taking longer than 5000 ms")})},B.prototype.parse=function(k,x){var H,F=this._activeBuffer.x,z=this._activeBuffer.y,N=0,Z=this._parseStack.paused;if(Z){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,x))return this._logSlowResolvingAsync(H),H;F=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,k.length>w&&(N=this._parseStack.position+w)}if(this._logService.logLevel<=u.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof k=="string"?' "'+k+'"':' "'+Array.prototype.map.call(k,function(U){return String.fromCharCode(U)}).join("")+'"'),typeof k=="string"?k.split("").map(function(U){return U.charCodeAt(0)}):k),this._parseBuffer.length<k.length&&this._parseBuffer.length<w&&(this._parseBuffer=new Uint32Array(Math.min(k.length,w))),Z||this._dirtyRowService.clearRange(),k.length>w)for(var X=N;X<k.length;X+=w){var Q=X+w<k.length?X+w:k.length,D=typeof k=="string"?this._stringDecoder.decode(k.substring(X,Q),this._parseBuffer):this._utf8Decoder.decode(k.subarray(X,Q),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,D))return this._preserveStack(F,z,D,X),this._logSlowResolvingAsync(H),H}else if(!Z&&(D=typeof k=="string"?this._stringDecoder.decode(k,this._parseBuffer):this._utf8Decoder.decode(k,this._parseBuffer),H=this._parser.parse(this._parseBuffer,D)))return this._preserveStack(F,z,D,0),this._logSlowResolvingAsync(H),H;this._activeBuffer.x===F&&this._activeBuffer.y===z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},B.prototype.print=function(k,x,H){var F,z,N=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,X=this._bufferService.cols,Q=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,U=this._curAttrData,P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-x>0&&P.getWidth(this._activeBuffer.x-1)===2&&P.setCellFromCodePoint(this._activeBuffer.x-1,0,1,U.fg,U.bg,U.extended);for(var I=x;I<H;++I){if(F=k[I],z=this._unicodeService.wcwidth(F),F<127&&N){var T=N[String.fromCharCode(F)];T&&(F=T.charCodeAt(0))}if(Z&&this._onA11yChar.fire((0,v.stringFromCodePoint)(F)),z||!this._activeBuffer.x){if(this._activeBuffer.x+z-1>=X){if(Q){for(;this._activeBuffer.x<X;)P.setCellFromCodePoint(this._activeBuffer.x++,0,1,U.fg,U.bg,U.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=X-1,z===2)continue}if(D&&(P.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(U),U),P.getWidth(X-1)===2&&P.setCellFromCodePoint(X-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,U.fg,U.bg,U.extended)),P.setCellFromCodePoint(this._activeBuffer.x++,F,z,U.fg,U.bg,U.extended),z>0)for(;--z;)P.setCellFromCodePoint(this._activeBuffer.x++,0,0,U.fg,U.bg,U.extended)}else P.getWidth(this._activeBuffer.x-1)?P.addCodepointToCell(this._activeBuffer.x-1,F):P.addCodepointToCell(this._activeBuffer.x-2,F)}H-x>0&&(P.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<X&&H-x>0&&P.getWidth(this._activeBuffer.x)===0&&!P.hasContent(this._activeBuffer.x)&&P.setCellFromCodePoint(this._activeBuffer.x,0,1,U.fg,U.bg,U.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype.registerCsiHandler=function(k,x){var H=this;return k.final!=="t"||k.prefix||k.intermediates?this._parser.registerCsiHandler(k,x):this._parser.registerCsiHandler(k,function(F){return!E(F.params[0],H._optionsService.rawOptions.windowOptions)||x(F)})},B.prototype.registerDcsHandler=function(k,x){return this._parser.registerDcsHandler(k,new S.DcsHandler(x))},B.prototype.registerEscHandler=function(k,x){return this._parser.registerEscHandler(k,x)},B.prototype.registerOscHandler=function(k,x){return this._parser.registerOscHandler(k,new g.OscHandler(x))},B.prototype.bell=function(){return this._onRequestBell.fire(),!0},B.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},B.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},B.prototype.backspace=function(){var k;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||k===void 0?void 0:k.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);x.hasWidth(this._activeBuffer.x)&&!x.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},B.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var k=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-k),!0},B.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},B.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},B.prototype._restrictCursor=function(k){k===void 0&&(k=this._bufferService.cols-1),this._activeBuffer.x=Math.min(k,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype._setCursor=function(k,x){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=k,this._activeBuffer.y=this._activeBuffer.scrollTop+x):(this._activeBuffer.x=k,this._activeBuffer.y=x),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype._moveCursor=function(k,x){this._restrictCursor(),this._setCursor(this._activeBuffer.x+k,this._activeBuffer.y+x)},B.prototype.cursorUp=function(k){var x=this._activeBuffer.y-this._activeBuffer.scrollTop;return x>=0?this._moveCursor(0,-Math.min(x,k.params[0]||1)):this._moveCursor(0,-(k.params[0]||1)),!0},B.prototype.cursorDown=function(k){var x=this._activeBuffer.scrollBottom-this._activeBuffer.y;return x>=0?this._moveCursor(0,Math.min(x,k.params[0]||1)):this._moveCursor(0,k.params[0]||1),!0},B.prototype.cursorForward=function(k){return this._moveCursor(k.params[0]||1,0),!0},B.prototype.cursorBackward=function(k){return this._moveCursor(-(k.params[0]||1),0),!0},B.prototype.cursorNextLine=function(k){return this.cursorDown(k),this._activeBuffer.x=0,!0},B.prototype.cursorPrecedingLine=function(k){return this.cursorUp(k),this._activeBuffer.x=0,!0},B.prototype.cursorCharAbsolute=function(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0},B.prototype.cursorPosition=function(k){return this._setCursor(k.length>=2?(k.params[1]||1)-1:0,(k.params[0]||1)-1),!0},B.prototype.charPosAbsolute=function(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0},B.prototype.hPositionRelative=function(k){return this._moveCursor(k.params[0]||1,0),!0},B.prototype.linePosAbsolute=function(k){return this._setCursor(this._activeBuffer.x,(k.params[0]||1)-1),!0},B.prototype.vPositionRelative=function(k){return this._moveCursor(0,k.params[0]||1),!0},B.prototype.hVPosition=function(k){return this.cursorPosition(k),!0},B.prototype.tabClear=function(k){var x=k.params[0];return x===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:x===3&&(this._activeBuffer.tabs={}),!0},B.prototype.cursorForwardTab=function(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=k.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},B.prototype.cursorBackwardTab=function(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=k.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},B.prototype._eraseInBufferLine=function(k,x,H,F){F===void 0&&(F=!1);var z=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);z.replaceCells(x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F&&(z.isWrapped=!1)},B.prototype._resetBufferLine=function(k){var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);x.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+k),x.isWrapped=!1},B.prototype.eraseInDisplay=function(k){var x;switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowService.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);x<this._bufferService.rows;x++)this._resetBufferLine(x);this._dirtyRowService.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowService.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowService.markDirty(x-1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 3:var H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0},B.prototype.eraseInLine=function(k){switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},B.prototype.insertLines=function(k){this._restrictCursor();var x=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var H=this._activeBuffer.ybase+this._activeBuffer.y,F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-F+1;x--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},B.prototype.deleteLines=function(k){this._restrictCursor();var x=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var H,F=this._activeBuffer.ybase+this._activeBuffer.y;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;x--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},B.prototype.insertChars=function(k){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.insertCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.deleteChars=function(k){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.deleteCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.scrollUp=function(k){for(var x=k.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollDown=function(k){for(var x=k.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollLeft=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);F.deleteCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollRight=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);F.insertCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.insertColumns=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);F.insertCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.deleteColumns=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);F.deleteCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.eraseChars=function(k){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(k.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.repeatPrecedingCharacter=function(k){if(!this._parser.precedingCodepoint)return!0;for(var x=k.params[0]||1,H=new Uint32Array(x),F=0;F<x;++F)H[F]=this._parser.precedingCodepoint;return this.print(H,0,H.length),!0},B.prototype.sendDeviceAttributesPrimary=function(k){return k.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(_.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(_.C0.ESC+"[?6c")),!0},B.prototype.sendDeviceAttributesSecondary=function(k){return k.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(_.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(_.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(k.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(_.C0.ESC+"[>83;40003;0c")),!0},B.prototype._is=function(k){return(this._optionsService.rawOptions.termName+"").indexOf(k)===0},B.prototype.setMode=function(k){for(var x=0;x<k.length;x++)k.params[x]===4&&(this._coreService.modes.insertMode=!0);return!0},B.prototype.setModePrivate=function(k){for(var x=0;x<k.length;x++)switch(k.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),this._charsetService.setgCharset(1,C.DEFAULT_CHARSET),this._charsetService.setgCharset(2,C.DEFAULT_CHARSET),this._charsetService.setgCharset(3,C.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},B.prototype.resetMode=function(k){for(var x=0;x<k.length;x++)k.params[x]===4&&(this._coreService.modes.insertMode=!1);return!0},B.prototype.resetModePrivate=function(k){for(var x=0;x<k.length;x++)switch(k.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),k.params[x]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},B.prototype._updateAttrColor=function(k,x,H,F,z){return x===2?(k|=50331648,k&=-16777216,k|=c.AttributeData.fromColorRGB([H,F,z])):x===5&&(k&=-50331904,k|=33554432|255&H),k},B.prototype._extractColor=function(k,x,H){var F=[0,0,-1,0,0,0],z=0,N=0;do{if(F[N+z]=k.params[x+N],k.hasSubParams(x+N)){var Z=k.getSubParams(x+N),X=0;do F[1]===5&&(z=1),F[N+X+1+z]=Z[X];while(++X<Z.length&&X+N+1+z<F.length);break}if(F[1]===5&&N+z>=2||F[1]===2&&N+z>=5)break;F[1]&&(z=1)}while(++N+x<k.length&&N+z<F.length);for(X=2;X<F.length;++X)F[X]===-1&&(F[X]=0);switch(F[0]){case 38:H.fg=this._updateAttrColor(H.fg,F[1],F[3],F[4],F[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,F[1],F[3],F[4],F[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,F[1],F[3],F[4],F[5])}return N},B.prototype._processUnderline=function(k,x){x.extended=x.extended.clone(),(!~k||k>5)&&(k=1),x.extended.underlineStyle=k,x.fg|=268435456,k===0&&(x.fg&=-268435457),x.updateExtended()},B.prototype.charAttributes=function(k){if(k.length===1&&k.params[0]===0)return this._curAttrData.fg=o.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=o.DEFAULT_ATTR_DATA.bg,!0;for(var x,H=k.length,F=this._curAttrData,z=0;z<H;z++)(x=k.params[z])>=30&&x<=37?(F.fg&=-50331904,F.fg|=16777216|x-30):x>=40&&x<=47?(F.bg&=-50331904,F.bg|=16777216|x-40):x>=90&&x<=97?(F.fg&=-50331904,F.fg|=16777224|x-90):x>=100&&x<=107?(F.bg&=-50331904,F.bg|=16777224|x-100):x===0?(F.fg=o.DEFAULT_ATTR_DATA.fg,F.bg=o.DEFAULT_ATTR_DATA.bg):x===1?F.fg|=134217728:x===3?F.bg|=67108864:x===4?(F.fg|=268435456,this._processUnderline(k.hasSubParams(z)?k.getSubParams(z)[0]:1,F)):x===5?F.fg|=536870912:x===7?F.fg|=67108864:x===8?F.fg|=1073741824:x===9?F.fg|=2147483648:x===2?F.bg|=134217728:x===21?this._processUnderline(2,F):x===22?(F.fg&=-134217729,F.bg&=-134217729):x===23?F.bg&=-67108865:x===24?F.fg&=-268435457:x===25?F.fg&=-536870913:x===27?F.fg&=-67108865:x===28?F.fg&=-1073741825:x===29?F.fg&=2147483647:x===39?(F.fg&=-67108864,F.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):x===49?(F.bg&=-67108864,F.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?z+=this._extractColor(k,z,F):x===59?(F.extended=F.extended.clone(),F.extended.underlineColor=-1,F.updateExtended()):x===100?(F.fg&=-67108864,F.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,F.bg&=-67108864,F.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0},B.prototype.deviceStatus=function(k){switch(k.params[0]){case 5:this._coreService.triggerDataEvent(_.C0.ESC+"[0n");break;case 6:var x=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(_.C0.ESC+"["+x+";"+H+"R")}return!0},B.prototype.deviceStatusPrivate=function(k){if(k.params[0]===6){var x=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(_.C0.ESC+"[?"+x+";"+H+"R")}return!0},B.prototype.softReset=function(k){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},B.prototype.setCursorStyle=function(k){var x=k.params[0]||1;switch(x){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var H=x%2==1;return this._optionsService.options.cursorBlink=H,!0},B.prototype.setScrollRegion=function(k){var x,H=k.params[0]||1;return(k.length<2||(x=k.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0},B.prototype.windowOptions=function(k){if(!E(k.params[0],this._optionsService.rawOptions.windowOptions))return!0;var x=k.length>1?k.params[1]:0;switch(k.params[0]){case 14:x!==2&&this._onRequestWindowsOptionsReport.fire(p.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(p.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(_.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:x!==0&&x!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),x!==0&&x!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:x!==0&&x!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),x!==0&&x!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},B.prototype.saveCursor=function(k){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},B.prototype.restoreCursor=function(k){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},B.prototype.setTitle=function(k){return this._windowTitle=k,this._onTitleChange.fire(k),!0},B.prototype.setIconName=function(k){return this._iconName=k,!0},B.prototype.setOrReportIndexedColor=function(k){for(var x=[],H=k.split(";");H.length>1;){var F=H.shift(),z=H.shift();if(/^\d+$/.exec(F)){var N=parseInt(F);if(0<=N&&N<256)if(z==="?")x.push({type:0,index:N});else{var Z=(0,M.parseColor)(z);Z&&x.push({type:1,index:N,color:Z})}}}return x.length&&this._onColor.fire(x),!0},B.prototype._setOrReportSpecialColor=function(k,x){for(var H=k.split(";"),F=0;F<H.length&&!(x>=this._specialColors.length);++F,++x)if(H[F]==="?")this._onColor.fire([{type:0,index:this._specialColors[x]}]);else{var z=(0,M.parseColor)(H[F]);z&&this._onColor.fire([{type:1,index:this._specialColors[x],color:z}])}return!0},B.prototype.setOrReportFgColor=function(k){return this._setOrReportSpecialColor(k,0)},B.prototype.setOrReportBgColor=function(k){return this._setOrReportSpecialColor(k,1)},B.prototype.setOrReportCursorColor=function(k){return this._setOrReportSpecialColor(k,2)},B.prototype.restoreIndexedColor=function(k){if(!k)return this._onColor.fire([{type:2}]),!0;for(var x=[],H=k.split(";"),F=0;F<H.length;++F)if(/^\d+$/.exec(H[F])){var z=parseInt(H[F]);0<=z&&z<256&&x.push({type:2,index:z})}return x.length&&this._onColor.fire(x),!0},B.prototype.restoreFgColor=function(k){return this._onColor.fire([{type:2,index:256}]),!0},B.prototype.restoreBgColor=function(k){return this._onColor.fire([{type:2,index:257}]),!0},B.prototype.restoreCursorColor=function(k){return this._onColor.fire([{type:2,index:258}]),!0},B.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},B.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},B.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},B.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),!0},B.prototype.selectCharset=function(k){return k.length!==2?(this.selectDefaultCharset(),!0):(k[0]==="/"||this._charsetService.setgCharset(A[k[0]],C.CHARSETS[k[1]]||C.DEFAULT_CHARSET),!0)},B.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},B.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},B.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var k=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,k,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},B.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},B.prototype.reset=function(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()},B.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},B.prototype.setgLevel=function(k){return this._charsetService.setgLevel(k),!0},B.prototype.screenAlignmentPattern=function(){var k=new r.CellData;k.content=1<<22|"E".charCodeAt(0),k.fg=this._curAttrData.fg,k.bg=this._curAttrData.bg,this._setCursor(0,0);for(var x=0;x<this._bufferService.rows;++x){var H=this._activeBuffer.ybase+this._activeBuffer.y+x,F=this._activeBuffer.lines.get(H);F&&(F.fill(k),F.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},B}(a.Disposable);i.InputHandler=R},844:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.Disposable=void 0;var f=function(){function d(){this._disposables=[],this._isDisposed=!1}return d.prototype.dispose=function(){this._isDisposed=!0;for(var p=0,_=this._disposables;p<_.length;p++)_[p].dispose();this._disposables.length=0},d.prototype.register=function(p){return this._disposables.push(p),p},d.prototype.unregister=function(p){var _=this._disposables.indexOf(p);_!==-1&&this._disposables.splice(_,1)},d}();function l(d){for(var p=0,_=d;p<_.length;p++)_[p].dispose();d.length=0}i.Disposable=f,i.disposeArray=l,i.getDisposeArrayDisposable=function(d){return{dispose:function(){return l(d)}}}},6114:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.isSafari=i.isLegacyEdge=i.isFirefox=void 0;var f=typeof navigator=="undefined",l=f?"node":navigator.userAgent,d=f?"node":navigator.platform;i.isFirefox=l.includes("Firefox"),i.isLegacyEdge=l.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(l),i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),i.isIpad=d==="iPad",i.isIphone=d==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),i.isLinux=d.indexOf("Linux")>=0},8273:(b,i)=>{function f(l,d,p,_){if(p===void 0&&(p=0),_===void 0&&(_=l.length),p>=l.length)return l;p=(l.length+p)%l.length,_=_>=l.length?l.length:(l.length+_)%l.length;for(var C=p;C<_;++C)l[C]=d;return l}Object.defineProperty(i,"__esModule",{value:!0}),i.concat=i.fillFallback=i.fill=void 0,i.fill=function(l,d,p,_){return l.fill?l.fill(d,p,_):f(l,d,p,_)},i.fillFallback=f,i.concat=function(l,d){var p=new l.constructor(l.length+d.length);return p.set(l),p.set(d,l.length),p}},9282:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;var l=f(643);i.updateWindowsModeWrappedState=function(d){var p=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),_=p==null?void 0:p.get(d.cols-1),C=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);C&&_&&(C.isWrapped=_[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&_[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;var f=function(){function d(){this.fg=0,this.bg=0,this.extended=new l}return d.toColorRGB=function(p){return[p>>>16&255,p>>>8&255,255&p]},d.fromColorRGB=function(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]},d.prototype.clone=function(){var p=new d;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p},d.prototype.isInverse=function(){return 67108864&this.fg},d.prototype.isBold=function(){return 134217728&this.fg},d.prototype.isUnderline=function(){return 268435456&this.fg},d.prototype.isBlink=function(){return 536870912&this.fg},d.prototype.isInvisible=function(){return 1073741824&this.fg},d.prototype.isItalic=function(){return 67108864&this.bg},d.prototype.isDim=function(){return 134217728&this.bg},d.prototype.isStrikethrough=function(){return 2147483648&this.fg},d.prototype.getFgColorMode=function(){return 50331648&this.fg},d.prototype.getBgColorMode=function(){return 50331648&this.bg},d.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},d.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},d.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},d.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},d.prototype.isFgDefault=function(){return(50331648&this.fg)==0},d.prototype.isBgDefault=function(){return(50331648&this.bg)==0},d.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},d.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},d.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},d.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},d.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},d.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},d.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},d.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},d.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},d.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},d.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},d}();i.AttributeData=f;var l=function(){function d(p,_){p===void 0&&(p=0),_===void 0&&(_=-1),this.underlineStyle=p,this.underlineColor=_}return d.prototype.clone=function(){return new d(this.underlineStyle,this.underlineColor)},d.prototype.isEmpty=function(){return this.underlineStyle===0},d}();i.ExtendedAttrs=l},9092:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferStringIterator=i.Buffer=i.MAX_BUFFER_SIZE=void 0;var l=f(6349),d=f(8437),p=f(511),_=f(643),C=f(4634),y=f(4863),a=f(7116),h=f(3734);i.MAX_BUFFER_SIZE=4294967295;var v=function(){function t(e,r,c){this._hasScrollback=e,this._optionsService=r,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(e,r){return new d.BufferLine(this._bufferService.cols,this.getNullCell(e),r)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.rawOptions.scrollback;return r>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:r},t.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=d.DEFAULT_ATTR_DATA);for(var r=this._rows;r--;)this.lines.push(this.getBlankLine(e))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(e,r){var c=this.getNullCell(d.DEFAULT_ATTR_DATA),u=this._getCorrectBufferLength(r);if(u>this.lines.maxLength&&(this.lines.maxLength=u),this.lines.length>0){if(this._cols<e)for(var g=0;g<this.lines.length;g++)this.lines.get(g).resize(e,c);var S=0;if(this._rows<r)for(var M=this._rows;M<r;M++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new d.BufferLine(e,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(e,c)));else for(M=this._rows;M>r;M--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(u<this.lines.maxLength){var A=this.lines.length-u;A>0&&(this.lines.trimStart(A),this.ybase=Math.max(this.ybase-A,0),this.ydisp=Math.max(this.ydisp-A,0),this.savedY=Math.max(this.savedY-A,0)),this.lines.maxLength=u}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(g=0;g<this.lines.length;g++)this.lines.get(g).resize(e,c);this._cols=e,this._rows=r},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))},t.prototype._reflowLarger=function(e,r){var c=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(c.length>0){var u=(0,C.reflowLargerCreateNewLayout)(this.lines,c);(0,C.reflowLargerApplyNewLayout)(this.lines,u.layout),this._reflowLargerAdjustViewport(e,r,u.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(e,r,c){for(var u=this.getNullCell(d.DEFAULT_ATTR_DATA),g=c;g-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new d.BufferLine(e,u))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)},t.prototype._reflowSmaller=function(e,r){for(var c=this.getNullCell(d.DEFAULT_ATTR_DATA),u=[],g=0,S=this.lines.length-1;S>=0;S--){var M=this.lines.get(S);if(!(!M||!M.isWrapped&&M.getTrimmedLength()<=e)){for(var A=[M];M.isWrapped&&S>0;)M=this.lines.get(--S),A.unshift(M);var w=this.ybase+this.y;if(!(w>=S&&w<S+A.length)){var E,O=A[A.length-1].getTrimmedLength(),R=(0,C.reflowSmallerGetNewLineLengths)(A,this._cols,e),$=R.length-A.length;E=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+$):Math.max(0,this.lines.length-this.lines.maxLength+$);for(var B=[],k=0;k<$;k++){var x=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);B.push(x)}B.length>0&&(u.push({start:S+A.length+g,newLines:B}),g+=B.length),A.push.apply(A,B);var H=R.length-1,F=R[H];F===0&&(F=R[--H]);for(var z=A.length-$-1,N=O;z>=0;){var Z=Math.min(N,F);if(A[H]===void 0)break;if(A[H].copyCellsFrom(A[z],N-Z,F-Z,Z,!0),(F-=Z)==0&&(F=R[--H]),(N-=Z)==0){z--;var X=Math.max(z,0);N=(0,C.getWrappedLineTrimmedLength)(A,X,this._cols)}}for(k=0;k<A.length;k++)R[k]<e&&A[k].setCell(R[k],c);for(var Q=$-E;Q-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+$,this.ybase+r-1)}}}if(u.length>0){var D=[],U=[];for(k=0;k<this.lines.length;k++)U.push(this.lines.get(k));var P=this.lines.length,I=P-1,T=0,G=u[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);var J=0;for(k=Math.min(this.lines.maxLength-1,P+g-1);k>=0;k--)if(G&&G.start>I+J){for(var Y=G.newLines.length-1;Y>=0;Y--)this.lines.set(k--,G.newLines[Y]);k++,D.push({index:I+1,amount:G.newLines.length}),J+=G.newLines.length,G=u[++T]}else this.lines.set(k,U[I--]);var re=0;for(k=D.length-1;k>=0;k--)D[k].index+=re,this.lines.onInsertEmitter.fire(D[k]),re+=D[k].amount;var ne=Math.max(0,P+g-this.lines.maxLength);ne>0&&this.lines.onTrimEmitter.fire(ne)}},t.prototype.stringIndexToBufferIndex=function(e,r,c){for(c===void 0&&(c=!1);r;){var u=this.lines.get(e);if(!u)return[-1,-1];for(var g=c?u.getTrimmedLength():u.length,S=0;S<g;++S)if(u.get(S)[_.CHAR_DATA_WIDTH_INDEX]&&(r-=u.get(S)[_.CHAR_DATA_CHAR_INDEX].length||1),r<0)return[e,S];e++}return[e,0]},t.prototype.translateBufferLineToString=function(e,r,c,u){c===void 0&&(c=0);var g=this.lines.get(e);return g?g.translateToString(r,c,u):""},t.prototype.getWrappedRangeForLine=function(e){for(var r=e,c=e;r>0&&this.lines.get(r).isWrapped;)r--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:r,last:c}},t.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0},t.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.clearMarkers=function(e){if(this._isClearing=!0,e!==void 0)for(var r=0;r<this.markers.length;r++)this.markers[r].line===e&&(this.markers[r].dispose(),this.markers.splice(r--,1));else{for(var c=0,u=this.markers;c<u.length;c++)u[c].dispose();this.markers=[]}this._isClearing=!1},t.prototype.addMarker=function(e){var r=this,c=new y.Marker(e);return this.markers.push(c),c.register(this.lines.onTrim(function(u){c.line-=u,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(function(u){c.line>=u.index&&(c.line+=u.amount)})),c.register(this.lines.onDelete(function(u){c.line>=u.index&&c.line<u.index+u.amount&&c.dispose(),c.line>u.index&&(c.line-=u.amount)})),c.register(c.onDispose(function(){return r._removeMarker(c)})),c},t.prototype._removeMarker=function(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)},t.prototype.iterator=function(e,r,c,u,g){return new o(this,e,r,c,u,g)},t}();i.Buffer=v;var o=function(){function t(e,r,c,u,g,S){c===void 0&&(c=0),u===void 0&&(u=e.lines.length),g===void 0&&(g=0),S===void 0&&(S=0),this._buffer=e,this._trimRight=r,this._startIndex=c,this._endIndex=u,this._startOverscan=g,this._endOverscan=S,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var r="",c=e.first;c<=e.last;++c)r+=this._buffer.translateBufferLineToString(c,this._trimRight);return this._current=e.last+1,{range:e,content:r}},t}();i.BufferStringIterator=o},8437:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;var l=f(482),d=f(643),p=f(511),_=f(3734);i.DEFAULT_ATTR_DATA=Object.freeze(new _.AttributeData);var C=function(){function y(a,h,v){v===void 0&&(v=!1),this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);for(var o=h||p.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),t=0;t<a;++t)this.setCell(t,o);this.length=a}return y.prototype.get=function(a){var h=this._data[3*a+0],v=2097151&h;return[this._data[3*a+1],2097152&h?this._combined[a]:v?(0,l.stringFromCodePoint)(v):"",h>>22,2097152&h?this._combined[a].charCodeAt(this._combined[a].length-1):v]},y.prototype.set=function(a,h){this._data[3*a+1]=h[d.CHAR_DATA_ATTR_INDEX],h[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=h[1],this._data[3*a+0]=2097152|a|h[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=h[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[d.CHAR_DATA_WIDTH_INDEX]<<22},y.prototype.getWidth=function(a){return this._data[3*a+0]>>22},y.prototype.hasWidth=function(a){return 12582912&this._data[3*a+0]},y.prototype.getFg=function(a){return this._data[3*a+1]},y.prototype.getBg=function(a){return this._data[3*a+2]},y.prototype.hasContent=function(a){return 4194303&this._data[3*a+0]},y.prototype.getCodePoint=function(a){var h=this._data[3*a+0];return 2097152&h?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&h},y.prototype.isCombined=function(a){return 2097152&this._data[3*a+0]},y.prototype.getString=function(a){var h=this._data[3*a+0];return 2097152&h?this._combined[a]:2097151&h?(0,l.stringFromCodePoint)(2097151&h):""},y.prototype.loadCell=function(a,h){var v=3*a;return h.content=this._data[v+0],h.fg=this._data[v+1],h.bg=this._data[v+2],2097152&h.content&&(h.combinedData=this._combined[a]),268435456&h.bg&&(h.extended=this._extendedAttrs[a]),h},y.prototype.setCell=function(a,h){2097152&h.content&&(this._combined[a]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[a]=h.extended),this._data[3*a+0]=h.content,this._data[3*a+1]=h.fg,this._data[3*a+2]=h.bg},y.prototype.setCellFromCodePoint=function(a,h,v,o,t,e){268435456&t&&(this._extendedAttrs[a]=e),this._data[3*a+0]=h|v<<22,this._data[3*a+1]=o,this._data[3*a+2]=t},y.prototype.addCodepointToCell=function(a,h){var v=this._data[3*a+0];2097152&v?this._combined[a]+=(0,l.stringFromCodePoint)(h):(2097151&v?(this._combined[a]=(0,l.stringFromCodePoint)(2097151&v)+(0,l.stringFromCodePoint)(h),v&=-2097152,v|=2097152):v=h|1<<22,this._data[3*a+0]=v)},y.prototype.insertCells=function(a,h,v,o){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new _.ExtendedAttrs),h<this.length-a){for(var t=new p.CellData,e=this.length-a-h-1;e>=0;--e)this.setCell(a+h+e,this.loadCell(a+e,t));for(e=0;e<h;++e)this.setCell(a+e,v)}else for(e=a;e<this.length;++e)this.setCell(e,v);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new _.ExtendedAttrs)},y.prototype.deleteCells=function(a,h,v,o){if(a%=this.length,h<this.length-a){for(var t=new p.CellData,e=0;e<this.length-a-h;++e)this.setCell(a+e,this.loadCell(a+h+e,t));for(e=this.length-h;e<this.length;++e)this.setCell(e,v)}else for(e=a;e<this.length;++e)this.setCell(e,v);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new _.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new _.ExtendedAttrs)},y.prototype.replaceCells=function(a,h,v,o){for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new _.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new _.ExtendedAttrs);a<h&&a<this.length;)this.setCell(a++,v)},y.prototype.resize=function(a,h){if(a!==this.length){if(a>this.length){var v=new Uint32Array(3*a);this.length&&(3*a<this._data.length?v.set(this._data.subarray(0,3*a)):v.set(this._data)),this._data=v;for(var o=this.length;o<a;++o)this.setCell(o,h)}else if(a){(v=new Uint32Array(3*a)).set(this._data.subarray(0,3*a)),this._data=v;var t=Object.keys(this._combined);for(o=0;o<t.length;o++){var e=parseInt(t[o],10);e>=a&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=a}},y.prototype.fill=function(a){this._combined={},this._extendedAttrs={};for(var h=0;h<this.length;++h)this.setCell(h,a)},y.prototype.copyFrom=function(a){for(var h in this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={},a._combined)this._combined[h]=a._combined[h];for(var h in this._extendedAttrs={},a._extendedAttrs)this._extendedAttrs[h]=a._extendedAttrs[h];this.isWrapped=a.isWrapped},y.prototype.clone=function(){var a=new y(0);for(var h in a._data=new Uint32Array(this._data),a.length=this.length,this._combined)a._combined[h]=this._combined[h];for(var h in this._extendedAttrs)a._extendedAttrs[h]=this._extendedAttrs[h];return a.isWrapped=this.isWrapped,a},y.prototype.getTrimmedLength=function(){for(var a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0},y.prototype.copyCellsFrom=function(a,h,v,o,t){var e=a._data;if(t)for(var r=o-1;r>=0;r--)for(var c=0;c<3;c++)this._data[3*(v+r)+c]=e[3*(h+r)+c];else for(r=0;r<o;r++)for(c=0;c<3;c++)this._data[3*(v+r)+c]=e[3*(h+r)+c];var u=Object.keys(a._combined);for(c=0;c<u.length;c++){var g=parseInt(u[c],10);g>=h&&(this._combined[g-h+v]=a._combined[g])}},y.prototype.translateToString=function(a,h,v){a===void 0&&(a=!1),h===void 0&&(h=0),v===void 0&&(v=this.length),a&&(v=Math.min(v,this.getTrimmedLength()));for(var o="";h<v;){var t=this._data[3*h+0],e=2097151&t;o+=2097152&t?this._combined[h]:e?(0,l.stringFromCodePoint)(e):d.WHITESPACE_CELL_CHAR,h+=t>>22||1}return o},y}();i.BufferLine=C},4841:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(f,l){if(f.start.y>f.end.y)throw new Error("Buffer range end ("+f.end.x+", "+f.end.y+") cannot be before start ("+f.start.x+", "+f.start.y+")");return l*(f.end.y-f.start.y)+(f.end.x-f.start.x+1)}},4634:(b,i)=>{function f(l,d,p){if(d===l.length-1)return l[d].getTrimmedLength();var _=!l[d].hasContent(p-1)&&l[d].getWidth(p-1)===1,C=l[d+1].getWidth(0)===2;return _&&C?p-1:p}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(l,d,p,_,C){for(var y=[],a=0;a<l.length-1;a++){var h=a,v=l.get(++h);if(v.isWrapped){for(var o=[l.get(a)];h<l.length&&v.isWrapped;)o.push(v),v=l.get(++h);if(_>=a&&_<h)a+=o.length-1;else{for(var t=0,e=f(o,t,d),r=1,c=0;r<o.length;){var u=f(o,r,d),g=u-c,S=p-e,M=Math.min(g,S);o[t].copyCellsFrom(o[r],c,e,M,!1),(e+=M)===p&&(t++,e=0),(c+=M)===u&&(r++,c=0),e===0&&t!==0&&o[t-1].getWidth(p-1)===2&&(o[t].copyCellsFrom(o[t-1],p-1,e++,1,!1),o[t-1].setCell(p-1,C))}o[t].replaceCells(e,p,C);for(var A=0,w=o.length-1;w>0&&(w>t||o[w].getTrimmedLength()===0);w--)A++;A>0&&(y.push(a+o.length-A),y.push(A)),a+=o.length-1}}}return y},i.reflowLargerCreateNewLayout=function(l,d){for(var p=[],_=0,C=d[_],y=0,a=0;a<l.length;a++)if(C===a){var h=d[++_];l.onDeleteEmitter.fire({index:a-y,amount:h}),a+=h-1,y+=h,C=d[++_]}else p.push(a);return{layout:p,countRemoved:y}},i.reflowLargerApplyNewLayout=function(l,d){for(var p=[],_=0;_<d.length;_++)p.push(l.get(d[_]));for(_=0;_<p.length;_++)l.set(_,p[_]);l.length=d.length},i.reflowSmallerGetNewLineLengths=function(l,d,p){for(var _=[],C=l.map(function(e,r){return f(l,r,d)}).reduce(function(e,r){return e+r}),y=0,a=0,h=0;h<C;){if(C-h<p){_.push(C-h);break}y+=p;var v=f(l,a,d);y>v&&(y-=v,a++);var o=l[a].getWidth(y-1)===2;o&&y--;var t=o?p-1:p;_.push(t),h+=t}return _},i.getWrappedLineTrimmedLength=f},5295:function(b,i,f){var l,d=this&&this.__extends||(l=function(y,a){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var o in v)Object.prototype.hasOwnProperty.call(v,o)&&(h[o]=v[o])},l(y,a)},function(y,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=y}l(y,a),y.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)});Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;var p=f(9092),_=f(8460),C=function(y){function a(h,v){var o=y.call(this)||this;return o._optionsService=h,o._bufferService=v,o._onBufferActivate=o.register(new _.EventEmitter),o.reset(),o}return d(a,y),Object.defineProperty(a.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(a.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),a.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},a.prototype.activateAltBuffer=function(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},a.prototype.resize=function(h,v){this._normal.resize(h,v),this._alt.resize(h,v)},a.prototype.setupTabStops=function(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)},a}(f(844).Disposable);i.BufferSet=C},511:function(b,i,f){var l,d=this&&this.__extends||(l=function(a,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,o){v.__proto__=o}||function(v,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(v[t]=o[t])},l(a,h)},function(a,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function v(){this.constructor=a}l(a,h),a.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)});Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;var p=f(482),_=f(643),C=f(3734),y=function(a){function h(){var v=a!==null&&a.apply(this,arguments)||this;return v.content=0,v.fg=0,v.bg=0,v.extended=new C.ExtendedAttrs,v.combinedData="",v}return d(h,a),h.fromCharData=function(v){var o=new h;return o.setFromCharData(v),o},h.prototype.isCombined=function(){return 2097152&this.content},h.prototype.getWidth=function(){return this.content>>22},h.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""},h.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},h.prototype.setFromCharData=function(v){this.fg=v[_.CHAR_DATA_ATTR_INDEX],this.bg=0;var o=!1;if(v[_.CHAR_DATA_CHAR_INDEX].length>2)o=!0;else if(v[_.CHAR_DATA_CHAR_INDEX].length===2){var t=v[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=v[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|v[_.CHAR_DATA_WIDTH_INDEX]<<22:o=!0}else o=!0}else this.content=v[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[_.CHAR_DATA_WIDTH_INDEX]<<22;o&&(this.combinedData=v[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[_.CHAR_DATA_WIDTH_INDEX]<<22)},h.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},h}(C.AttributeData);i.CellData=y},643:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=256,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:function(b,i,f){var l,d=this&&this.__extends||(l=function(C,y){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(a[v]=h[v])},l(C,y)},function(C,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function a(){this.constructor=C}l(C,y),C.prototype=y===null?Object.create(y):(a.prototype=y.prototype,new a)});Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;var p=f(8460),_=function(C){function y(a){var h=C.call(this)||this;return h.line=a,h._id=y._nextId++,h.isDisposed=!1,h._onDispose=new p.EventEmitter,h}return d(y,C),Object.defineProperty(y.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),C.prototype.dispose.call(this))},y._nextId=1,y}(f(844).Disposable);i.Marker=_},7116:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},i.CHARSETS.A={"#":"\xA3"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},i.CHARSETS.C=i.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},i.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},i.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},i.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},i.CHARSETS.E=i.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},i.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},i.CHARSETS.H=i.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(b,i)=>{var f,l;Object.defineProperty(i,"__esModule",{value:!0}),i.C1=i.C0=void 0,(l=i.C0||(i.C0={})).NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F",(f=i.C1||(i.C1={})).PAD="\x80",f.HOP="\x81",f.BPH="\x82",f.NBH="\x83",f.IND="\x84",f.NEL="\x85",f.SSA="\x86",f.ESA="\x87",f.HTS="\x88",f.HTJ="\x89",f.VTS="\x8A",f.PLD="\x8B",f.PLU="\x8C",f.RI="\x8D",f.SS2="\x8E",f.SS3="\x8F",f.DCS="\x90",f.PU1="\x91",f.PU2="\x92",f.STS="\x93",f.CCH="\x94",f.MW="\x95",f.SPA="\x96",f.EPA="\x97",f.SOS="\x98",f.SGCI="\x99",f.SCI="\x9A",f.CSI="\x9B",f.ST="\x9C",f.OSC="\x9D",f.PM="\x9E",f.APC="\x9F"},7399:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;var l=f(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(p,_,C,y){var a={type:0,cancel:!1,key:void 0},h=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?a.key=_?l.C0.ESC+"OA":l.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?a.key=_?l.C0.ESC+"OD":l.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?a.key=_?l.C0.ESC+"OC":l.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(a.key=_?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(p.shiftKey){a.key=l.C0.BS;break}if(p.altKey){a.key=l.C0.ESC+l.C0.DEL;break}a.key=l.C0.DEL;break;case 9:if(p.shiftKey){a.key=l.C0.ESC+"[Z";break}a.key=l.C0.HT,a.cancel=!0;break;case 13:a.key=p.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,a.cancel=!0;break;case 27:a.key=l.C0.ESC,p.altKey&&(a.key=l.C0.ESC+l.C0.ESC),a.cancel=!0;break;case 37:if(p.metaKey)break;h?(a.key=l.C0.ESC+"[1;"+(h+1)+"D",a.key===l.C0.ESC+"[1;3D"&&(a.key=l.C0.ESC+(C?"b":"[1;5D"))):a.key=_?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(p.metaKey)break;h?(a.key=l.C0.ESC+"[1;"+(h+1)+"C",a.key===l.C0.ESC+"[1;3C"&&(a.key=l.C0.ESC+(C?"f":"[1;5C"))):a.key=_?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(p.metaKey)break;h?(a.key=l.C0.ESC+"[1;"+(h+1)+"A",C||a.key!==l.C0.ESC+"[1;3A"||(a.key=l.C0.ESC+"[1;5A")):a.key=_?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(p.metaKey)break;h?(a.key=l.C0.ESC+"[1;"+(h+1)+"B",C||a.key!==l.C0.ESC+"[1;3B"||(a.key=l.C0.ESC+"[1;5B")):a.key=_?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(a.key=l.C0.ESC+"[2~");break;case 46:a.key=h?l.C0.ESC+"[3;"+(h+1)+"~":l.C0.ESC+"[3~";break;case 36:a.key=h?l.C0.ESC+"[1;"+(h+1)+"H":_?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:a.key=h?l.C0.ESC+"[1;"+(h+1)+"F":_?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:p.shiftKey?a.type=2:a.key=l.C0.ESC+"[5~";break;case 34:p.shiftKey?a.type=3:a.key=l.C0.ESC+"[6~";break;case 112:a.key=h?l.C0.ESC+"[1;"+(h+1)+"P":l.C0.ESC+"OP";break;case 113:a.key=h?l.C0.ESC+"[1;"+(h+1)+"Q":l.C0.ESC+"OQ";break;case 114:a.key=h?l.C0.ESC+"[1;"+(h+1)+"R":l.C0.ESC+"OR";break;case 115:a.key=h?l.C0.ESC+"[1;"+(h+1)+"S":l.C0.ESC+"OS";break;case 116:a.key=h?l.C0.ESC+"[15;"+(h+1)+"~":l.C0.ESC+"[15~";break;case 117:a.key=h?l.C0.ESC+"[17;"+(h+1)+"~":l.C0.ESC+"[17~";break;case 118:a.key=h?l.C0.ESC+"[18;"+(h+1)+"~":l.C0.ESC+"[18~";break;case 119:a.key=h?l.C0.ESC+"[19;"+(h+1)+"~":l.C0.ESC+"[19~";break;case 120:a.key=h?l.C0.ESC+"[20;"+(h+1)+"~":l.C0.ESC+"[20~";break;case 121:a.key=h?l.C0.ESC+"[21;"+(h+1)+"~":l.C0.ESC+"[21~";break;case 122:a.key=h?l.C0.ESC+"[23;"+(h+1)+"~":l.C0.ESC+"[23~";break;case 123:a.key=h?l.C0.ESC+"[24;"+(h+1)+"~":l.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(C&&!y||!p.altKey||p.metaKey)!C||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?a.key=p.key:p.key&&p.ctrlKey&&p.key==="_"&&(a.key=l.C0.US):p.keyCode===65&&(a.type=1);else{var v=d[p.keyCode],o=v==null?void 0:v[p.shiftKey?1:0];if(o)a.key=l.C0.ESC+o;else if(p.keyCode>=65&&p.keyCode<=90){var t=p.ctrlKey?p.keyCode-64:p.keyCode+32;a.key=l.C0.ESC+String.fromCharCode(t)}}else p.keyCode>=65&&p.keyCode<=90?a.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?a.key=l.C0.NUL:p.keyCode>=51&&p.keyCode<=55?a.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?a.key=l.C0.DEL:p.keyCode===219?a.key=l.C0.ESC:p.keyCode===220?a.key=l.C0.FS:p.keyCode===221&&(a.key=l.C0.GS)}return a}},482:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},i.utf32ToString=function(d,p,_){p===void 0&&(p=0),_===void 0&&(_=d.length);for(var C="",y=p;y<_;++y){var a=d[y];a>65535?(a-=65536,C+=String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):C+=String.fromCharCode(a)}return C};var f=function(){function d(){this._interim=0}return d.prototype.clear=function(){this._interim=0},d.prototype.decode=function(p,_){var C=p.length;if(!C)return 0;var y=0,a=0;this._interim&&(56320<=(o=p.charCodeAt(a++))&&o<=57343?_[y++]=1024*(this._interim-55296)+o-56320+65536:(_[y++]=this._interim,_[y++]=o),this._interim=0);for(var h=a;h<C;++h){var v=p.charCodeAt(h);if(55296<=v&&v<=56319){if(++h>=C)return this._interim=v,y;var o;56320<=(o=p.charCodeAt(h))&&o<=57343?_[y++]=1024*(v-55296)+o-56320+65536:(_[y++]=v,_[y++]=o)}else v!==65279&&(_[y++]=v)}return y},d}();i.StringToUtf32=f;var l=function(){function d(){this.interim=new Uint8Array(3)}return d.prototype.clear=function(){this.interim.fill(0)},d.prototype.decode=function(p,_){var C=p.length;if(!C)return 0;var y,a,h,v,o=0,t=0,e=0;if(this.interim[0]){var r=!1,c=this.interim[0];c&=(224&c)==192?31:(240&c)==224?15:7;for(var u=0,g=void 0;(g=63&this.interim[++u])&&u<4;)c<<=6,c|=g;for(var S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=S-u;e<M;){if(e>=C)return 0;if((192&(g=p[e++]))!=128){e--,r=!0;break}this.interim[u++]=g,c<<=6,c|=63&g}r||(S===2?c<128?e--:_[o++]=c:S===3?c<2048||c>=55296&&c<=57343||c===65279||(_[o++]=c):c<65536||c>1114111||(_[o++]=c)),this.interim.fill(0)}for(var A=C-4,w=e;w<C;){for(;!(!(w<A)||128&(y=p[w])||128&(a=p[w+1])||128&(h=p[w+2])||128&(v=p[w+3]));)_[o++]=y,_[o++]=a,_[o++]=h,_[o++]=v,w+=4;if((y=p[w++])<128)_[o++]=y;else if((224&y)==192){if(w>=C)return this.interim[0]=y,o;if((192&(a=p[w++]))!=128){w--;continue}if((t=(31&y)<<6|63&a)<128){w--;continue}_[o++]=t}else if((240&y)==224){if(w>=C)return this.interim[0]=y,o;if((192&(a=p[w++]))!=128){w--;continue}if(w>=C)return this.interim[0]=y,this.interim[1]=a,o;if((192&(h=p[w++]))!=128){w--;continue}if((t=(15&y)<<12|(63&a)<<6|63&h)<2048||t>=55296&&t<=57343||t===65279)continue;_[o++]=t}else if((248&y)==240){if(w>=C)return this.interim[0]=y,o;if((192&(a=p[w++]))!=128){w--;continue}if(w>=C)return this.interim[0]=y,this.interim[1]=a,o;if((192&(h=p[w++]))!=128){w--;continue}if(w>=C)return this.interim[0]=y,this.interim[1]=a,this.interim[2]=h,o;if((192&(v=p[w++]))!=128){w--;continue}if((t=(7&y)<<18|(63&a)<<12|(63&h)<<6|63&v)<65536||t>1114111)continue;_[o++]=t}}return o},d}();i.Utf8ToUtf32=l},225:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;var l,d=f(8273),p=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],_=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],C=function(){function y(){if(this.version="6",!l){l=new Uint8Array(65536),(0,d.fill)(l,1),l[0]=0,(0,d.fill)(l,0,1,32),(0,d.fill)(l,0,127,160),(0,d.fill)(l,2,4352,4448),l[9001]=2,l[9002]=2,(0,d.fill)(l,2,11904,42192),l[12351]=1,(0,d.fill)(l,2,44032,55204),(0,d.fill)(l,2,63744,64256),(0,d.fill)(l,2,65040,65050),(0,d.fill)(l,2,65072,65136),(0,d.fill)(l,2,65280,65377),(0,d.fill)(l,2,65504,65511);for(var a=0;a<p.length;++a)(0,d.fill)(l,0,p[a][0],p[a][1]+1)}}return y.prototype.wcwidth=function(a){return a<32?0:a<127?1:a<65536?l[a]:function(h,v){var o,t=0,e=v.length-1;if(h<v[0][0]||h>v[e][1])return!1;for(;e>=t;)if(h>v[o=t+e>>1][1])t=o+1;else{if(!(h<v[o][0]))return!0;e=o-1}return!1}(a,_)?0:a>=131072&&a<=196605||a>=196608&&a<=262141?2:1},y}();i.UnicodeV6=C},5981:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;var f=typeof queueMicrotask=="undefined"?function(d){Promise.resolve().then(d)}:queueMicrotask,l=function(){function d(p){this._action=p,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return d.prototype.writeSync=function(p,_){if(_!==void 0&&this._syncCalls>_)this._syncCalls=0;else if(this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var C;for(this._isSyncWriting=!0;C=this._writeBuffer.shift();){this._action(C);var y=this._callbacks.shift();y&&y()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},d.prototype.write=function(p,_){var C=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return C._innerWrite()})),this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(_)},d.prototype._innerWrite=function(p,_){var C=this;p===void 0&&(p=0),_===void 0&&(_=!0);for(var y=p||Date.now();this._writeBuffer.length>this._bufferOffset;){var a=this._writeBuffer[this._bufferOffset],h=this._action(a,_);if(h)return void h.catch(function(o){return f(function(){throw o}),Promise.resolve(!1)}).then(function(o){return Date.now()-y>=12?setTimeout(function(){return C._innerWrite(0,o)}):C._innerWrite(y,o)});var v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return C._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},d}();i.WriteBuffer=l},5941:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;var f=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function d(p,_){var C=p.toString(16),y=C.length<2?"0"+C:C;switch(_){case 4:return C[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}i.parseColor=function(p){if(p){var _=p.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);var C=f.exec(_);if(C){var y=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/y*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/y*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/y*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),l.exec(_)&&[3,6,9,12].includes(_.length))){for(var a=_.length/3,h=[0,0,0],v=0;v<3;++v){var o=parseInt(_.slice(a*v,a*v+a),16);h[v]=a===1?o<<4:a===2?o:a===3?o>>4:o>>8}return h}}},i.toRgbString=function(p,_){_===void 0&&(_=16);var C=p[0],y=p[1],a=p[2];return"rgb:"+d(C,_)+"/"+d(y,_)+"/"+d(a,_)}},5770:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;var l=f(482),d=f(8742),p=f(5770),_=[],C=function(){function h(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return h.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=_},h.prototype.registerHandler=function(v,o){this._handlers[v]===void 0&&(this._handlers[v]=[]);var t=this._handlers[v];return t.push(o),{dispose:function(){var e=t.indexOf(o);e!==-1&&t.splice(e,1)}}},h.prototype.clearHandler=function(v){this._handlers[v]&&delete this._handlers[v]},h.prototype.setHandlerFallback=function(v){this._handlerFb=v},h.prototype.reset=function(){if(this._active.length)for(var v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0},h.prototype.hook=function(v,o){if(this.reset(),this._ident=v,this._active=this._handlers[v]||_,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(o);else this._handlerFb(this._ident,"HOOK",o)},h.prototype.put=function(v,o,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(v,o,t);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(v,o,t))},h.prototype.unhook=function(v,o){if(o===void 0&&(o=!0),this._active.length){var t=!1,e=this._active.length-1,r=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=o,r=this._stack.fallThrough,this._stack.paused=!1),!r&&t===!1){for(;e>=0&&(t=this._active[e].unhook(v))!==!0;e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",v);this._active=_,this._ident=0},h}();i.DcsParser=C;var y=new d.Params;y.addParam(0);var a=function(){function h(v){this._handler=v,this._data="",this._params=y,this._hitLimit=!1}return h.prototype.hook=function(v){this._params=v.length>1||v.params[0]?v.clone():y,this._data="",this._hitLimit=!1},h.prototype.put=function(v,o,t){this._hitLimit||(this._data+=(0,l.utf32ToString)(v,o,t),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},h.prototype.unhook=function(v){var o=this,t=!1;if(this._hitLimit)t=!1;else if(v&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return o._params=y,o._data="",o._hitLimit=!1,e});return this._params=y,this._data="",this._hitLimit=!1,t},h}();i.DcsHandler=a},2015:function(b,i,f){var l,d=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(r[u]=c[u])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;var p=f(844),_=f(8273),C=f(8742),y=f(6242),a=f(6351),h=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,r){(0,_.fill)(this.table,e<<4|r)},t.prototype.add=function(e,r,c,u){this.table[r<<8|e]=c<<4|u},t.prototype.addMany=function(e,r,c,u){for(var g=0;g<e.length;g++)this.table[r<<8|e[g]]=c<<4|u},t}();i.TransitionTable=h;var v=160;i.VT500_TRANSITION_TABLE=function(){var t=new h(4095),e=Array.apply(null,Array(256)).map(function(M,A){return A}),r=function(M,A){return e.slice(M,A)},c=r(32,127),u=r(0,24);u.push(25),u.push.apply(u,r(28,32));var g,S=r(0,14);for(g in t.setDefault(1,0),t.addMany(c,0,2,0),S)t.addMany([24,26,153,154],g,3,0),t.addMany(r(128,144),g,3,0),t.addMany(r(144,152),g,3,0),t.add(156,g,0,0),t.add(27,g,11,1),t.add(157,g,4,8),t.addMany([152,158,159],g,0,7),t.add(155,g,11,3),t.add(144,g,11,9);return t.addMany(u,0,3,0),t.addMany(u,1,3,1),t.add(127,1,0,1),t.addMany(u,8,0,8),t.addMany(u,3,3,3),t.add(127,3,0,3),t.addMany(u,4,3,4),t.add(127,4,0,4),t.addMany(u,6,3,6),t.addMany(u,5,3,5),t.add(127,5,0,5),t.addMany(u,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(c,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(r(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(c,7,0,7),t.addMany(u,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(r(64,127),3,7,0),t.addMany(r(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(r(48,60),4,8,4),t.addMany(r(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(r(32,64),6,0,6),t.add(127,6,0,6),t.addMany(r(64,127),6,0,0),t.addMany(r(32,48),3,9,5),t.addMany(r(32,48),5,9,5),t.addMany(r(48,64),5,0,6),t.addMany(r(64,127),5,7,0),t.addMany(r(32,48),4,9,5),t.addMany(r(32,48),1,9,2),t.addMany(r(32,48),2,9,2),t.addMany(r(48,127),2,10,0),t.addMany(r(48,80),1,10,0),t.addMany(r(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(r(96,127),1,10,0),t.add(80,1,11,9),t.addMany(u,9,0,9),t.add(127,9,0,9),t.addMany(r(28,32),9,0,9),t.addMany(r(32,48),9,9,12),t.addMany(r(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(u,11,0,11),t.addMany(r(32,128),11,0,11),t.addMany(r(28,32),11,0,11),t.addMany(u,10,0,10),t.add(127,10,0,10),t.addMany(r(28,32),10,0,10),t.addMany(r(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(r(32,48),10,9,12),t.addMany(u,12,0,12),t.add(127,12,0,12),t.addMany(r(28,32),12,0,12),t.addMany(r(32,48),12,9,12),t.addMany(r(48,64),12,0,11),t.addMany(r(64,127),12,12,13),t.addMany(r(64,127),10,12,13),t.addMany(r(64,127),9,12,13),t.addMany(u,13,13,13),t.addMany(c,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(v,0,2,0),t.add(v,8,5,8),t.add(v,6,0,6),t.add(v,11,0,11),t.add(v,13,13,13),t}();var o=function(t){function e(r){r===void 0&&(r=i.VT500_TRANSITION_TABLE);var c=t.call(this)||this;return c._transitions=r,c._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},c.initialState=0,c.currentState=c.initialState,c._params=new C.Params,c._params.addParam(0),c._collect=0,c.precedingCodepoint=0,c._printHandlerFb=function(u,g,S){},c._executeHandlerFb=function(u){},c._csiHandlerFb=function(u,g){},c._escHandlerFb=function(u){},c._errorHandlerFb=function(u){return u},c._printHandler=c._printHandlerFb,c._executeHandlers=Object.create(null),c._csiHandlers=Object.create(null),c._escHandlers=Object.create(null),c._oscParser=new y.OscParser,c._dcsParser=new a.DcsParser,c._errorHandler=c._errorHandlerFb,c.registerEscHandler({final:"\\"},function(){return!0}),c}return d(e,t),e.prototype._identifier=function(r,c){c===void 0&&(c=[64,126]);var u=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if((u=r.prefix.charCodeAt(0))&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var g=0;g<r.intermediates.length;++g){var S=r.intermediates.charCodeAt(g);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=S}}if(r.final.length!==1)throw new Error("final must be a single byte");var M=r.final.charCodeAt(0);if(c[0]>M||M>c[1])throw new Error("final must be in range "+c[0]+" .. "+c[1]);return(u<<=8)|M},e.prototype.identToString=function(r){for(var c=[];r;)c.push(String.fromCharCode(255&r)),r>>=8;return c.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(r){this._printHandler=r},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(r,c){var u=this._identifier(r,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);var g=this._escHandlers[u];return g.push(c),{dispose:function(){var S=g.indexOf(c);S!==-1&&g.splice(S,1)}}},e.prototype.clearEscHandler=function(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]},e.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},e.prototype.setExecuteHandler=function(r,c){this._executeHandlers[r.charCodeAt(0)]=c},e.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},e.prototype.registerCsiHandler=function(r,c){var u=this._identifier(r);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);var g=this._csiHandlers[u];return g.push(c),{dispose:function(){var S=g.indexOf(c);S!==-1&&g.splice(S,1)}}},e.prototype.clearCsiHandler=function(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]},e.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},e.prototype.registerDcsHandler=function(r,c){return this._dcsParser.registerHandler(this._identifier(r),c)},e.prototype.clearDcsHandler=function(r){this._dcsParser.clearHandler(this._identifier(r))},e.prototype.setDcsHandlerFallback=function(r){this._dcsParser.setHandlerFallback(r)},e.prototype.registerOscHandler=function(r,c){return this._oscParser.registerHandler(r,c)},e.prototype.clearOscHandler=function(r){this._oscParser.clearHandler(r)},e.prototype.setOscHandlerFallback=function(r){this._oscParser.setHandlerFallback(r)},e.prototype.setErrorHandler=function(r){this._errorHandler=r},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(r,c,u,g,S){this._parseStack.state=r,this._parseStack.handlers=c,this._parseStack.handlerPos=u,this._parseStack.transition=g,this._parseStack.chunkPos=S},e.prototype.parse=function(r,c,u){var g,S=0,M=0,A=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,A=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var w=this._parseStack.handlers,E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&E>-1){for(;E>=0&&(g=w[E](this._params))!==!0;E--)if(g instanceof Promise)return this._parseStack.handlerPos=E,g}this._parseStack.handlers=[];break;case 4:if(u===!1&&E>-1){for(;E>=0&&(g=w[E]())!==!0;E--)if(g instanceof Promise)return this._parseStack.handlerPos=E,g}this._parseStack.handlers=[];break;case 6:if(S=r[this._parseStack.chunkPos],g=this._dcsParser.unhook(S!==24&&S!==26,u))return g;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=r[this._parseStack.chunkPos],g=this._oscParser.end(S!==24&&S!==26,u))return g;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,A=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var O=A;O<c;++O){switch(S=r[O],(M=this._transitions.table[this.currentState<<8|(S<160?S:v)])>>4){case 2:for(var R=O+1;;++R){if(R>=c||(S=r[R])<32||S>126&&S<v){this._printHandler(r,O,R),O=R-1;break}if(++R>=c||(S=r[R])<32||S>126&&S<v){this._printHandler(r,O,R),O=R-1;break}if(++R>=c||(S=r[R])<32||S>126&&S<v){this._printHandler(r,O,R),O=R-1;break}if(++R>=c||(S=r[R])<32||S>126&&S<v){this._printHandler(r,O,R),O=R-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:O,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var $=(w=this._csiHandlers[this._collect<<8|S])?w.length-1:-1;$>=0&&(g=w[$](this._params))!==!0;$--)if(g instanceof Promise)return this._preserveStack(3,w,$,M,O),g;$<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++O<c&&(S=r[O])>47&&S<60);O--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:for(var B=this._escHandlers[this._collect<<8|S],k=B?B.length-1:-1;k>=0&&(g=B[k]())!==!0;k--)if(g instanceof Promise)return this._preserveStack(4,B,k,M,O),g;k<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(var x=O+1;;++x)if(x>=c||(S=r[x])===24||S===26||S===27||S>127&&S<v){this._dcsParser.put(r,O,x),O=x-1;break}break;case 14:if(g=this._dcsParser.unhook(S!==24&&S!==26))return this._preserveStack(6,[],0,M,O),g;S===27&&(M|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var H=O+1;;H++)if(H>=c||(S=r[H])<32||S>127&&S<v){this._oscParser.put(r,O,H),O=H-1;break}break;case 6:if(g=this._oscParser.end(S!==24&&S!==26))return this._preserveStack(5,[],0,M,O),g;S===27&&(M|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&M}},e}(p.Disposable);i.EscapeSequenceParser=o},6242:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;var l=f(5770),d=f(482),p=[],_=function(){function y(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return y.prototype.registerHandler=function(a,h){this._handlers[a]===void 0&&(this._handlers[a]=[]);var v=this._handlers[a];return v.push(h),{dispose:function(){var o=v.indexOf(h);o!==-1&&v.splice(o,1)}}},y.prototype.clearHandler=function(a){this._handlers[a]&&delete this._handlers[a]},y.prototype.setHandlerFallback=function(a){this._handlerFb=a},y.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=p},y.prototype.reset=function(){if(this._state===2)for(var a=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;a>=0;--a)this._active[a].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0},y.prototype._start=function(){if(this._active=this._handlers[this._id]||p,this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].start();else this._handlerFb(this._id,"START")},y.prototype._put=function(a,h,v){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(a,h,v);else this._handlerFb(this._id,"PUT",(0,d.utf32ToString)(a,h,v))},y.prototype.start=function(){this.reset(),this._state=1},y.prototype.put=function(a,h,v){if(this._state!==3){if(this._state===1)for(;h<v;){var o=a[h++];if(o===59){this._state=2,this._start();break}if(o<48||57<o)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+o-48}this._state===2&&v-h>0&&this._put(a,h,v)}},y.prototype.end=function(a,h){if(h===void 0&&(h=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var v=!1,o=this._active.length-1,t=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,v=h,t=this._stack.fallThrough,this._stack.paused=!1),!t&&v===!1){for(;o>=0&&(v=this._active[o].end(a))!==!0;o--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,v;o--}for(;o>=0;o--)if((v=this._active[o].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",a);this._active=p,this._id=-1,this._state=0}},y}();i.OscParser=_;var C=function(){function y(a){this._handler=a,this._data="",this._hitLimit=!1}return y.prototype.start=function(){this._data="",this._hitLimit=!1},y.prototype.put=function(a,h,v){this._hitLimit||(this._data+=(0,d.utf32ToString)(a,h,v),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},y.prototype.end=function(a){var h=this,v=!1;if(this._hitLimit)v=!1;else if(a&&(v=this._handler(this._data))instanceof Promise)return v.then(function(o){return h._data="",h._hitLimit=!1,o});return this._data="",this._hitLimit=!1,v},y}();i.OscHandler=C},8742:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;var f=2147483647,l=function(){function d(p,_){if(p===void 0&&(p=32),_===void 0&&(_=32),this.maxLength=p,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return d.fromArray=function(p){var _=new d;if(!p.length)return _;for(var C=Array.isArray(p[0])?1:0;C<p.length;++C){var y=p[C];if(Array.isArray(y))for(var a=0;a<y.length;++a)_.addSubParam(y[a]);else _.addParam(y)}return _},d.prototype.clone=function(){var p=new d(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p},d.prototype.toArray=function(){for(var p=[],_=0;_<this.length;++_){p.push(this.params[_]);var C=this._subParamsIdx[_]>>8,y=255&this._subParamsIdx[_];y-C>0&&p.push(Array.prototype.slice.call(this._subParams,C,y))}return p},d.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},d.prototype.addParam=function(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>f?f:p}},d.prototype.addSubParam=function(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>f?f:p,this._subParamsIdx[this.length-1]++}},d.prototype.hasSubParams=function(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0},d.prototype.getSubParams=function(p){var _=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];return C-_>0?this._subParams.subarray(_,C):null},d.prototype.getSubParamsAll=function(){for(var p={},_=0;_<this.length;++_){var C=this._subParamsIdx[_]>>8,y=255&this._subParamsIdx[_];y-C>0&&(p[_]=this._subParams.slice(C,y))}return p},d.prototype.addDigit=function(p){var _;if(!(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var C=this._digitIsSub?this._subParams:this.params,y=C[_-1];C[_-1]=~y?Math.min(10*y+p,f):p}},d}();i.Params=l},5741:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0;var f=function(){function l(){this._addons=[]}return l.prototype.dispose=function(){for(var d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()},l.prototype.loadAddon=function(d,p){var _=this,C={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(C),p.dispose=function(){return _._wrappedAddonDispose(C)},p.activate(d)},l.prototype._wrappedAddonDispose=function(d){if(!d.isDisposed){for(var p=-1,_=0;_<this._addons.length;_++)if(this._addons[_]===d){p=_;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(p,1)}},l}();i.AddonManager=f},8771:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;var l=f(3785),d=f(511),p=function(){function _(C,y){this._buffer=C,this.type=y}return _.prototype.init=function(C){return this._buffer=C,this},Object.defineProperty(_.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),_.prototype.getLine=function(C){var y=this._buffer.lines.get(C);if(y)return new l.BufferLineApiView(y)},_.prototype.getNullCell=function(){return new d.CellData},_}();i.BufferApiView=p},3785:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;var l=f(511),d=function(){function p(_){this._line=_}return Object.defineProperty(p.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),p.prototype.getCell=function(_,C){if(!(_<0||_>=this._line.length))return C?(this._line.loadCell(_,C),C):this._line.loadCell(_,new l.CellData)},p.prototype.translateToString=function(_,C,y){return this._line.translateToString(_,C,y)},p}();i.BufferLineApiView=d},8285:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;var l=f(8771),d=f(8460),p=function(){function _(C){var y=this;this._core=C,this._onBufferChange=new d.EventEmitter,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return y._onBufferChange.fire(y.active)})}return Object.defineProperty(_.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),_}();i.BufferNamespaceApi=p},7975:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0;var f=function(){function l(d){this._core=d}return l.prototype.registerCsiHandler=function(d,p){return this._core.registerCsiHandler(d,function(_){return p(_.toArray())})},l.prototype.addCsiHandler=function(d,p){return this.registerCsiHandler(d,p)},l.prototype.registerDcsHandler=function(d,p){return this._core.registerDcsHandler(d,function(_,C){return p(_,C.toArray())})},l.prototype.addDcsHandler=function(d,p){return this.registerDcsHandler(d,p)},l.prototype.registerEscHandler=function(d,p){return this._core.registerEscHandler(d,p)},l.prototype.addEscHandler=function(d,p){return this.registerEscHandler(d,p)},l.prototype.registerOscHandler=function(d,p){return this._core.registerOscHandler(d,p)},l.prototype.addOscHandler=function(d,p){return this.registerOscHandler(d,p)},l}();i.ParserApi=f},7090:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0;var f=function(){function l(d){this._core=d}return l.prototype.register=function(d){this._core.unicodeService.register(d)},Object.defineProperty(l.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(d){this._core.unicodeService.activeVersion=d},enumerable:!1,configurable:!0}),l}();i.UnicodeApi=f},744:function(b,i,f){var l,d=this&&this.__extends||(l=function(o,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])},l(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}l(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),p=this&&this.__decorate||function(o,t,e,r){var c,u=arguments.length,g=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,t,e,r);else for(var S=o.length-1;S>=0;S--)(c=o[S])&&(g=(u<3?c(g):u>3?c(t,e,g):c(t,e))||g);return u>3&&g&&Object.defineProperty(t,e,g),g},_=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;var C=f(2585),y=f(5295),a=f(8460),h=f(844);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;var v=function(o){function t(e){var r=o.call(this)||this;return r._optionsService=e,r.isUserScrolling=!1,r._onResize=new a.EventEmitter,r._onScroll=new a.EventEmitter,r.cols=Math.max(e.rawOptions.cols||0,i.MINIMUM_COLS),r.rows=Math.max(e.rawOptions.rows||0,i.MINIMUM_ROWS),r.buffers=new y.BufferSet(e,r),r}return d(t,o),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){o.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:r})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,r){r===void 0&&(r=!1);var c,u=this.buffer;(c=this._cachedBlankLine)&&c.length===this.cols&&c.getFg(0)===e.fg&&c.getBg(0)===e.bg||(c=u.getBlankLine(e,r),this._cachedBlankLine=c),c.isWrapped=r;var g=u.ybase+u.scrollTop,S=u.ybase+u.scrollBottom;if(u.scrollTop===0){var M=u.lines.isFull;S===u.lines.length-1?M?u.lines.recycle().copyFrom(c):u.lines.push(c.clone()):u.lines.splice(S+1,0,c.clone()),M?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{var A=S-g+1;u.lines.shiftElements(g+1,A-1,-1),u.lines.set(S,c.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)},t.prototype.scrollLines=function(e,r,c){var u=this.buffer;if(e<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else e+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);var g=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+e,u.ybase),0),g!==u.ydisp&&(r||this._onScroll.fire(u.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var r=e-this.buffer.ydisp;r!==0&&this.scrollLines(r)},p([_(0,C.IOptionsService)],t)}(h.Disposable);i.BufferService=v},7994:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0;var f=function(){function l(){this.glevel=0,this._charsets=[]}return l.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},l.prototype.setgLevel=function(d){this.glevel=d,this.charset=this._charsets[d]},l.prototype.setgCharset=function(d,p){this._charsets[d]=p,this.glevel===d&&(this.charset=p)},l}();i.CharsetService=f},1753:function(b,i,f){var l=this&&this.__decorate||function(o,t,e,r){var c,u=arguments.length,g=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,t,e,r);else for(var S=o.length-1;S>=0;S--)(c=o[S])&&(g=(u<3?c(g):u>3?c(t,e,g):c(t,e))||g);return u>3&&g&&Object.defineProperty(t,e,g),g},d=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;var p=f(2585),_=f(8460),C={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(o){return o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)}},VT200:{events:19,restrict:function(o){return o.action!==32}},DRAG:{events:23,restrict:function(o){return o.action!==32||o.button!==3}},ANY:{events:31,restrict:function(o){return!0}}};function y(o,t){var e=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(e|=64,e|=o.action):(e|=3&o.button,4&o.button&&(e|=64),8&o.button&&(e|=128),o.action===32?e|=32:o.action!==0||t||(e|=3)),e}var a=String.fromCharCode,h={DEFAULT:function(o){var t=[y(o,!1)+32,o.col+32,o.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"\x1B[M"+a(t[0])+a(t[1])+a(t[2])},SGR:function(o){var t=o.action===0&&o.button!==4?"m":"M";return"\x1B[<"+y(o,!0)+";"+o.col+";"+o.row+t}},v=function(){function o(t,e){this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new _.EventEmitter,this._lastEvent=null;for(var r=0,c=Object.keys(C);r<c.length;r++){var u=c[r];this.addProtocol(u,C[u])}for(var g=0,S=Object.keys(h);g<S.length;g++){var M=S[g];this.addEncoding(M,h[M])}this.reset()}return o.prototype.addProtocol=function(t,e){this._protocols[t]=e},o.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(o.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(o.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),o.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},o.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},o.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},l([d(0,p.IBufferService),d(1,p.ICoreService)],o)}();i.CoreMouseService=v},6975:function(b,i,f){var l,d=this&&this.__extends||(l=function(e,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(c[g]=u[g])},l(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function c(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}),p=this&&this.__decorate||function(e,r,c,u){var g,S=arguments.length,M=S<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(e,r,c,u);else for(var A=e.length-1;A>=0;A--)(g=e[A])&&(M=(S<3?g(M):S>3?g(r,c,M):g(r,c))||M);return S>3&&M&&Object.defineProperty(r,c,M),M},_=this&&this.__param||function(e,r){return function(c,u){r(c,u,e)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;var C=f(2585),y=f(8460),a=f(1439),h=f(844),v=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function r(c,u,g,S){var M=e.call(this)||this;return M._bufferService=u,M._logService=g,M._optionsService=S,M.isCursorInitialized=!1,M.isCursorHidden=!1,M._onData=M.register(new y.EventEmitter),M._onUserInput=M.register(new y.EventEmitter),M._onBinary=M.register(new y.EventEmitter),M._scrollToBottom=c,M.register({dispose:function(){return M._scrollToBottom=void 0}}),M.modes=(0,a.clone)(v),M.decPrivateModes=(0,a.clone)(o),M}return d(r,e),Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.modes=(0,a.clone)(v),this.decPrivateModes=(0,a.clone)(o)},r.prototype.triggerDataEvent=function(c,u){if(u===void 0&&(u=!1),!this._optionsService.rawOptions.disableStdin){var g=this._bufferService.buffer;g.ybase!==g.ydisp&&this._scrollToBottom(),u&&this._onUserInput.fire(),this._logService.debug('sending data "'+c+'"',function(){return c.split("").map(function(S){return S.charCodeAt(0)})}),this._onData.fire(c)}},r.prototype.triggerBinaryEvent=function(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+c+'"',function(){return c.split("").map(function(u){return u.charCodeAt(0)})}),this._onBinary.fire(c))},p([_(1,C.IBufferService),_(2,C.ILogService),_(3,C.IOptionsService)],r)}(h.Disposable);i.CoreService=t},3730:function(b,i,f){var l=this&&this.__decorate||function(C,y,a,h){var v,o=arguments.length,t=o<3?y:h===null?h=Object.getOwnPropertyDescriptor(y,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(C,y,a,h);else for(var e=C.length-1;e>=0;e--)(v=C[e])&&(t=(o<3?v(t):o>3?v(y,a,t):v(y,a))||t);return o>3&&t&&Object.defineProperty(y,a,t),t},d=this&&this.__param||function(C,y){return function(a,h){y(a,h,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DirtyRowService=void 0;var p=f(2585),_=function(){function C(y){this._bufferService=y,this.clearRange()}return Object.defineProperty(C.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),C.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},C.prototype.markDirty=function(y){y<this._start?this._start=y:y>this._end&&(this._end=y)},C.prototype.markRangeDirty=function(y,a){if(y>a){var h=y;y=a,a=h}y<this._start&&(this._start=y),a>this._end&&(this._end=a)},C.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([d(0,p.IBufferService)],C)}();i.DirtyRowService=_},4348:function(b,i,f){var l=this&&this.__spreadArray||function(y,a,h){if(h||arguments.length===2)for(var v,o=0,t=a.length;o<t;o++)!v&&o in a||(v||(v=Array.prototype.slice.call(a,0,o)),v[o]=a[o]);return y.concat(v||Array.prototype.slice.call(a))};Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;var d=f(2585),p=f(8343),_=function(){function y(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];this._entries=new Map;for(var v=0,o=a;v<o.length;v++){var t=o[v],e=t[0],r=t[1];this.set(e,r)}}return y.prototype.set=function(a,h){var v=this._entries.get(a);return this._entries.set(a,h),v},y.prototype.forEach=function(a){this._entries.forEach(function(h,v){return a(v,h)})},y.prototype.has=function(a){return this._entries.has(a)},y.prototype.get=function(a){return this._entries.get(a)},y}();i.ServiceCollection=_;var C=function(){function y(){this._services=new _,this._services.set(d.IInstantiationService,this)}return y.prototype.setService=function(a,h){this._services.set(a,h)},y.prototype.getService=function(a){return this._services.get(a)},y.prototype.createInstance=function(a){for(var h=[],v=1;v<arguments.length;v++)h[v-1]=arguments[v];for(var o=(0,p.getServiceDependencies)(a).sort(function(S,M){return S.index-M.index}),t=[],e=0,r=o;e<r.length;e++){var c=r[e],u=this._services.get(c.id);if(!u)throw new Error("[createInstance] "+a.name+" depends on UNKNOWN service "+c.id+".");t.push(u)}var g=o.length>0?o[0].index:h.length;if(h.length!==g)throw new Error("[createInstance] First service dependency of "+a.name+" at position "+(g+1)+" conflicts with "+h.length+" static arguments");return new(a.bind.apply(a,l([void 0],l(l([],h,!0),t,!0),!1)))},y}();i.InstantiationService=C},7866:function(b,i,f){var l=this&&this.__decorate||function(a,h,v,o){var t,e=arguments.length,r=e<3?h:o===null?o=Object.getOwnPropertyDescriptor(h,v):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,h,v,o);else for(var c=a.length-1;c>=0;c--)(t=a[c])&&(r=(e<3?t(r):e>3?t(h,v,r):t(h,v))||r);return e>3&&r&&Object.defineProperty(h,v,r),r},d=this&&this.__param||function(a,h){return function(v,o){h(v,o,a)}},p=this&&this.__spreadArray||function(a,h,v){if(v||arguments.length===2)for(var o,t=0,e=h.length;t<e;t++)!o&&t in h||(o||(o=Array.prototype.slice.call(h,0,t)),o[t]=h[t]);return a.concat(o||Array.prototype.slice.call(h))};Object.defineProperty(i,"__esModule",{value:!0}),i.LogService=void 0;var _=f(2585),C={debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF},y=function(){function a(h){var v=this;this._optionsService=h,this.logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(o){o==="logLevel"&&v._updateLogLevel()})}return a.prototype._updateLogLevel=function(){this.logLevel=C[this._optionsService.rawOptions.logLevel]},a.prototype._evalLazyOptionalParams=function(h){for(var v=0;v<h.length;v++)typeof h[v]=="function"&&(h[v]=h[v]())},a.prototype._log=function(h,v,o){this._evalLazyOptionalParams(o),h.call.apply(h,p([console,"xterm.js: "+v],o,!1))},a.prototype.debug=function(h){for(var v=[],o=1;o<arguments.length;o++)v[o-1]=arguments[o];this.logLevel<=_.LogLevelEnum.DEBUG&&this._log(console.log,h,v)},a.prototype.info=function(h){for(var v=[],o=1;o<arguments.length;o++)v[o-1]=arguments[o];this.logLevel<=_.LogLevelEnum.INFO&&this._log(console.info,h,v)},a.prototype.warn=function(h){for(var v=[],o=1;o<arguments.length;o++)v[o-1]=arguments[o];this.logLevel<=_.LogLevelEnum.WARN&&this._log(console.warn,h,v)},a.prototype.error=function(h){for(var v=[],o=1;o<arguments.length;o++)v[o-1]=arguments[o];this.logLevel<=_.LogLevelEnum.ERROR&&this._log(console.error,h,v)},l([d(0,_.IOptionsService)],a)}();i.LogService=y},7302:function(b,i,f){var l=this&&this.__assign||function(){return l=Object.assign||function(y){for(var a,h=1,v=arguments.length;h<v;h++)for(var o in a=arguments[h])Object.prototype.hasOwnProperty.call(a,o)&&(y[o]=a[o]);return y},l.apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=i.DEFAULT_BELL_SOUND=void 0;var d=f(8460),p=f(6114);i.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:i.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var _=["normal","bold","100","200","300","400","500","600","700","800","900"],C=function(){function y(a){this._onOptionChange=new d.EventEmitter;var h=l({},i.DEFAULT_OPTIONS);for(var v in a)if(v in h)try{var o=a[v];h[v]=this._sanitizeAndValidateOption(v,o)}catch(t){console.error(t)}this.rawOptions=h,this.options=l({},h),this._setupOptions()}return Object.defineProperty(y.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),y.prototype._setupOptions=function(){var a=this,h=function(e){if(!(e in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return a.rawOptions[e]},v=function(e,r){if(!(e in i.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');r=a._sanitizeAndValidateOption(e,r),a.rawOptions[e]!==r&&(a.rawOptions[e]=r,a._onOptionChange.fire(e))};for(var o in this.rawOptions){var t={get:h.bind(this,o),set:v.bind(this,o)};Object.defineProperty(this.options,o,t)}},y.prototype.setOption=function(a,h){this.options[a]=h},y.prototype._sanitizeAndValidateOption=function(a,h){switch(a){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":h||(h=i.DEFAULT_OPTIONS[a]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=_.includes(h)?h:i.DEFAULT_OPTIONS[a];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(a+" cannot be less than 1, value: "+h);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(a+" cannot be less than 0, value: "+h);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(a+" cannot be less than or equal to 0, value: "+h);case"rows":case"cols":if(!h&&h!==0)throw new Error(a+" must be numeric, value: "+h)}return h},y.prototype.getOption=function(a){return this.options[a]},y}();i.OptionsService=C},8343:(b,i)=>{function f(l,d,p){d.di$target===d?d.di$dependencies.push({id:l,index:p}):(d.di$dependencies=[{id:l,index:p}],d.di$target=d)}Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0,i.serviceRegistry=new Map,i.getServiceDependencies=function(l){return l.di$dependencies||[]},i.createDecorator=function(l){if(i.serviceRegistry.has(l))return i.serviceRegistry.get(l);var d=function(p,_,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");f(d,p,C)};return d.toString=function(){return l},i.serviceRegistry.set(l,d),d}},2585:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IUnicodeService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.IDirtyRowService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;var l,d=f(8343);i.IBufferService=(0,d.createDecorator)("BufferService"),i.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),i.ICoreService=(0,d.createDecorator)("CoreService"),i.ICharsetService=(0,d.createDecorator)("CharsetService"),i.IDirtyRowService=(0,d.createDecorator)("DirtyRowService"),i.IInstantiationService=(0,d.createDecorator)("InstantiationService"),(l=i.LogLevelEnum||(i.LogLevelEnum={}))[l.DEBUG=0]="DEBUG",l[l.INFO=1]="INFO",l[l.WARN=2]="WARN",l[l.ERROR=3]="ERROR",l[l.OFF=4]="OFF",i.ILogService=(0,d.createDecorator)("LogService"),i.IOptionsService=(0,d.createDecorator)("OptionsService"),i.IUnicodeService=(0,d.createDecorator)("UnicodeService")},1480:(b,i,f)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;var l=f(8460),d=f(225),p=function(){function _(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var C=new d.UnicodeV6;this.register(C),this._active=C.version,this._activeProvider=C}return Object.defineProperty(_.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"activeVersion",{get:function(){return this._active},set:function(C){if(!this._providers[C])throw new Error('unknown Unicode version "'+C+'"');this._active=C,this._activeProvider=this._providers[C],this._onChange.fire(C)},enumerable:!1,configurable:!0}),_.prototype.register=function(C){this._providers[C.version]=C},_.prototype.wcwidth=function(C){return this._activeProvider.wcwidth(C)},_.prototype.getStringCellWidth=function(C){for(var y=0,a=C.length,h=0;h<a;++h){var v=C.charCodeAt(h);if(55296<=v&&v<=56319){if(++h>=a)return y+this.wcwidth(v);var o=C.charCodeAt(h);56320<=o&&o<=57343?v=1024*(v-55296)+o-56320+65536:y+=this.wcwidth(o)}y+=this.wcwidth(v)}return y},_}();i.UnicodeService=p}},L={};return function b(i){var f=L[i];if(f!==void 0)return f.exports;var l=L[i]={exports:{}};return m[i].call(l.exports,l,l.exports,b),l.exports}(4389)})()})})(En);var An={exports:{}};(function(n,s){(function(m,L){n.exports=L()})(self,function(){return(()=>{var m={775:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0;var f=function(){function l(){}return l.prototype.activate=function(d){this._terminal=d},l.prototype.dispose=function(){},l.prototype.fit=function(){var d=this.proposeDimensions();if(d&&this._terminal){var p=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(p._renderService.clear(),this._terminal.resize(d.cols,d.rows))}},l.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var d=this._terminal._core;if(d._renderService.dimensions.actualCellWidth!==0&&d._renderService.dimensions.actualCellHeight!==0){var p=window.getComputedStyle(this._terminal.element.parentElement),_=parseInt(p.getPropertyValue("height")),C=Math.max(0,parseInt(p.getPropertyValue("width"))),y=window.getComputedStyle(this._terminal.element),a=_-(parseInt(y.getPropertyValue("padding-top"))+parseInt(y.getPropertyValue("padding-bottom"))),h=C-(parseInt(y.getPropertyValue("padding-right"))+parseInt(y.getPropertyValue("padding-left")))-d.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(h/d._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(a/d._renderService.dimensions.actualCellHeight))}}}},l}();i.FitAddon=f}},L={};return function b(i){if(L[i])return L[i].exports;var f=L[i]={exports:{}};return m[i](f,f.exports,b),f.exports}(775)})()})})(An);const Zs=document.querySelector("#app div");Ys.Main.init({node:Zs});window.addEventListener("load",()=>{const n=new En.exports.Terminal({cursorBlink:!0}),s=new An.exports.FitAddon;n.loadAddon(s),n.open(document.getElementById("terminal")),s.fit(),n.onData,n.writeln("\x1B[1;32mWelcome to Hammurabi!"),n.write("> ")});
